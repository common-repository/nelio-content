(()=>{var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t),e.d(t,{calendar:()=>s});var r={};e.r(r),e.d(r,{areAutomaticMessagesVisible:()=>Pe,areFailedMessagesVisible:()=>Ae,areSocialMessagesCollapsedInDay:()=>Se,areTasksVisible:()=>me,areThereActiveExternalEventFilters:()=>de,areThereActiveFilters:()=>oe,areThereActivePostFilters:()=>ue,areThereActiveSocialFilters:()=>ce,areThereActiveTaskFilters:()=>le,areThereUnscheduledPostsToLoad:()=>j,formatCalendarTime:()=>ze,getActiveTabInFilterPane:()=>ie,getAdminSidebarWidth:()=>ut,getCalendarMode:()=>et,getCalendarWidth:()=>ot,getDisabledExternalCalendars:()=>he,getDisabledInternalEventTypes:()=>pe,getDisabledPostTypes:()=>ye,getDisabledSocialProfilesByNetwork:()=>ve,getDisabledStatuses:()=>ge,getDraggingItem:()=>je,getEditingExternalCalendarName:()=>$,getEditingExternalCalendarUrl:()=>Z,getExternalCalendar:()=>z,getExternalCalendarEditorMode:()=>q,getExternalCalendars:()=>X,getFilters:()=>se,getFirstDay:()=>rt,getFocusDay:()=>tt,getHoverItem:()=>Ve,getIcsLink:()=>$e,getLastDay:()=>nt,getLastLoadedPageInUnscheduled:()=>H,getLoaderTimeout:()=>Re,getMinimumRowHeight:()=>it,getNumberOfNonCollapsableMessages:()=>st,getNumberOfVisibleDays:()=>at,getPostAuthorFilter:()=>Ee,getPremiumFilter:()=>Te,getRecurringAction:()=>x,getSettings:()=>We,getSidePane:()=>Je,getTaskAssigneeFilter:()=>be,getTaskIdInTaskViewer:()=>M,getUnscheduledPostsSearchQuery:()=>G,getUnscheduledPostsSearchTimeout:()=>F,isAddingAnExternalCalendar:()=>J,isCalendarSynching:()=>Ne,isDeletingAnExternalCalendar:()=>te,isDeletingExternalCalendar:()=>re,isDragging:()=>Fe,isErrorPaneOpen:()=>qe,isExportDialogOpen:()=>C,isFilterPaneOpen:()=>Ke,isHighlighted:()=>Ge,isIcsEnabled:()=>Ze,isItemVisible:()=>fe,isLoadingUnscheduledPosts:()=>B,isManagingExternalCalendars:()=>K,isPeriodReady:()=>Le,isReusableMessageViewOpen:()=>Qe,isSavingAnExternalCalendar:()=>ee,isSynching:()=>ke,isTaskViewerDialogOpen:()=>U,isUnscheduledViewOpen:()=>Ye,useEditorialCalendarOnly:()=>Xe});var n={};e.r(n),e.d(n,{_setCalendarMode:()=>qt,clearFilters:()=>It,closeExternalCalendarEditor:()=>Tt,closeRecurringDialog:()=>pt,collapseSocialMessagesInDay:()=>Vt,dragEnd:()=>Wt,dragStart:()=>Bt,initCalendarSettings:()=>Qt,loadPreviousFilters:()=>jt,manageExternalCalendars:()=>Et,markAsDeleting:()=>wt,markAsSaving:()=>Pt,markAsUpdated:()=>er,markAsUpdating:()=>Jt,markPeriodAsLoaded:()=>$t,markPeriodAsLoading:()=>Zt,openExportDialog:()=>ct,openExternalCalendarEditor:()=>bt,openTaskViewerDialog:()=>lt,receiveExternalCalendars:()=>Dt,removeExternalCalendar:()=>mt,requestRecurringRescheduleMode:()=>dt,requestRecurringTrashMode:()=>ft,setActiveTabInFilterPane:()=>_t,setCalendarDimensions:()=>zt,setDisabledExternalCalendars:()=>Nt,setDisabledInternalEventTypes:()=>Ot,setDisabledPostTypeTerms:()=>Rt,setDisabledPostTypes:()=>Lt,setDisabledSocialProfilesInNetwork:()=>Ct,setDisabledStatuses:()=>kt,setEditingExternalCalendarName:()=>At,setEditingExternalCalendarUrl:()=>St,setFocusDay:()=>Xt,setHoverItem:()=>Yt,setIsLoadingUnscheduledPosts:()=>yt,setLoaderTimeout:()=>tr,setPostAuthorFilter:()=>Mt,setPremiumFilter:()=>Ht,setTaskAssigneeFilter:()=>Ut,setUnscheduledPostsQuery:()=>gt,setUnscheduledPostsSearchTimeout:()=>vt,showAutomaticMessages:()=>Ft,showFailedMessages:()=>Gt,toggleSidePane:()=>Kt,toggleTasksVisibility:()=>xt,updateUnscheduledPostsPagination:()=>ht});var a={};e.r(a),e.d(a,{addExternalCalendar:()=>qr,deleteExternalCalendar:()=>zr,deleteSocialMessage:()=>_r,deleteTask:()=>yr,loadItemsIn:()=>un,loadItemsNow:()=>on,loadUnscheduledPosts:()=>or,nextPeriod:()=>en,previousPeriod:()=>tn,reschedulePost:()=>Ur,rescheduleSocialMessage:()=>Dr,rescheduleTask:()=>hr,saveExternalCalendar:()=>Xr,setCalendarMode:()=>rn,showToday:()=>Jr,toggleTaskCompletion:()=>gr,trashPost:()=>Gr,unschedulePost:()=>Vr});var s={};e.r(s),e.d(s,{store:()=>yn,useCanCreateMessages:()=>Hn,useCanCreatePosts:()=>jn,useCanCreateTasks:()=>Bn,useCollapsableItemCount:()=>Mn,useDayCollapser:()=>Cn,useDayType:()=>kn,useDefaultTime:()=>Ln,useDraggingItem:()=>Nn,useFirstDay:()=>zn,useHoverItem:()=>Rn,useItem:()=>On,useItemDragTriggers:()=>Vn,useItemDropper:()=>qn,useItemHoverListeners:()=>Un,useMessageCreator:()=>Yn,useMinRowHeight:()=>Xn,useNewPostLabel:()=>Fn,useNonCollapsedDayItems:()=>xn,useNumberOfVisibleDays:()=>Zn,usePostCreator:()=>Wn,usePostStatus:()=>Gn,useSidePane:()=>$n,useTaskCreator:()=>Qn,useToday:()=>Kn});const i=window.wp.data;function o(e,t){return(0,i.useSelect)(e,t)}function u(e){return(0,i.resolveSelect)(e)}var c={isExportDialogOpen:!1,recurringAction:void 0,taskIdInTaskViewer:void 0},l=function(){return l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},l.apply(this,arguments)},d={unscheduledPosts:{byQueryPagination:{},defaultPagination:{lastPageLoaded:0,maxPages:1,isLoading:!1},query:"",searchTimeout:0}},f=function(){return f=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},f.apply(this,arguments)},p={lastPageLoaded:0,maxPages:1,isLoading:!1};const h=window.lodash;var y={isManaging:!1,byUrl:{},deleting:[],editor:void 0},g=function(){return g=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},g.apply(this,arguments)},v=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},E={activeTab:"post",areAllMessagesVisibleInDay:{},disabledInternalEventTypes:[],disabledExternalCalendars:[],disabledPostTypes:[],disabledPostTypeTerms:{},disabledPostAuthors:[],disabledSocialProfilesByNetwork:{},disabledStatuses:[],areTasksVisible:!0,taskAssignee:void 0,postAuthor:void 0,areFailedMessagesVisible:!0,areAutomaticMessagesVisible:!0,premium:{}},m=function(){return m=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},m.apply(this,arguments)},b={drag:void 0,hover:void 0},T=function(){return T=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},T.apply(this,arguments)},S={adminSidebarWidth:0,calendarMode:"two-weeks",calendarWidth:0,focusDay:"",icsLinks:void 0,minRowHeight:0,numberOfNonCollapsableMessages:0,sidePane:"unscheduled-posts",useEditorialCalendarOnly:!1,calendarTimeFormat:"H:ia",simplifyCalendarTime:!0},A=function(){return A=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},A.apply(this,arguments)};const P=window.moment;var w=e.n(P);const D=window.NelioContent.date;var _={loadedDays:{},loaderTimeout:0,updating:[]},I=function(){return I=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},I.apply(this,arguments)},O=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};function N(e,t){return(0,h.find)(e,{type:t.type,id:t.id})?e:O(O([],e,!0),[t],!1)}function R(e,t){var r=(0,h.find)(e,(function(e){return e.type===t.type&&e.id===t.id}));return r?(0,h.without)(e,r):e}function L(e,t,r){var n,a,s=w()(t);do{a=(0,D.date)("Y-m-d",s),e=I(I({},e),((n={})[a]=!0,n)),s.add(1,"day")}while(a<=r);return e}const k=(0,i.combineReducers)({dialogs:function(e,t){var r;return void 0===e&&(e=c),null!==(r=function(e,t){switch(t.type){case"OPEN_EXPORT_DIALOG":return l(l({},e),{isExportDialogOpen:t.isOpen});case"OPEN_TASK_VIEWER_DIALOG":return l(l({},e),{taskIdInTaskViewer:t.taskId});case"REQUEST_RECURRING_RESCHEDULE_MODE":return l(l({},e),{recurringAction:{type:"reschedule",props:t.props}});case"REQUEST_RECURRING_TRASH_MODE":return l(l({},e),{recurringAction:{type:"trash",props:t.props}});case"CLOSE_RECURRING_DIALOG":return l(l({},e),{recurringAction:void 0})}}(e,t))&&void 0!==r?r:e},entities:function(e,t){var r;return void 0===e&&(e=d),null!==(r=function(e,t){var r,n;switch(t.type){case"SET_UNSCHEDULED_POSTS_QUERY":return f(f({},e),{unscheduledPosts:f(f({},e.unscheduledPosts),{query:t.query})});case"SET_UNSCHEDULED_POSTS_SEARCH_TIMEOUT":return f(f({},e),{unscheduledPosts:f(f({},e.unscheduledPosts),{searchTimeout:t.timeout})});case"UPDATE_UNSCHEDULED_POSTS_PAGINATION":return t.query?f(f({},e),{unscheduledPosts:f(f({},e.unscheduledPosts),{byQueryPagination:f(f({},e.unscheduledPosts.byQueryPagination),(r={},r[t.query]=f(f(f({},p),e.unscheduledPosts.byQueryPagination[t.query]),{lastPageLoaded:t.lastPageLoaded,maxPages:t.maxPages}),r))})}):f(f({},e),{unscheduledPosts:f(f({},e.unscheduledPosts),{defaultPagination:f(f({},e.unscheduledPosts.defaultPagination),{lastPageLoaded:t.lastPageLoaded,maxPages:t.maxPages})})});case"IS_LOADING_UNSCHEDULED_POSTS":return t.query?f(f({},e),{unscheduledPosts:f(f({},e.unscheduledPosts),{byQueryPagination:f(f({},e.unscheduledPosts.byQueryPagination),(n={},n[t.query]=f(f(f({},p),e.unscheduledPosts.byQueryPagination[t.query]),{isLoading:t.isLoading}),n))})}):f(f({},e),{unscheduledPosts:f(f({},e.unscheduledPosts),{defaultPagination:f(f({},e.unscheduledPosts.defaultPagination),{isLoading:t.isLoading})})})}}(e,t))&&void 0!==r?r:e},externalCalendars:function(e,t){var r;return void 0===e&&(e=y),null!==(r=function(e,t){switch(t.type){case"MANAGE_EXTERNAL_CALENDARS":return g(g({},e),{isManaging:t.isActive});case"RECEIVE_EXTERNAL_CALENDARS":return g(g({},e),{byUrl:g(g({},e.byUrl),(0,h.keyBy)(t.externalCalendars,"url"))});case"REMOVE_EXTERNAL_CALENDAR":return g(g({},e),{byUrl:(0,h.omit)(e.byUrl,t.url)});case"OPEN_EXTERNAL_EDITOR_CALENDAR":return g(g({},e),{editor:{isNew:!t.url,isSaving:!1,url:t.url,name:t.name}});case"CLOSE_EXTERNAL_CALENDAR_EDITOR":return g(g({},e),{editor:void 0});case"SET_EDITING_EXTERNAL_CALENDAR_URL":return e.editor&&e.editor.isNew?g(g({},e),{editor:g(g({},e.editor),{url:t.url})}):e;case"SET_EDITING_EXTERNAL_CALENDAR_NAME":return e.editor?g(g({},e),{editor:g(g({},e.editor),{name:t.name})}):e;case"MARK_AS_SAVING":return e.editor?g(g({},e),{editor:g(g({},e.editor),{isSaving:t.isSaving})}):e;case"MARK_AS_DELETING":return g(g({},e),{deleting:t.isDeleting?(0,h.uniq)(v(v([],e.deleting,!0),[t.url],!1)):(0,h.without)(e.deleting,t.url)})}}(e,t))&&void 0!==r?r:e},filters:function(e,t){var r;return void 0===e&&(e=E),null!==(r=function(e,t){var r,n,a,s,i;switch(t.type){case"CLEAR_FILTERS":return E;case"SET_ACTIVE_TAB_IN_FILTER_PANE":return m(m({},e),{activeTab:t.tabName});case"SET_DISABLED_POST_TYPE_TERMS":return m(m({},e),{disabledPostTypeTerms:m(m({},e.disabledPostTypeTerms),(r={},r[t.postType]=m(m({},e.disabledPostTypeTerms[t.postType]),(n={},n[t.taxonomy]=t.terms,n)),r))});case"SET_DISABLED_STATUSES":return m(m({},e),{disabledStatuses:t.statuses});case"SET_DISABLED_INTERNAL_EVENT_TYPES":return m(m({},e),{disabledInternalEventTypes:t.internalEventTypes});case"SET_DISABLED_EXTERNAL_CALENDARS":return m(m({},e),{disabledExternalCalendars:t.externalCalendars});case"SET_DISABLED_POST_TYPES":return m(m({},e),{disabledPostTypes:t.postTypes});case"SET_POST_AUTHOR_FILTER":return m(m({},e),{postAuthor:t.authorId});case"SET_DISABLED_PROFILES_IN_NETWORK":return m(m({},e),{disabledSocialProfilesByNetwork:m(m({},e.disabledSocialProfilesByNetwork),(a={},a[t.network]=t.disabledProfiles,a))});case"TOGGLE_TASKS_VISIBILITY":return m(m({},e),{areTasksVisible:!e.areTasksVisible});case"SET_TASK_ASSIGNEE_FILTER":return m(m({},e),{taskAssignee:t.assigneeId});case"COLLAPSE_MESSAGES_IN_DAY":return m(m({},e),{areAllMessagesVisibleInDay:m(m({},e.areAllMessagesVisibleInDay),(s={},s[t.day]=!t.areMessagesCollapsed,s))});case"SHOW_FAILED_MESSAGES":return m(m({},e),{areFailedMessagesVisible:!!t.areFailedMessagesVisible});case"SHOW_AUTOMATIC_MESSAGES":return m(m({},e),{areAutomaticMessagesVisible:!!t.areAutomaticMessagesVisible});case"LOAD_PREVIOUS_FILTERS":return m(m({},e),t.filters);case"SET_PREMIUM_FILTER":return m(m({},e),{premium:m(m({},e.premium),(i={},i[t.filterName]=t.value,i))})}}(e,t))&&void 0!==r?r:e},interaction:function(e,t){var r;return void 0===e&&(e=b),null!==(r=function(e,t){switch(t.type){case"DRAG_START":return T(T({},e),{drag:t.item,hover:void 0});case"DRAG_END":return T(T({},e),{drag:void 0});case"HOVER_ITEM":return T(T({},e),{hover:t.item});case"HOVER_END":return T(T({},e),{hover:void 0})}}(e,t))&&void 0!==r?r:e},settings:function(e,t){var r;return void 0===e&&(e=S),null!==(r=function(e,t){switch(t.type){case"SET_CALENDAR_DIMENSIONS":return A(A({},e),{adminSidebarWidth:t.adminSidebarWidth,calendarWidth:t.calendarWidth,minRowHeight:t.minRowHeight});case"TOGGLE_SIDE_PANE":return A(A({},e),{sidePane:e.sidePane===t.pane?"none":t.pane});case"SET_CALENDAR_MODE":return A(A({},e),{calendarMode:t.mode||"two-weeks"});case"SET_FOCUS_DAY":return A(A({},e),{focusDay:t.focusDay});case"INIT_CALENDAR_SETTINGS":return A(A(A({},S),t.settings),{sidePane:t.settings.sidePane||"none"})}}(e,t))&&void 0!==r?r:e},status:function(e,t){var r;return void 0===e&&(e=_),null!==(r=function(e,t){switch(t.type){case"MARK_AS_UPDATING":return I(I({},e),{updating:N(e.updating,t.item)});case"MARK_AS_UPDATED":return I(I({},e),{updating:R(e.updating,t.item)});case"MARK_PERIOD_AS_LOADING":return I(I({},e),{updating:N(e.updating,t.period)});case"MARK_PERIOD_AS_LOADED":return I(I({},e),{loadedDays:L(e.loadedDays,t.period.firstDay,t.period.lastDay),updating:R(e.updating,t.period)});case"SET_LOADER_TIMEOUT":return I(I({},e),{loaderTimeout:t.timeout})}}(e,t))&&void 0!==r?r:e}});function C(e){return e.dialogs.isExportDialogOpen}function M(e){return e.dialogs.taskIdInTaskViewer||void 0}function x(e){return e.dialogs.recurringAction}function U(e){return!!e.dialogs.taskIdInTaskViewer}var V=function(){return V=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},V.apply(this,arguments)};function G(e){return e.entities.unscheduledPosts.query||""}function F(e){return e.entities.unscheduledPosts.searchTimeout}function j(e,t){var r=Y(e,"");if(r.lastPageLoaded>=r.maxPages)return!1;var n=Y(e,t);return n.lastPageLoaded<n.maxPages}function H(e,t){return Y(e,t).lastPageLoaded}function B(e,t){return!!j(e,"")&&Y(e,t).isLoading}var W={lastPageLoaded:0,maxPages:1,isLoading:!1};function Y(e,t){return(t=(0,h.trim)(t))?V(V({},W),e.entities.unscheduledPosts.byQueryPagination[t]):e.entities.unscheduledPosts.defaultPagination}const Q=window.NelioContent.utils;function K(e){return e.externalCalendars.isManaging}function q(e){return e.externalCalendars.editor?e.externalCalendars.editor.isNew?"create":"edit":"none"}function X(e){return(0,h.values)(e.externalCalendars.byUrl)}function z(e,t){return e.externalCalendars.byUrl[t]}function Z(e){var t,r=e.externalCalendars.editor;return null!==(t=null==r?void 0:r.url)&&void 0!==t?t:""}function $(e){var t,r=e.externalCalendars.editor;return null!==(t=null==r?void 0:r.name)&&void 0!==t?t:""}function J(e){var t=e.externalCalendars.editor;return!!(null==t?void 0:t.isNew)&&!!(null==t?void 0:t.isSaving)}function ee(e){var t=e.externalCalendars.editor;return!!(null==t?void 0:t.isSaving)}function te(e){return!(0,Q.isEmpty)(e.externalCalendars.deleting)}function re(e,t){return e.externalCalendars.deleting.includes(t)}const ne=window.NelioContent.data,ae=window.NelioContent.premiumHooksForPages;function se(e){return e.filters}function ie(e){return e.filters.activeTab}function oe(e){return ue(e)||ce(e)||le(e)||de(e)}function ue(e){return!(0,Q.isEmpty)(ye(e))||!(0,Q.isEmpty)(ge(e))||!(0,Q.isEmpty)(Ee(e))}function ce(e){var t=ve(e),r=(0,h.flatten)((0,h.values)(t)),n=(0,i.select)(ne.store).getSocialProfile;return!(0,Q.isEmpty)((0,h.filter)((0,h.map)(r,n)))}function le(e){return!me(e)||!!be(e)}function de(e){var t=(0,h.keys)(e.externalCalendars.byUrl);return!!he(e).filter((function(e){return t.includes(e)})).length}function fe(e,t,r){switch(t){case"post":return we(r)&&function(e,t){var r=Ee(e);return(!r||r===t.author)&&(!ye(e).includes(t.type)&&!ge(e).includes(t.status))}(e,r);case"social":return De(r)&&function(e,t){return!("error"!==t.status||!Ae(e))||!(t.auto&&!Pe(e))&&!(ve(e)[t.network]||[]).includes(t.profileId)}(e,r);case"task":return _e(r)&&function(e,t){if(!me(e))return!1;var r=be(e);return!r||r===t.assigneeId}(e,r);case"external-event":return Ie(r)&&function(e,t){return!he(e).includes(t.calendar)}(e,r);case"internal-event":return Oe(r)&&function(e,t){return!pe(e).includes(t.type)}(e,r);default:return(0,ae.isPremiumItemVisible)(t,r)}}function pe(e){return e.filters.disabledInternalEventTypes}function he(e){return e.filters.disabledExternalCalendars}function ye(e){return e.filters.disabledPostTypes}function ge(e){return e.filters.disabledStatuses}function ve(e){return e.filters.disabledSocialProfilesByNetwork}function Ee(e){return e.filters.postAuthor||void 0}function me(e){return e.filters.areTasksVisible}function be(e){return e.filters.taskAssignee||void 0}function Te(e,t){if("_"!==t)return e.filters.premium[t]}function Se(e,t){return!e.filters.areAllMessagesVisibleInDay[t]}function Ae(e){return e.filters.areFailedMessagesVisible}function Pe(e){return e.filters.areAutomaticMessagesVisible}var we=function(e){return"number"==typeof e.id},De=function(e){return!we(e)&&"network"in e},_e=function(e){return!we(e)&&"task"in e},Ie=function(e){return!we(e)&&"calendar"in e},Oe=function(e){return!we(e)};function Ne(e){return!(0,Q.isEmpty)(e.status.updating)}function Re(e){return e.status.loaderTimeout||0}function Le(e,t,r){var n,a=w()(t);do{if(n=(0,D.date)("Y-m-d",a),!e.status.loadedDays[n])return!1;a.add(1,"day")}while(n<=r);return!0}function ke(e,t,r){if("post"===t)return!!(0,h.find)(e.status.updating,{relatedPost:r});if((0,h.find)(e.status.updating,{type:t,id:r}))return!0;var n=(0,(0,i.select)(ne.store).getItem)(t,r);return Ce(e,n)||xe(e,n)}var Ce=function(e,t){return Me(t)&&!!(0,h.find)(e.status.updating,{type:"post",id:t.postId})},Me=function(e){return!!e&&"object"==typeof e&&!!e.postId},xe=function(e,t){return Ue(t)&&!!(0,h.find)(e.status.updating,{type:"social",recurrenceGroup:t.recurrenceGroup})},Ue=function(e){return!!e&&"object"==typeof e&&!!e.recurrenceGroup};function Ve(e){return e.interaction.hover}function Ge(e,t,r){var n=e.interaction.hover;if(!n)return!1;if("external-event"===n.type)return!1;if("internal-event"===n.type)return!1;if(ke(e,t,r))return!1;if(n.type===t&&n.id===r)return!0;var a=(0,(0,i.select)(ne.store).getItem)(t,r);return!!a&&("post"===t?n.relatedPostId===a.id:!(!He(a)||a.postId!==n.relatedPostId)||!(!Be(a)||!Be(n)||a.recurrenceGroup!==n.recurrenceGroup))}function Fe(e,t,r){return!!e.interaction.drag&&e.interaction.drag.type===t&&e.interaction.drag.id===r}function je(e){return e.interaction.drag}var He=function(e){return!!e&&"object"==typeof e&&!!e.postId},Be=function(e){return!!e&&"object"==typeof e&&!!e.recurrenceGroup};function We(e){return e.settings}function Ye(e){return"unscheduled-posts"===e.settings.sidePane}function Qe(e){return"reusable-messages"===e.settings.sidePane}function Ke(e){return"filters"===e.settings.sidePane}function qe(e){return"errors"===e.settings.sidePane}function Xe(e){return e.settings.useEditorialCalendarOnly}function ze(e,t){var r=(0,D.dateI18n)(e.settings.calendarTimeFormat,t);return e.settings.simplifyCalendarTime?r.replace(":00","").replace(/m$/i,"").replace(/\s/g,""):r}function Ze(e){return!!e.settings.icsLinks}function $e(e,t){var r;return null===(r=e.settings.icsLinks)||void 0===r?void 0:r[t]}function Je(e){return e.settings.sidePane}function et(e){return e.settings.calendarMode}function tt(e){return e.settings.focusDay}function rt(e,t){var r=tt(e),n=et(e);if("agenda"===n)return r;var a=w()((0,D.wpifyDateTime)("c",r,"12:00"));return"month"===n&&a.date(1),a.day()===t?(0,D.date)("Y-m-d",a):(0,D.date)("Y-m-d",a.isoWeekday(t))}function nt(e,t){var r=rt(e,t);if(!r)return"";var n=at(e);return(0,D.date)("Y-m-d",w()(r).add(n,"days"))}function at(e){switch(et(e)){case"agenda":return 4;case"week":return 7;case"month":return 42;default:return 14}}function st(e){return e.settings.numberOfNonCollapsableMessages}function it(e){return e.settings.minRowHeight}function ot(e){return e.settings.calendarWidth}function ut(e){return e.settings.adminSidebarWidth}function ct(e){return void 0===e&&(e=!0),{type:"OPEN_EXPORT_DIALOG",isOpen:e}}function lt(e){return{type:"OPEN_TASK_VIEWER_DIALOG",taskId:e}}function dt(e){return{type:"REQUEST_RECURRING_RESCHEDULE_MODE",props:e}}function ft(e){return{type:"REQUEST_RECURRING_TRASH_MODE",props:e}}function pt(){return{type:"CLOSE_RECURRING_DIALOG"}}function ht(e,t,r){return{type:"UPDATE_UNSCHEDULED_POSTS_PAGINATION",query:e,lastPageLoaded:t,maxPages:r}}function yt(e,t){return{type:"IS_LOADING_UNSCHEDULED_POSTS",query:e,isLoading:t}}function gt(e){return{type:"SET_UNSCHEDULED_POSTS_QUERY",query:e}}function vt(e){return{type:"SET_UNSCHEDULED_POSTS_SEARCH_TIMEOUT",timeout:e}}function Et(e){return{type:"MANAGE_EXTERNAL_CALENDARS",isActive:e}}function mt(e){return{type:"REMOVE_EXTERNAL_CALENDAR",url:e}}function bt(e){var t,r;return{type:"OPEN_EXTERNAL_EDITOR_CALENDAR",url:null!==(t=null==e?void 0:e.url)&&void 0!==t?t:"",name:null!==(r=null==e?void 0:e.name)&&void 0!==r?r:""}}function Tt(){return{type:"CLOSE_EXTERNAL_CALENDAR_EDITOR"}}function St(e){return{type:"SET_EDITING_EXTERNAL_CALENDAR_URL",url:e}}function At(e){return{type:"SET_EDITING_EXTERNAL_CALENDAR_NAME",name:e}}function Pt(e){return{type:"MARK_AS_SAVING",isSaving:e}}function wt(e,t){return{type:"MARK_AS_DELETING",url:e,isDeleting:t}}function Dt(e){return{type:"RECEIVE_EXTERNAL_CALENDARS",externalCalendars:(0,h.castArray)(e)}}function _t(e){return{type:"SET_ACTIVE_TAB_IN_FILTER_PANE",tabName:e}}function It(){return{type:"CLEAR_FILTERS"}}function Ot(e){return{type:"SET_DISABLED_INTERNAL_EVENT_TYPES",internalEventTypes:e}}function Nt(e){return{type:"SET_DISABLED_EXTERNAL_CALENDARS",externalCalendars:e}}function Rt(e,t,r){return{type:"SET_DISABLED_POST_TYPE_TERMS",postType:e,taxonomy:t,terms:r}}function Lt(e){return{type:"SET_DISABLED_POST_TYPES",postTypes:e}}function kt(e){return{type:"SET_DISABLED_STATUSES",statuses:e}}function Ct(e,t){return{type:"SET_DISABLED_PROFILES_IN_NETWORK",network:e,disabledProfiles:t}}function Mt(e){return{type:"SET_POST_AUTHOR_FILTER",authorId:e}}function xt(){return{type:"TOGGLE_TASKS_VISIBILITY"}}function Ut(e){return{type:"SET_TASK_ASSIGNEE_FILTER",assigneeId:e}}function Vt(e,t){return{type:"COLLAPSE_MESSAGES_IN_DAY",day:t,areMessagesCollapsed:e}}function Gt(e){return{type:"SHOW_FAILED_MESSAGES",areFailedMessagesVisible:e}}function Ft(e){return{type:"SHOW_AUTOMATIC_MESSAGES",areAutomaticMessagesVisible:e}}function jt(e){if("object"==typeof e)return{type:"LOAD_PREVIOUS_FILTERS",filters:e}}function Ht(e,t){return{type:"SET_PREMIUM_FILTER",filterName:e,value:t}}function Bt(e){return{type:"DRAG_START",item:e}}function Wt(){return{type:"DRAG_END"}}function Yt(e){return e?{type:"HOVER_ITEM",item:e}:{type:"HOVER_END"}}function Qt(e){return{type:"INIT_CALENDAR_SETTINGS",settings:e}}function Kt(e){return{type:"TOGGLE_SIDE_PANE",pane:e}}function qt(e){return{type:"SET_CALENDAR_MODE",mode:e}}function Xt(e){return{type:"SET_FOCUS_DAY",focusDay:e}}function zt(e){return{type:"SET_CALENDAR_DIMENSIONS",adminSidebarWidth:e.adminSidebarWidth,calendarWidth:e.calendarWidth,minRowHeight:e.minRowHeight}}function Zt(e,t){return{type:"MARK_PERIOD_AS_LOADING",period:{type:"period",id:"".concat(e,"::").concat(t),firstDay:e,lastDay:t}}}function $t(e,t){return{type:"MARK_PERIOD_AS_LOADED",period:{type:"period",id:"".concat(e,"::").concat(t),firstDay:e,lastDay:t}}}function Jt(e){return{type:"MARK_AS_UPDATING",item:e}}function er(e){return{type:"MARK_AS_UPDATED",item:e}}function tr(e){return{type:"SET_LOADER_TIMEOUT",timeout:e}}const rr=window.wp.apiFetch,nr=e.n(rr)(),ar=window.wp.url;var sr=function(e,t,r,n){return new(r||(r=Promise))((function(a,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,o)}u((n=n.apply(e,t||[])).next())}))},ir=function(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function or(){return sr(this,arguments,Promise,(function(e){var t,r,n,a,s;return void 0===e&&(e=""),ir(this,(function(o){switch(o.label){case 0:return e=(0,h.trim)(e),[4,(0,i.dispatch)(yn).setUnscheduledPostsSearchTimeout(0)];case 1:if(o.sent(),!(0,i.select)(yn).areThereUnscheduledPostsToLoad(e))return[2];if((0,i.select)(yn).isLoadingUnscheduledPosts(e))return[2];o.label=2;case 2:return o.trys.push([2,8,,10]),[4,(0,i.dispatch)(yn).setIsLoadingUnscheduledPosts(e,!0)];case 3:return o.sent(),t=(0,i.select)(yn).getLastLoadedPageInUnscheduled(e),r=(0,h.map)((0,i.select)(ne.store).getPostTypes("calendar"),"name"),[4,nr({path:(0,ar.addQueryArgs)("/nelio-content/v1/post/search",{page:t+1,per_page:15,query:e,status:"nc_unscheduled",type:r.join(",")}),method:"GET"})];case 4:return n=o.sent(),a=n.results,[4,(0,i.dispatch)(ne.store).receivePosts(a)];case 5:return o.sent(),[4,(0,i.dispatch)(yn).updateUnscheduledPostsPagination(e,t+1,n.pagination.pages)];case 6:return o.sent(),[4,(0,i.dispatch)(yn).setIsLoadingUnscheduledPosts(e,!1)];case 7:return o.sent(),[3,10];case 8:return s=o.sent(),[4,(0,Q.showErrorNotice)(s)];case 9:return o.sent(),[3,10];case 10:return[2]}}))}))}var ur=function(){return ur=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ur.apply(this,arguments)};function cr(e,t){var r,n=lr({dateType:t.dateType,dateValue:t.dateValue,newLocalDay:e,utcDate:null!==(r=t.schedule)&&void 0!==r?r:""}),a=n.utcDate,s=n.dateType,i=n.dateValue;return ur(ur({},t),{dateType:s,dateValue:i,schedule:a})}function lr(e){var t=e.utcDate,r=e.dateType,n=e.dateValue,a=e.newLocalDay;if("exact"===r){var s=(0,D.date)("H:i",t);return{utcDate:(0,D.wpifyDateTime)("c",a,s),dateType:r,dateValue:a}}var i=(0,D.date)("Y-m-d",t),o=w()("".concat(i,"T12:00:00.000Z")),u=w()("".concat(a,"T12:00:00.000Z")).diff(o,"days"),c=("negative-days"===r?-Number.parseInt(n):Number.parseInt(n))+u;return c<0?{utcDate:w()(t).add(u,"days").toISOString(),dateType:"negative-days",dateValue:"".concat(Math.abs(c))}:{utcDate:w()(t).add(u,"days").toISOString(),dateType:"positive-days",dateValue:"".concat(c)}}var dr=function(){return dr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},dr.apply(this,arguments)},fr=function(e,t,r,n){return new(r||(r=Promise))((function(a,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,o)}u((n=n.apply(e,t||[])).next())}))},pr=function(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function hr(e,t){return fr(this,void 0,Promise,(function(){var r,n,a,s,o,u;return pr(this,(function(c){switch(c.label){case 0:if(!(r=(0,i.select)(ne.store).getTask(e)))return[2];if((0,D.date)("Y-m-d",r.dateDue)===t)return[2];c.label=1;case 1:return c.trys.push([1,5,,7]),n=function(e,t){var r=lr({dateType:t.dateType,dateValue:t.dateValue,newLocalDay:e,utcDate:t.dateDue}),n=r.utcDate,a=r.dateType,s=r.dateValue;return ur(ur({},t),{dateType:a,dateValue:s,dateDue:n})}(t,r),[4,vr(n)];case 2:return c.sent(),a=(0,i.select)(ne.store).getSiteId(),s=(0,i.select)(ne.store).getApiRoot(),o=(0,i.select)(ne.store).getAuthenticationToken(),[4,nr({url:"".concat(s,"/site/").concat(a,"/task/").concat(e),method:"PUT",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(o)},data:dr(dr({},n),{baseDatetime:"reschedule"})})];case 3:return[4,Er(c.sent())];case 4:return c.sent(),[3,7];case 5:return u=c.sent(),[4,Tr(r,u)];case 6:return c.sent(),[3,7];case 7:return[2]}}))}))}function yr(e){return fr(this,void 0,Promise,(function(){var t,r,n,a,s;return pr(this,(function(o){switch(o.label){case 0:if(!(t=(0,i.select)(ne.store).getTask(e)))return[2];o.label=1;case 1:return o.trys.push([1,5,,7]),[4,mr(t)];case 2:return o.sent(),r=(0,i.select)(ne.store).getSiteId(),n=(0,i.select)(ne.store).getApiRoot(),a=(0,i.select)(ne.store).getAuthenticationToken(),[4,nr({url:"".concat(n,"/site/").concat(r,"/task/").concat(e),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(a)}})];case 3:return o.sent(),[4,br(t)];case 4:return o.sent(),[3,7];case 5:return s=o.sent(),[4,Tr(t,s)];case 6:return o.sent(),[3,7];case 7:return[2]}}))}))}function gr(e){return fr(this,void 0,Promise,(function(){var t,r,n,a,s,o,u,c;return pr(this,(function(l){switch(l.label){case 0:if(!(t=(0,i.select)(ne.store).getTask(e)))return[2];l.label=1;case 1:return l.trys.push([1,10,,12]),[4,vr(r=dr(dr({},t),{completed:!t.completed}))];case 2:return l.sent(),n=(0,i.select)(ne.store).getSiteId(),a=(0,i.select)(ne.store).getApiRoot(),s=(0,i.select)(ne.store).getAuthenticationToken(),[4,nr({url:"".concat(a,"/site/").concat(n,"/task/").concat(e),method:"PUT",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(s)},data:r})];case 3:if(!(o=l.sent()).completed)return[3,8];l.label=4;case 4:return l.trys.push([4,6,,8]),[4,nr({path:"/nelio-content/v1/notifications/task",method:"POST",data:dr({isNewTask:!1},o)})];case 5:return l.sent(),[3,8];case 6:return u=l.sent(),[4,(0,Q.showErrorNotice)(u)];case 7:return l.sent(),[3,8];case 8:return[4,Er(dr(dr({},t),o))];case 9:return l.sent(),[3,12];case 10:return c=l.sent(),[4,Tr(t,c)];case 11:return l.sent(),[3,12];case 12:return[2]}}))}))}function vr(e){return fr(this,void 0,void 0,(function(){return pr(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(yn).markAsUpdating(Sr(e))];case 1:return t.sent(),[4,(0,i.dispatch)(ne.store).receiveTasks(e)];case 2:return t.sent(),[2]}}))}))}function Er(e){return fr(this,void 0,void 0,(function(){return pr(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(ne.store).receiveTasks(e)];case 1:return t.sent(),[4,(0,i.dispatch)(yn).markAsUpdated(Sr(e))];case 2:return t.sent(),[2]}}))}))}function mr(e){return fr(this,void 0,void 0,(function(){return pr(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(yn).markAsUpdating(Sr(e))];case 1:return t.sent(),[4,(0,i.dispatch)(ne.store).removeTask(e.id)];case 2:return t.sent(),[2]}}))}))}function br(e){return fr(this,void 0,void 0,(function(){return pr(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(yn).markAsUpdated(Sr(e))];case 1:return t.sent(),[2]}}))}))}function Tr(e,t){return fr(this,void 0,void 0,(function(){return pr(this,(function(r){switch(r.label){case 0:return[4,(0,i.dispatch)(ne.store).receiveTasks(e)];case 1:return r.sent(),[4,(0,i.dispatch)(yn).markAsUpdated(Sr(e))];case 2:return r.sent(),[4,(0,Q.showErrorNotice)(t)];case 3:return r.sent(),[2]}}))}))}function Sr(e){return{type:"task",id:e.id,relatedPostId:e.postId}}var Ar=function(){return Ar=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ar.apply(this,arguments)},Pr=function(e,t,r,n){return new(r||(r=Promise))((function(a,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,o)}u((n=n.apply(e,t||[])).next())}))},wr=function(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function Dr(e,t,r,n){return Pr(this,void 0,Promise,(function(){var a,s,o,u,c,l,d,f,p,h,y,g;return wr(this,(function(v){switch(v.label){case 0:if(!(a=(0,i.select)(ne.store).getSocialMessage(e)))return[2];if(s=null!==(g=(0,Q.extractDateTimeValues)(a.schedule))&&void 0!==g?g:{},o=s.dateValue,u=s.timeValue,o===t&&(!r||u===r))return[2];if(c=r?function(e,t,r){var n,a=(null!==(n=(0,Q.extractDateTimeValues)(r.schedule))&&void 0!==n?n:{}).dateValue;return cr(e,r=ur(ur({},r),{timeType:"exact",timeValue:t,schedule:(0,D.wpifyDateTime)("c",null!=a?a:"",t)}))}(t,r,a):cr(t,a),"negative-days"===(l=Ar(Ar({},c),{recurrenceSettings:n?void 0:c.recurrenceSettings})).dateType)return[2];v.label=1;case 1:return v.trys.push([1,5,,7]),[4,Ir(l)];case 2:return v.sent(),d=(0,i.select)(ne.store).getSiteId(),f=(0,i.select)(ne.store).getApiRoot(),p=(0,i.select)(ne.store).getAuthenticationToken(),[4,nr({url:"".concat(f,"/site/").concat(d,"/social/").concat(e),method:"PUT",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(p)},data:Ar(Ar({},l),{baseDatetime:"reschedule"})})];case 3:return h=v.sent(),[4,Or(a,h)];case 4:return v.sent(),[3,7];case 5:return y=v.sent(),[4,Lr(a,y)];case 6:return v.sent(),[3,7];case 7:return[2]}}))}))}function _r(e,t){return Pr(this,void 0,Promise,(function(){var r,n,a,s,o,u;return wr(this,(function(c){switch(c.label){case 0:if(!(r=(0,i.select)(ne.store).getSocialMessage(e)))return[2];c.label=1;case 1:return c.trys.push([1,5,,7]),[4,Nr(r)];case 2:return c.sent(),n=(0,i.select)(ne.store).getSiteId(),a=(0,i.select)(ne.store).getApiRoot(),s=(0,i.select)(ne.store).getAuthenticationToken(),[4,nr({url:"".concat(a,"/site/").concat(n,"/social/").concat(e).concat(t?"/following":""),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(s)}})];case 3:return o=c.sent(),[4,Rr(r,o)];case 4:return c.sent(),[3,7];case 5:return u=c.sent(),[4,Lr(r,u)];case 6:return c.sent(),[3,7];case 7:return[2]}}))}))}function Ir(e){return Pr(this,void 0,void 0,(function(){return wr(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(yn).markAsUpdating(kr(e))];case 1:return t.sent(),[4,(0,i.dispatch)(ne.store).receiveSocialMessages(e)];case 2:return t.sent(),[2]}}))}))}function Or(e,t){return Pr(this,void 0,void 0,(function(){return wr(this,(function(r){switch(r.label){case 0:return[4,(0,i.dispatch)(ne.store).removeRecurringMessages(e.recurrenceGroup)];case 1:return r.sent(),[4,(0,i.dispatch)(ne.store).receiveSocialMessages(t)];case 2:return r.sent(),(0,h.castArray)(t).map(kr).filter((function(e){var t=e.type,r=e.id;return(0,i.select)(yn).isSynching(t,r)})).forEach((0,i.dispatch)(yn).markAsUpdated),[2]}}))}))}function Nr(e){return Pr(this,void 0,void 0,(function(){return wr(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(yn).markAsUpdating(kr(e))];case 1:return t.sent(),[4,(0,i.dispatch)(ne.store).removeSocialMessage(e.id)];case 2:return t.sent(),[2]}}))}))}function Rr(e,t){return Pr(this,void 0,void 0,(function(){return wr(this,(function(r){switch(r.label){case 0:return[4,(0,i.dispatch)(ne.store).removeSocialMessage(e.id)];case 1:return r.sent(),[4,(0,i.dispatch)(ne.store).removeRecurringMessages(e.recurrenceGroup)];case 2:return r.sent(),[4,(0,i.dispatch)(ne.store).receiveSocialMessages(t)];case 3:return r.sent(),[4,(0,i.dispatch)(yn).markAsUpdated(kr(e))];case 4:return r.sent(),[2]}}))}))}function Lr(e,t){return Pr(this,void 0,void 0,(function(){return wr(this,(function(r){switch(r.label){case 0:return[4,(0,i.dispatch)(ne.store).receiveSocialMessages(e)];case 1:return r.sent(),[4,(0,i.dispatch)(yn).markAsUpdated(kr(e))];case 2:return r.sent(),[4,(0,Q.showErrorNotice)(t)];case 3:return r.sent(),[2]}}))}))}function kr(e){return{type:"social",id:e.id,relatedPostId:e.postId,recurrenceGroup:e.recurrenceGroup}}var Cr=function(){return Cr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Cr.apply(this,arguments)},Mr=function(e,t,r,n){return new(r||(r=Promise))((function(a,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,o)}u((n=n.apply(e,t||[])).next())}))},xr=function(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function Ur(e,t,r){return Mr(this,void 0,Promise,(function(){var n,a,s,o,c;return xr(this,(function(l){switch(l.label){case 0:return[4,u(ne.store).getPost(e)];case 1:if(!(n=l.sent()))return[2];if(a=(0,i.select)(ne.store).getDefaultTime("post"),(s=function(e,t,r){return ur(ur({},r),{date:(0,D.wpifyDateTime)("c",e,t)})}(t,r||a,n)).date===n.date)return[2];l.label=2;case 2:return l.trys.push([2,7,,9]),[4,Fr(s)];case 3:return l.sent(),[4,nr({path:(0,ar.addQueryArgs)("/nelio-content/v1/post/".concat(e,"/reschedule"),{day:t,hour:r,defaultHour:a}),method:"PUT"})];case 4:return o=l.sent(),[4,(0,i.dispatch)(ne.store).reloadPostRelatedItems(o.id)];case 5:return l.sent(),[4,jr(o)];case 6:return l.sent(),[3,9];case 7:return c=l.sent(),[4,Wr(n,c)];case 8:return l.sent(),[3,9];case 9:return[2]}}))}))}function Vr(e){return Mr(this,void 0,Promise,(function(){var t,r,n;return xr(this,(function(a){switch(a.label){case 0:return[4,u(ne.store).getPost(e)];case 1:if(!(t=a.sent()))return[2];a.label=2;case 2:return a.trys.push([2,7,,9]),[4,Fr(Cr(Cr({},t),{status:"future"===t.status?"draft":t.status,date:!1}))];case 3:return a.sent(),[4,nr({path:"/nelio-content/v1/post/".concat(e,"/unschedule"),method:"PUT"})];case 4:return r=a.sent(),[4,(0,i.dispatch)(ne.store).reloadPostRelatedItems(r.id)];case 5:return a.sent(),[4,jr(r)];case 6:return a.sent(),[3,9];case 7:return n=a.sent(),[4,Wr(t,n)];case 8:return a.sent(),[3,9];case 9:return[2]}}))}))}function Gr(e){return Mr(this,void 0,Promise,(function(){var t,r;return xr(this,(function(n){switch(n.label){case 0:return[4,u(ne.store).getPost(e)];case 1:if(!(t=n.sent()))return[2];n.label=2;case 2:return n.trys.push([2,7,,9]),[4,Hr(t)];case 3:return n.sent(),[4,nr({path:"/nelio-content/v1/post/".concat(e,"/trash"),method:"PUT"})];case 4:return n.sent(),[4,(0,i.dispatch)(ne.store).reloadPostRelatedItems(t.id)];case 5:return n.sent(),[4,Br(t)];case 6:return n.sent(),[3,9];case 7:return r=n.sent(),[4,Wr(t,r)];case 8:return n.sent(),[3,9];case 9:return[2]}}))}))}function Fr(e){return Mr(this,void 0,void 0,(function(){return xr(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(yn).markAsUpdating(Yr(e))];case 1:return t.sent(),[4,(0,i.dispatch)(ne.store).receivePosts(e)];case 2:return t.sent(),[2]}}))}))}function jr(e){return Mr(this,void 0,void 0,(function(){return xr(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(ne.store).receivePosts(e)];case 1:return t.sent(),[4,(0,i.dispatch)(yn).markAsUpdated(Yr(e))];case 2:return t.sent(),[2]}}))}))}function Hr(e){return Mr(this,void 0,void 0,(function(){return xr(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(yn).markAsUpdating(Yr(e))];case 1:return t.sent(),[4,(0,i.dispatch)(ne.store).removePost(e.id)];case 2:return t.sent(),[2]}}))}))}function Br(e){return Mr(this,void 0,void 0,(function(){return xr(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(yn).markAsUpdated(Yr(e))];case 1:return t.sent(),[2]}}))}))}function Wr(e,t){return Mr(this,void 0,void 0,(function(){return xr(this,(function(r){switch(r.label){case 0:return[4,(0,i.dispatch)(yn).markAsUpdated(Yr(e))];case 1:return r.sent(),[4,(0,i.dispatch)(ne.store).receivePosts(e)];case 2:return r.sent(),[4,(0,Q.showErrorNotice)(t)];case 3:return r.sent(),[2]}}))}))}function Yr(e){return{type:"post",id:e.id,relatedPostId:e.id}}var Qr=function(e,t,r,n){return new(r||(r=Promise))((function(a,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,o)}u((n=n.apply(e,t||[])).next())}))},Kr=function(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function qr(e){return Qr(this,void 0,Promise,(function(){var t,r;return Kr(this,(function(n){switch(n.label){case 0:return[4,(0,i.dispatch)(yn).markAsSaving(!0)];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,7,,9]),[4,nr({path:"/nelio-content/v1/external-calendars/",method:"POST",data:{url:e}})];case 3:return t=n.sent(),[4,(0,i.dispatch)(yn).receiveExternalCalendars(t)];case 4:return n.sent(),[4,u(ne.store).getExternalEvents(t.url)];case 5:return n.sent(),[4,(0,i.dispatch)(yn).closeExternalCalendarEditor()];case 6:return n.sent(),[3,9];case 7:return r=n.sent(),[4,(0,Q.showErrorNotice)(r)];case 8:return n.sent(),[3,9];case 9:return[4,(0,i.dispatch)(yn).markAsSaving(!1)];case 10:return n.sent(),[2]}}))}))}function Xr(e){return Qr(this,arguments,Promise,(function(e){var t,r,n=e.url,a=e.name;return Kr(this,(function(e){switch(e.label){case 0:return[4,(0,i.dispatch)(yn).markAsSaving(!0)];case 1:e.sent(),e.label=2;case 2:return e.trys.push([2,5,,7]),[4,nr({path:"/nelio-content/v1/external-calendars/",method:"PUT",data:{url:n,name:a}})];case 3:return t=e.sent(),[4,(0,i.dispatch)(yn).receiveExternalCalendars(t)];case 4:return e.sent(),[3,7];case 5:return r=e.sent(),[4,(0,Q.showErrorNotice)(r)];case 6:return e.sent(),[3,7];case 7:return[4,(0,i.dispatch)(yn).closeExternalCalendarEditor()];case 8:return e.sent(),[4,(0,i.dispatch)(yn).markAsSaving(!1)];case 9:return e.sent(),[2]}}))}))}function zr(e){return Qr(this,void 0,Promise,(function(){var t,r;return Kr(this,(function(n){switch(n.label){case 0:return[4,(0,i.dispatch)(yn).markAsDeleting(e,!0)];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,8,,10]),[4,nr({path:(0,ar.addQueryArgs)("/nelio-content/v1/external-calendars/",{url:e}),method:"DELETE"})];case 3:return n.sent(),[4,(0,i.dispatch)(yn).removeExternalCalendar(e)];case 4:return n.sent(),[4,u(ne.store).getExternalEvents(e)];case 5:return t=n.sent(),[4,(0,i.dispatch)(ne.store).invalidateResolution("getExternalEvents",[e])];case 6:return n.sent(),[4,(0,i.dispatch)(ne.store).removeExternalEvents(t.map((function(e){return e.id})))];case 7:return n.sent(),[3,10];case 8:return r=n.sent(),[4,(0,Q.showErrorNotice)(r)];case 9:return n.sent(),[3,10];case 10:return[4,(0,i.dispatch)(yn).markAsDeleting(e,!1)];case 11:return n.sent(),[2]}}))}))}var Zr=function(e,t,r,n){return new(r||(r=Promise))((function(a,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,o)}u((n=n.apply(e,t||[])).next())}))},$r=function(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function Jr(){return Zr(this,arguments,Promise,(function(e){var t,r;return void 0===e&&(e=500),$r(this,(function(n){switch(n.label){case 0:return t=(0,i.select)(ne.store).getToday(),[4,(0,i.dispatch)(yn).setFocusDay(t)];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,4,,6]),[4,(0,i.dispatch)(yn).loadItemsIn(e)];case 3:return n.sent(),[3,6];case 4:return r=n.sent(),[4,(0,Q.showErrorNotice)(r)];case 5:return n.sent(),[3,6];case 6:return[2]}}))}))}function en(){return Zr(this,arguments,Promise,(function(e){var t,r,n,a,s,o;return void 0===e&&(e=500),$r(this,(function(u){switch(u.label){case 0:return t=(0,i.select)(yn).getCalendarMode(),r=(0,i.select)(yn).getFocusDay(),n=w()((0,D.wpifyDateTime)("c",r,"12:00")),a=n.clone(),"month"===t?a.date(1).add(1,"month"):(s=(0,i.select)(yn).getNumberOfVisibleDays(),a.add(s,"days")),[4,(0,i.dispatch)(yn).setFocusDay((0,D.date)("Y-m-d",a))];case 1:u.sent(),u.label=2;case 2:return u.trys.push([2,4,,6]),[4,(0,i.dispatch)(yn).loadItemsIn(e)];case 3:return u.sent(),[3,6];case 4:return o=u.sent(),[4,(0,Q.showErrorNotice)(o)];case 5:return u.sent(),[3,6];case 6:return[2]}}))}))}function tn(){return Zr(this,arguments,Promise,(function(e){var t,r,n,a,s,o;return void 0===e&&(e=500),$r(this,(function(u){switch(u.label){case 0:return t=(0,i.select)(yn).getCalendarMode(),r=(0,i.select)(yn).getFocusDay(),n=w()((0,D.wpifyDateTime)("c",r,"12:00")),a=n.clone(),"month"===t?a.date(1).subtract(1,"month"):(s=(0,i.select)(yn).getNumberOfVisibleDays(),a.subtract(s,"days")),[4,(0,i.dispatch)(yn).setFocusDay((0,D.date)("Y-m-d",a))];case 1:u.sent(),u.label=2;case 2:return u.trys.push([2,4,,6]),[4,(0,i.dispatch)(yn).loadItemsIn(e)];case 3:return u.sent(),[3,6];case 4:return o=u.sent(),[4,(0,Q.showErrorNotice)(o)];case 5:return u.sent(),[3,6];case 6:return[2]}}))}))}function rn(e){return Zr(this,arguments,Promise,(function(e,t){var r;return void 0===t&&(t=500),$r(this,(function(n){switch(n.label){case 0:return[4,(0,i.dispatch)(yn)._setCalendarMode(e)];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,4,,6]),[4,(0,i.dispatch)(yn).loadItemsIn(t)];case 3:return n.sent(),[3,6];case 4:return r=n.sent(),[4,(0,Q.showErrorNotice)(r)];case 5:return n.sent(),[3,6];case 6:return[2]}}))}))}const nn=window.wp.hooks;var an=function(e,t,r,n){return new(r||(r=Promise))((function(a,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,o)}u((n=n.apply(e,t||[])).next())}))},sn=function(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function on(){return an(this,void 0,Promise,(function(){var e;return sn(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,4]),[4,un(0)];case 1:case 3:return t.sent(),[3,4];case 2:return e=t.sent(),[4,(0,Q.showErrorNotice)(e)];case 4:return[2]}}))}))}function un(e){return an(this,void 0,Promise,(function(){var t,r,n;return sn(this,(function(a){switch(a.label){case 0:if((t=(0,i.select)(yn).getLoaderTimeout())&&clearTimeout(t),e)return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,cn()];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),[4,(0,Q.showErrorNotice)(r)];case 4:return a.sent(),[3,5];case 5:return[2];case 6:return n=setTimeout((function(){(0,i.dispatch)(yn).loadItemsNow()}),e),[4,(0,i.dispatch)(yn).setLoaderTimeout(n)];case 7:return a.sent(),[2]}}))}))}function cn(){return an(this,void 0,void 0,(function(){var e,t,r,n,a,s;return sn(this,(function(o){switch(o.label){case 0:return[4,(0,i.dispatch)(yn).setLoaderTimeout(0)];case 1:return o.sent(),e=(0,i.select)(ne.store).getFirstDayOfWeek(),t=(0,i.select)(yn).getFirstDay(e),r=(0,i.select)(yn).getLastDay(e),[4,(0,i.dispatch)(yn).markPeriodAsLoading(t,r)];case 2:return o.sent(),(0,i.select)(yn).isPeriodReady(t,r)?[4,(0,i.dispatch)(yn).markPeriodAsLoaded(t,r)]:[3,4];case 3:return o.sent(),[2];case 4:n=(0,D.date)("Y-m-d",w()(t).add(-2,"days")),a=(0,D.date)("Y-m-d",w()(r).add(2,"days")),o.label=5;case 5:return o.trys.push([5,8,,10]),[4,Promise.all([ln(n,a),fn(n,a),pn(n,a),dn(n,a)])];case 6:return o.sent(),[4,(0,i.dispatch)(yn).markPeriodAsLoaded(t,r)];case 7:return o.sent(),[3,10];case 8:return s=o.sent(),[4,(0,i.dispatch)(yn).markPeriodAsLoaded(t,r)];case 9:throw o.sent(),s;case 10:return[2]}}))}))}function ln(e,t){return an(this,void 0,void 0,(function(){var r,n;return sn(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),r=(0,i.select)(ne.store).getPostTypes("calendar").map((function(e){return e.name})),[4,nr({path:(0,ar.addQueryArgs)("/nelio-content/v1/calendar/posts",{from:e,to:t,type:r.join(",")}),method:"GET"})];case 1:return n=a.sent(),[4,(0,i.dispatch)(ne.store).receivePosts(n)];case 2:return a.sent(),[3,4];case 3:throw a.sent();case 4:return[2]}}))}))}function dn(e,t){return an(this,void 0,void 0,(function(){return sn(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Promise.all((0,nn.applyFilters)("nelio-content_data_loadPremiumItemsInPeriod",[new Promise((function(e){return e()}))],e,t))];case 1:return r.sent(),[3,3];case 2:throw r.sent();case 3:return[2]}}))}))}function fn(e,t,r){return an(this,void 0,void 0,(function(){var n,a,s,o;return sn(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),n=(0,i.select)(ne.store).getSiteId(),a=(0,i.select)(ne.store).getApiRoot(),s=(0,i.select)(ne.store).getAuthenticationToken(),[4,nr({url:(0,ar.addQueryArgs)("".concat(a,"/site/").concat(n,"/calendar/messages"),{from:e,to:t,page:r}),method:"GET",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(s)}})];case 1:return o=u.sent(),(0,Q.isEmpty)(o.messages)?[2]:[4,(0,i.dispatch)(ne.store).receiveSocialMessages(o.messages)];case 2:return u.sent(),[4,(0,i.dispatch)(ne.store).markSocialPublicationAsPaused(o.isMessagePublicationPaused)];case 3:return u.sent(),o.page?[4,fn(e,t,o.page)]:[3,5];case 4:u.sent(),u.label=5;case 5:return[3,7];case 6:throw u.sent();case 7:return[2]}}))}))}function pn(e,t,r){return an(this,void 0,void 0,(function(){var n,a,s,o;return sn(this,(function(u){switch(u.label){case 0:return u.trys.push([0,5,,6]),n=(0,i.select)(ne.store).getSiteId(),a=(0,i.select)(ne.store).getApiRoot(),s=(0,i.select)(ne.store).getAuthenticationToken(),[4,nr({url:(0,ar.addQueryArgs)("".concat(a,"/site/").concat(n,"/calendar/tasks"),{from:e,to:t,page:r}),method:"GET",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(s)}})];case 1:return o=u.sent(),(0,Q.isEmpty)(o.tasks)?[2]:[4,(0,i.dispatch)(ne.store).receiveTasks(o.tasks)];case 2:return u.sent(),o.page?[4,pn(e,t,o.page)]:[3,4];case 3:u.sent(),u.label=4;case 4:return[3,6];case 5:throw u.sent();case 6:return[2]}}))}))}var hn=function(){return hn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},hn.apply(this,arguments)},yn=(0,i.createReduxStore)("nelio-content/calendar",{reducer:k,controls:i.controls,actions:hn(hn({},n),a),selectors:r});!function(e){(0,i.register)(e)}(yn);const gn=window.wp.i18n,vn={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var En,mn=new Uint8Array(16);function bn(){if(!En&&!(En="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return En(mn)}for(var Tn=[],Sn=0;Sn<256;++Sn)Tn.push((Sn+256).toString(16).slice(1));const An=function(e,t,r){if(vn.randomUUID&&!t&&!e)return vn.randomUUID();var n=(e=e||{}).random||(e.rng||bn)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var a=0;a<16;++a)t[r+a]=n[a];return t}return function(e,t=0){return(Tn[e[t+0]]+Tn[e[t+1]]+Tn[e[t+2]]+Tn[e[t+3]]+"-"+Tn[e[t+4]]+Tn[e[t+5]]+"-"+Tn[e[t+6]]+Tn[e[t+7]]+"-"+Tn[e[t+8]]+Tn[e[t+9]]+"-"+Tn[e[t+10]]+Tn[e[t+11]]+Tn[e[t+12]]+Tn[e[t+13]]+Tn[e[t+14]]+Tn[e[t+15]]).toLowerCase()}(n)},Pn=window.NelioContent.postQuickEditor,wn=window.NelioContent.socialMessageEditor,Dn=window.NelioContent.taskEditor;var In=function(){return In=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},In.apply(this,arguments)},On=function(e,t){return o((function(r){switch(e){case"post":return r(ne.store).getPost(t);case"social":return r(ne.store).getSocialMessage(t);case"task":return r(ne.store).getTask(t);case"external-event":case"internal-event":return;default:return r(ne.store).getPremiumItem(e,t)}}))},Nn=function(){return o((function(e){return e(yn).getDraggingItem()}))},Rn=function(){return o((function(e){return e(yn).getHoverItem()}))},Ln=function(e){return o((function(t){return t(ne.store).getDefaultTime(e)}))},kn=function(e){return o((function(t){var r=t(ne.store).getToday();return e<r?"past-day":e===r?"today":"future-day"}))},Cn=function(e){var t=o((function(t){return t(yn).areSocialMessagesCollapsedInDay(e)})),r=(0,i.useDispatch)(yn).collapseSocialMessagesInDay;return[t,function(t){return r(t,e)}]},Mn=function(e){var t=ta(e);return o((function(e){var r=e(yn).getNumberOfNonCollapsableMessages,n=(0,h.filter)(t,{type:"social"}),a=r();return Math.max(0,n.length-a)}))},xn=function(e){var t=ta(e),r=kn(e),n=Mn(e);return o((function(a){if(!(0,a(yn).areSocialMessagesCollapsedInDay)(e))return t;var s=(0,h.filter)(t,ra),i=s.length-n;if(!n)return t;var o=a(ne.store).getSocialMessage,u=(0,h.filter)(s,(function(e){var t,n=e.id;return"past-day"!==r||!!(null===(t=o(n))||void 0===t?void 0:t.sent)})),c=(0,h.map)((0,h.drop)(u,i),"id");return(0,h.filter)(t,(function(e){var t=e.id;return"social"!==e.type||!c.includes(t)}))}))},Un=function(e,t){var r=On(e,t);if(!r)return Jn;if("post"===e&&!na(r))return Jn;var n=(0,Q.isFreeItemType)(e)?(0,Q.createItemSummary)(e,r):(0,Q.createPremiumItemSummary)(e,r);return n?{onMouseEnter:function(){return ea(n)},onMouseLeave:function(){return ea()}}:Jn},Vn=function(e){var t=(0,i.useDispatch)(yn),r=t.dragEnd,n=t.dragStart;return e?{onDragStart:function(){n(e)},onDragEnd:function(){r()}}:aa},Gn=function(e,t){return o((function(r){if(r(ne.store),e&&t){var n=r(ne.store).getPostStatuses(e);return(0,h.find)(n,{slug:t})}}))},Fn=function(){return o((function(e){var t=(0,gn._x)("Add New Post","command","nelio-content"),r=(0,e(ne.store).getPostTypes)("calendar");return 1===r.length&&r[0]&&r[0].labels.new||t}))},jn=function(){return o((function(e){return e(ne.store).canCurrentUserCreatePosts()}))},Hn=function(){return o((function(e){return e(ne.store).canCurrentUserCreateMessagesAlways()}))},Bn=function(){return o((function(e){return e(ne.store).canCurrentUserCreateTasksAlways()}))},Wn=function(e,t){var r=(0,i.useDispatch)(Pn.store).openNewPostEditor;return function(){return r("calendar",{dateValue:e,timeValue:t})}},Yn=function(e,t){var r=e===Kn(),n=Hn(),a=(0,ne.useFeatureGuard)("calendar/create-messages",n),s=(0,i.useDispatch)(wn.store).openNewSocialMessageEditor;return a((function(){return s({dateType:r?"predefined-offset":"exact",dateValue:r?"0":e,timeType:r?"predefined-offset":"exact",timeValue:r?"0":t},{context:"calendar"})}))},Qn=function(e){var t=Bn(),r=(0,ne.useFeatureGuard)("calendar/create-tasks",t),n=(0,i.useDispatch)(Dn.store).openNewTaskEditor;return r((function(){return n({dateType:"exact",dateValue:e},{post:void 0,context:"calendar"})}))},Kn=function(){return o((function(e){return e(ne.store).getToday()}))},qn=function(e,t){var r=(0,i.useDispatch)(yn),n=r.dragEnd,a=r.reschedulePost,s=r.rescheduleSocialMessage,o=r.requestRecurringRescheduleMode,u=r.rescheduleTask,c=(0,ne.useFeatureGuard)("calendar/schedule-reusable-messages"),l=function(r){if("reusable-message"===r.type)return c((function(){return function(e,t,r){return n=this,a=void 0,o=function(){var n,a,s,o,u,c,l,d,f,p,h;return function(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}(this,(function(y){switch(y.label){case 0:return(n=(0,i.select)(ne.store).getReusableMessage(e))?(a={dateType:"exact",dateValue:t,timeType:"exact",timeValue:"exact"===n.timeType?n.timeValue:sa(n.timeValue,r)},s=In(In(In(In({},(0,Q.createSocialMessage)()),n),a),{id:An(),schedule:(0,Q.getSocialMessageSchedule)(In({baseDatetime:"now"},a))}),o=(0,Q.createItemSummary)("social",s),[4,(0,i.dispatch)(ne.store).receiveSocialMessages(s)]):[2];case 1:return y.sent(),[4,(0,i.dispatch)(yn).markAsUpdating(o)];case 2:y.sent(),y.label=3;case 3:return y.trys.push([3,6,,9]),u=(0,i.select)(ne.store).getSiteId(),c=(0,i.select)(ne.store).getApiRoot(),l=(0,i.select)(ne.store).getAuthenticationToken(),d=(0,i.select)(ne.store).getSiteTimezone(),[4,nr({url:"".concat(c,"/site/").concat(u,"/social"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(l)},data:In(In({},s),{baseDatetime:"now",timezone:d,slots:[{id:s.id,profileId:s.profileId,targetName:null!==(h=s.targetName)&&void 0!==h?h:"default",network:s.network,type:s.type}]})})];case 4:return f=y.sent(),[4,(0,i.dispatch)(ne.store).receiveSocialMessages(f)];case 5:return y.sent(),[3,9];case 6:return p=y.sent(),[4,(0,i.dispatch)(ne.store).removeSocialMessage(s.id)];case 7:return y.sent(),[4,(0,Q.showErrorNotice)(p)];case 8:return y.sent(),[3,9];case 9:return[4,(0,i.dispatch)(yn).markAsUpdated(o)];case 10:return y.sent(),[2]}}))},new((s=void 0)||(s=Promise))((function(e,t){function r(e){try{u(o.next(e))}catch(e){t(e)}}function i(e){try{u(o.throw(e))}catch(e){t(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(r,i)}u((o=o.apply(n,a||[])).next())}));var n,a,s,o}(r.id,e,t)}))();var n=r.id,l=r.type,d=(0,i.select)(ne.store).getItem(l,n);if(d){var f=t?function(e,t,r){if("task"===e)return"";var n=(0,Q.extractDateTimeValues)("post"===e?t.date:t.schedule);if(!n)return"";var a=n.timeValue,s=Number.parseInt(a.substring(0,2)),i=Number.parseInt(a.substring(3,5)),o=s%4+r;return(0,h.padStart)("".concat(o),2,"0")+":"+(0,h.padStart)("".concat(i),2,"0")}(l,d,t):void 0;switch(l){case"post":return a(n,e,f);case"social":var p=(0,i.select)(ne.store).getSocialMessage(n);return(0,Q.isRecurringMessage)(p)&&!(0,Q.isRecurringSource)(p)?o({id:n,day:e,hour:f}):s(n,e,f);case"task":return u(n,e)}}};return function(e){return n(),l(e),e}},Xn=function(){return o((function(e){return e(yn).getMinimumRowHeight()}))},zn=function(){return o((function(e){var t=e(ne.store).getFirstDayOfWeek();return e(yn).getFirstDay(t)}))},Zn=function(){return o((function(e){return e(yn).getNumberOfVisibleDays()}))},$n=function(){var e=ia();return o((function(t){var r=t(yn),n=r.getDraggingItem,a=r.getSidePane,s=n(),i=a();if("none"!==i)switch(null==s?void 0:s.type){case"post":return"unscheduled-posts";case"reusable-message":return"reusable-messages"}return"none"===i&&e?"subscribe-banner":i}))},Jn={onMouseEnter:function(){},onMouseLeave:function(){}},ea=(0,h.debounce)((0,i.dispatch)(yn).setHoverItem,200),ta=function(e){return o((function(t){var r=t(ne.store),n=r.getItem,a=r.getItemsInDay,s=t(yn).isItemVisible;return(0,h.filter)(a(e),(function(e){var t=e.id,r=e.type,a=n(r,t);return!!a&&s(r,a)}))}))},ra=function(e){return"social"===e.type},na=function(e){return!!e.date},aa={onDragStart:function(){},onDragEnd:function(){}};function sa(e,t){var r=function(e){return e<10?"0".concat(e):e},n=r(Math.floor(60*Math.random()));if(t)return"".concat(r(t),":").concat(n);switch(t=Math.floor(4*Math.random()),e){case"morning":return"".concat(r(t+8),":").concat(n);case"noon":return"".concat(r(t+12),":").concat(n);case"afternoon":return"".concat(r(t+16),":").concat(n);case"night":return"".concat(r(t+20),":").concat(n);default:return"10:".concat(n)}}var ia=function(){return o((function(e){return!e(ne.store).isSubscribed()&&1200<=e(yn).getCalendarWidth()}))}})();var r=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var n in t)r[n]=t[n];t.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})();