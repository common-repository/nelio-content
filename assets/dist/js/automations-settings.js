(()=>{var e,t={9208:(e,t,n)=>{"use strict";n.r(t),n.d(t,{initPage:()=>Ta});var o={};n.r(o),n.d(o,{areAuthorsValid:()=>j,getAutomationGroup:()=>x,getAutomationGroups:()=>b,getCustomFields:()=>R,getCustomPlaceholders:()=>Z,getEditingTemplate:()=>A,getEditingTemplateErrors:()=>C,getEditingTemplateType:()=>P,getGroupTermsValidation:()=>M,getImportExportData:()=>q,getNetworkAutomationSettings:()=>k,getProfileAutomationSettings:()=>E,getProfileError:()=>U,getProfileFrequencies:()=>O,getTemplateErrors:()=>V,isDirty:()=>w,isEditingNetworkTemplate:()=>N,isEditingNewTemplate:()=>I,isEditingTemplate:()=>S,isGroupValid:()=>D,isPostTypeValid:()=>G,isSaving:()=>T,isTemplateValid:()=>L});var r={};n.r(r),n.d(r,{addAutomationGroup:()=>B,addProfileSettings:()=>z,closeTemplateEditor:()=>W,closeTemplateImportExport:()=>K,deleteAutomationGroup:()=>H,deleteAutomationGroupTemplate:()=>J,initAutomationGroups:()=>Y,markAsNetworkTemplate:()=>ie,markAsSaving:()=>ae,openTemplateEditor:()=>X,openTemplateExporter:()=>ee,openTemplateImporter:()=>Q,receiveAutomationGroupTemplates:()=>te,receiveCustomFields:()=>ne,receiveCustomPlaceholders:()=>oe,setAutomationGroupValidation:()=>se,setEditingTemplateAttributes:()=>le,setEditingTemplateErrors:()=>ue,setProfileFrequencies:()=>re,updateAutomationGroup:()=>F});var i={};n.r(i),n.d(i,{saveAutomationGroups:()=>ge});var a={};n.r(a),n.d(a,{getCustomFields:()=>Ie,getCustomPlaceholders:()=>Ne});const s=window.wp.element;function l(e,t){t&&(s.createRoot?(0,s.createRoot)(t).render(e):(0,s.render)(e,t))}const u=window.wp.i18n,c=window.NelioContent.components,d=window.wp.data;function p(e,t){return(0,d.useSelect)(e,t)}const m=window.lodash,f=window.NelioContent.utils;var h={automationGroups:{byId:{universal:{id:"universal",priority:100,publication:{type:"always"},profileSettings:{},networkSettings:{}}},allIds:["universal"]},validations:{universal:{areAuthorsValid:!0,areTermsValid:{},isPostTypeValid:!0,socialProfileErrors:{},templateErrors:{}}},frequencies:{},isSaving:!1,templateEditor:{attributes:void 0,isNew:!1,isNetwork:!1,customFields:{},customPlaceholders:{},errors:{author:!1,target:!1,content:!1,availability:!1,taxonomies:{}}},templateImportExport:void 0},v=function(){return v=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},v.apply(this,arguments)},g=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))};function y(e,t){return(0,m.isEqual)((0,m.omit)((0,m.omitBy)(e,m.isNil),["groupId","id","creatorId"]),(0,m.omit)((0,m.omitBy)(t,m.isNil),["groupId","id","creatorId"]))}function _(e){var t=e.automationGroups.byId;return v(v({},e),{automationGroups:v(v({},e.automationGroups),{byId:v({universal:(0,f.fixAttributesInGroup)(t.universal)},(0,m.mapValues)((0,m.omit)(t,"universal"),f.fixAttributesInGroup))})})}function b(e){return e.automationGroups.allIds}function x(e,t){return e.automationGroups.byId[t]}function E(e,t,n){var o;return(0,m.find)(null===(o=x(e,t))||void 0===o?void 0:o.profileSettings,{profileId:n})}function k(e,t,n){var o;return(0,m.find)(null===(o=x(e,t))||void 0===o?void 0:o.networkSettings,{name:n})}function w(e,t,n){var o=(0,m.values)(e.automationGroups.byId),r=t;return n.some((function(t){var n=e.frequencies[t.id];return(null==n?void 0:n.publication)!==Math.max(1,t.publicationFrequency)||(null==n?void 0:n.reshare)!==Math.max(1,t.reshareFrequency)}))||JSON.stringify(o)!==JSON.stringify(r)}function T(e){return!!e.isSaving}function S(e){return!!e.templateEditor.attributes}function I(e){return S(e)&&e.templateEditor.isNew}function N(e){return S(e)&&e.templateEditor.isNetwork}function A(e){var t=e.templateEditor.attributes;return t?(0,m.omit)(t,"type"):void 0}function C(e){return e.templateEditor.errors}function P(e){var t;return(null===(t=e.templateEditor.attributes)||void 0===t?void 0:t.type)||"publication"}function O(e,t){return e.frequencies[t]}function R(e){return e.templateEditor.customFields}function Z(e){return e.templateEditor.customPlaceholders}function G(e,t){var n,o;return null===(o=null===(n=e.validations[t])||void 0===n?void 0:n.isPostTypeValid)||void 0===o||o}function j(e,t){var n,o;return null===(o=null===(n=e.validations[t])||void 0===n?void 0:n.areAuthorsValid)||void 0===o||o}function M(e,t){var n;return(null===(n=e.validations[t])||void 0===n?void 0:n.areTermsValid)||{}}function D(e,t){var n,o=(0,m.values)(M(e,t)).every(Boolean);return G(e,t)&&j(e,t)&&o&&(0,m.keys)(null===(n=x(e,t))||void 0===n?void 0:n.profileSettings).every((function(n){return!U(e,t,n)}))}function U(e,t,n){var o,r=null===(o=e.validations[t])||void 0===o?void 0:o.socialProfileErrors[n];if(r)return r;var i=E(e,t,n);if(!i)return!1;var a=k(e,t,i.network),s=function(n){return!n||function(e){return"enabled"in e&&!e.enabled}(n)||(0,m.map)(n.templates,"id").every((function(n){return L(e,t,n)}))};return s(i.publication)&&s(null==a?void 0:a.publication)?(!s(i.reshare)||!s(null==a?void 0:a.reshare))&&(0,u._x)("Please review reshare templates","text","nelio-content"):(0,u._x)("Please review publication templates","user","nelio-content")}function L(e,t,n){var o,r=null===(o=e.validations[t])||void 0===o?void 0:o.templateErrors[n];return(0,m.keys)((0,m.omit)(r,"taxonomies")).every((function(e){return!(null==r?void 0:r[e])}))&&(0,m.keys)(null==r?void 0:r.taxonomies).every((function(e){return!(null==r?void 0:r.taxonomies[e])}))}function V(e,t,n){var o;return null===(o=e.validations[t])||void 0===o?void 0:o.templateErrors[n]}function q(e){return e.templateImportExport}var $=function(){return $=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},$.apply(this,arguments)};function B(e){return{type:"ADD_AUTOMATION_GROUP",group:e}}function F(e,t){return{type:"UPDATE_AUTOMATION_GROUP",groupId:e,attrs:t}}function z(e,t){return{type:"ADD_PROFILE_SETTINGS",groupId:e,settings:t}}function W(){return{type:"CLOSE_TEMPLATE_EDITOR"}}function K(){return{type:"CLOSE_TEMPLATE_IMPORT_EXPORT"}}function H(e){return{type:"DELETE_AUTOMATION_GROUP",groupId:e}}function J(e){return{type:"DELETE_AUTOMATION_GROUP_TEMPLATE",template:e}}function Y(e,t){return{type:"INIT_AUTOMATION_GROUPS",automationGroups:e,profiles:t}}function X(e,t,n){return{type:"OPEN_TEMPLATE_EDITOR",template:$($({},t),{type:e}),isNew:"new"===n}}function Q(e,t,n){return{type:"OPEN_TEMPLATE_IMPORTER",groupId:e,profileId:t,templateType:n}}function ee(e){return{type:"OPEN_TEMPLATE_EXPORTER",templates:(0,m.castArray)(e)}}function te(e,t){return{type:"RECEIVE_AUTOMATION_GROUP_TEMPLATES",templateType:e,templates:(0,m.castArray)(t)}}function ne(e){return{type:"RECEIVE_CUSTOM_FIELDS",customFields:e}}function oe(e){return{type:"RECEIVE_CUSTOM_PLACEHOLDERS",customPlaceholders:e}}function re(e,t){return{type:"SET_PROFILE_FREQUENCIES",profileId:e,frequencies:t}}function ie(e){return{type:"MARK_AS_NETWORK_TEMPLATE",isNetwork:e}}function ae(e){return{type:"MARK_AS_SAVING",isSaving:e}}function se(e,t){return{type:"SET_AUTOMATION_GROUP_VALIDATION",groupId:e,validation:t}}function le(e){return{type:"SET_EDITING_TEMPLATE_ATTRIBUTES",attributes:e}}function ue(e){return{type:"SET_EDITING_TEMPLATE_ERRORS",errors:e}}const ce=window.wp.apiFetch,de=n.n(ce)(),pe=window.wp.coreData,me=window.NelioContent.data;var fe=function(){return fe=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},fe.apply(this,arguments)},he=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((o=o.apply(e,t||[])).next())}))},ve=function(e,t){var n,o,r,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};function ge(){return he(this,void 0,Promise,(function(){var e,t,n,o,r,i,a,s,l,u;return ve(this,(function(c){switch(c.label){case 0:return[4,(0,d.dispatch)(Pe).markAsSaving(!0)];case 1:return c.sent(),e=(0,d.select)(Pe),t=e.getAutomationGroup,n=e.getAutomationGroups,[4,Promise.all(n().map(t).filter(f.isDefined).map(be))];case 2:o=c.sent(),c.label=3;case 3:return c.trys.push([3,8,,10]),r=(0,d.select)(me.store).getSiteId(),i=(0,d.select)(me.store).getApiRoot(),a=(0,d.select)(me.store).getAuthenticationToken(),[4,ye()];case 4:return s=c.sent(),[4,de({url:"".concat(i,"/site/").concat(r,"/automation-groups"),method:"PUT",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(a)},data:o})];case 5:return l=c.sent(),[4,(0,d.dispatch)(Pe).initAutomationGroups(l,s)];case 6:return c.sent(),[4,(0,d.dispatch)(me.store).resetAutomationGroups(l)];case 7:return c.sent(),[3,10];case 8:return u=c.sent(),[4,(0,f.showErrorNotice)(u)];case 9:return c.sent(),[3,10];case 10:return[4,(0,d.dispatch)(Pe).markAsSaving(!1)];case 11:return c.sent(),[2]}}))}))}var ye=function(){return he(void 0,void 0,Promise,(function(){return ve(this,(function(e){return[2,Promise.all((0,d.select)(me.store).getSocialProfiles().map((function(e){return he(void 0,void 0,void 0,(function(){var t,n,o,r,i;return ve(this,(function(a){switch(a.label){case 0:return _e(e)&&(t=(0,d.select)(Pe).getProfileFrequencies(e.id))?(n=(0,d.select)(me.store).getSiteId(),o=(0,d.select)(me.store).getApiRoot(),r=(0,d.select)(me.store).getAuthenticationToken(),[4,de({url:"".concat(o,"/site/").concat(n,"/profile/").concat(e.id),method:"PUT",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)},data:{publicationFrequency:t.publication,reshareFrequency:t.reshare}})]):[2,e];case 1:return i=a.sent(),[4,(0,d.dispatch)(me.store).receiveSocialProfiles(i)];case 2:return a.sent(),[2,i]}}))}))})))]}))}))},_e=function(e){var t=(0,d.select)(Pe).getProfileFrequencies(e.id);return(null==t?void 0:t.publication)!==e.publicationFrequency||(null==t?void 0:t.reshare)!==e.reshareFrequency},be=function(e){return he(void 0,void 0,Promise,(function(){var t,n,o;return ve(this,(function(r){switch(r.label){case 0:return(0,f.isUniversalGroup)(e)?[2,e]:[4,we(e.postType)];case 1:return t=r.sent(),n=ke(e.postType),o=xe({taxonomies:t,supportsAuthors:n}),[2,fe(fe({},e),{authors:!1===n?[]:e.authors,taxonomies:(0,m.pick)(e.taxonomies,t),profileSettings:(0,m.mapValues)(e.profileSettings,o),networkSettings:(0,m.pickBy)((0,m.mapValues)(e.networkSettings,o),(function(e){return!(!e||!e.publication.templates.length&&!e.reshare.templates.length)}))})]}}))}))},xe=function(e){return function(t){var n=Ee(e);return fe(fe({},t),{publication:fe(fe({},t.publication),{templates:(0,m.map)(t.publication.templates,n)}),reshare:fe(fe({},t.reshare),{templates:(0,m.map)(t.reshare.templates,n)})})}},Ee=function(e){return function(t){return fe(fe({},t),{author:!1===e.supportsAuthors?void 0:t.author,taxonomies:(0,m.pick)(t.taxonomies,e.taxonomies)})}},ke=function(e){var t;return null===(t=(0,d.select)(me.store).getPostType(e))||void 0===t?void 0:t.supports.author},we=function(e){return he(void 0,void 0,Promise,(function(){var t;return ve(this,(function(n){switch(n.label){case 0:return[4,(0,(o=pe.store,(0,d.resolveSelect)(o)).getEntityRecords)("root","taxonomy",{per_page:-1})];case 1:return t=n.sent(),[2,(0,m.castArray)(t).filter((function(e){return!!e})).filter((function(t){return t.types.includes(e)})).map((function(e){return e.slug}))]}var o}))}))},Te=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((o=o.apply(e,t||[])).next())}))},Se=function(e,t){var n,o,r,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};function Ie(){return Te(this,void 0,Promise,(function(){var e;return Se(this,(function(t){switch(t.label){case 0:return[4,de({path:"/nelio-content/v1/custom-fields"})];case 1:return e=t.sent(),[4,(0,d.dispatch)(Pe).receiveCustomFields(e)];case 2:return t.sent(),[2]}}))}))}function Ne(){return Te(this,void 0,Promise,(function(){var e;return Se(this,(function(t){switch(t.label){case 0:return[4,de({path:"/nelio-content/v1/custom-placeholders"})];case 1:return e=t.sent(),[4,(0,d.dispatch)(Pe).receiveCustomPlaceholders(e)];case 2:return t.sent(),[2]}}))}))}var Ae=function(){return Ae=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ae.apply(this,arguments)},Ce=Ae(Ae({},r),i),Pe=(0,d.createReduxStore)("nelio-content/automation-settings",{reducer:function(e,t){var n;return void 0===e&&(e=h),null!==(n=function(e,t){var n,o,r,i,a,s,l;switch(t.type){case"ADD_AUTOMATION_GROUP":if(e.automationGroups.byId[t.group.id])return e;var u=v(v({},e.automationGroups.byId),((n={})[t.group.id]=t.group,n));return _(v(v({},e),{automationGroups:{byId:u,allIds:g(["universal"],(0,m.keys)(u).filter((function(e){return"universal"!==e})),!0)}}));case"UPDATE_AUTOMATION_GROUP":return e.automationGroups.byId[t.groupId]?"universal"===t.groupId?_(v(v({},e),{automationGroups:v(v({},e.automationGroups),{byId:v(v({},e.automationGroups.byId),{universal:v(v({},e.automationGroups.byId.universal),t.attrs)})})})):_(v(v({},e),{automationGroups:v(v({},e.automationGroups),{byId:v(v({},e.automationGroups.byId),(o={},o[t.groupId]=v(v({},e.automationGroups.byId[t.groupId]),t.attrs),o))})})):e;case"ADD_PROFILE_SETTINGS":var c=e.automationGroups.byId[t.groupId];if(!c)return e;var d=v(v({},c),{profileSettings:v(v({},c.profileSettings),(r={},r[t.settings.profileId]=t.settings,r))});return _(v(v({},e),{automationGroups:v(v({},e.automationGroups),{byId:v(v({},e.automationGroups.byId),(i={},i[d.id]=d,i))})}));case"CLOSE_TEMPLATE_EDITOR":return v(v({},e),{templateEditor:v(v({},e.templateEditor),{attributes:void 0,isNew:!1})});case"CLOSE_TEMPLATE_IMPORT_EXPORT":return v(v({},e),{templateImportExport:void 0});case"DELETE_AUTOMATION_GROUP":return e.automationGroups.allIds.includes(t.groupId)?v(v({},e),{automationGroups:{byId:(0,m.omit)(e.automationGroups.byId,t.groupId),allIds:g(["universal"],(0,m.without)((0,m.filter)(e.automationGroups.allIds,(function(e){return"universal"!==e})),t.groupId),!0)}}):e;case"DELETE_AUTOMATION_GROUP_TEMPLATE":return _(function(e,t){var n,o,r,i,a=e.automationGroups.byId[t.groupId];if(!a)return e;var s=t.profileId?"profileSettings":"networkSettings",l=null!==(i=t.profileId)&&void 0!==i?i:t.network,u=t.profileId?a.profileSettings[t.profileId]:a.networkSettings[t.network];return u?v(v({},e),{automationGroups:v(v({},e.automationGroups),{byId:v(v({},e.automationGroups.byId),(n={},n[t.groupId]=v(v({},a),(o={},o[s]=v(v({},a[s]),(r={},r[l]=v(v({},u),{publication:v(v({},u.publication),{templates:u.publication.templates.filter((function(e){return e.id!==t.id}))}),reshare:v(v({},u.reshare),{templates:u.reshare.templates.filter((function(e){return e.id!==t.id}))})}),r)),o)),n))})}):e}(e,t.template));case"INIT_AUTOMATION_GROUPS":return _(v(v({},e),{automationGroups:{byId:v({universal:e.automationGroups.byId.universal},(0,m.keyBy)(t.automationGroups,"id")),allIds:g(["universal"],(0,m.map)(t.automationGroups,"id").filter((function(e){return"universal"!==e})),!0)},frequencies:(0,m.mapValues)((0,m.keyBy)(t.profiles,"id"),(function(e){return{publication:Math.max(1,e.publicationFrequency),reshare:Math.max(1,e.reshareFrequency)}}))}));case"OPEN_TEMPLATE_EDITOR":return v(v({},e),{templateEditor:v(v({},e.templateEditor),{attributes:t.template,isNew:t.isNew,isNetwork:!t.isNew&&!t.template.profileId})});case"OPEN_TEMPLATE_IMPORTER":return v(v({},e),{templateImportExport:v({mode:"import"},(0,m.omit)(t,"type"))});case"OPEN_TEMPLATE_EXPORTER":return v(v({},e),{templateImportExport:v({mode:"export"},(0,m.omit)(t,"type"))});case"MARK_AS_NETWORK_TEMPLATE":return e.templateEditor.attributes&&e.templateEditor.isNew?v(v({},e),{templateEditor:v(v({},e.templateEditor),{isNetwork:t.isNetwork})}):e;case"MARK_AS_SAVING":return v(v({},e),{isSaving:t.isSaving});case"RECEIVE_AUTOMATION_GROUP_TEMPLATES":return(0,m.reduce)(t.templates,(l=t.templateType,function(e,t){var n,o,r,i,a,s,u=null!==(s=t.profileId)&&void 0!==s?s:t.network,c=e.automationGroups.byId[t.groupId];if(!c)return e;var d=t.profileId?c.profileSettings:c.networkSettings,p=d[u];if(!p)return e;var f=p[l].templates;return v(v({},e),{automationGroups:v(v({},e.automationGroups),{byId:v(v({},e.automationGroups.byId),(n={},n[t.groupId]=v(v({},c),(o={},o[t.profileId?"profileSettings":"networkSettings"]=v(v({},d),(r={},r[u]=v(v({},p),(i={},i[l]=v(v({},p[l]),{templates:(0,m.uniqWith)((0,m.values)(v(v({},(0,m.keyBy)(f,"id")),(a={},a[t.id]=t,a))),y)}),i)),r)),o)),n))})})}),e);case"RECEIVE_CUSTOM_FIELDS":return v(v({},e),{templateEditor:v(v({},e.templateEditor),{customFields:t.customFields})});case"RECEIVE_CUSTOM_PLACEHOLDERS":return v(v({},e),{templateEditor:v(v({},e.templateEditor),{customPlaceholders:t.customPlaceholders})});case"SET_PROFILE_FREQUENCIES":var p=e.frequencies[t.profileId];return p?v(v({},e),{frequencies:v(v({},e.frequencies),(a={},a[t.profileId]=v(v({},p),t.frequencies),a))}):e;case"SET_AUTOMATION_GROUP_VALIDATION":return v(v({},e),{validations:v(v({},e.validations),(s={},s[t.groupId]=t.validation,s))});case"SET_EDITING_TEMPLATE_ATTRIBUTES":return e.templateEditor.attributes?v(v({},e),{templateEditor:v(v({},e.templateEditor),{attributes:v(v({},e.templateEditor.attributes),t.attributes)})}):e;case"SET_EDITING_TEMPLATE_ERRORS":return e.templateEditor.attributes?v(v({},e),{templateEditor:v(v({},e.templateEditor),{errors:t.errors})}):e}}(e,t))&&void 0!==n?n:e},controls:d.controls,actions:Ce,selectors:o,resolvers:a});!function(e){(0,d.register)(e)}(Pe);var Oe=[{title:(0,u._x)("Settings - Social Automations","text","nelio-content"),intro:(0,u._x)("Welcome to the Social Automations Screen. Here you can customize which content from your site can be automatically shared by Nelio Content and where it should be shared.","user","nelio-content"),elementToClick:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar-item")}},{title:(0,u._x)("Automation Groups","text","nelio-content"),intro:(0,u._x)("An Automation Group allows you to select some content from your WordPress site and customize where and how it should be shared.","user","nelio-content"),elementToClick:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar-item")},element:function(){return document.querySelector(".nelio-content-automation-group:first-child")}},{title:(0,u._x)("Automation Groups","text","nelio-content"),intro:(0,u._x)("In general, the first section of an automation group lets you filter your WordPress content by its type, taxonomies, author, and publication date.","user","nelio-content"),elementToClick:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar-item")},element:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group-settings__section")||document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar-item")}},{title:(0,u._x)("Automation Groups","text","nelio-content"),intro:(0,u._x)("However, the Universal Group limits this selection to the publication date only.","user","nelio-content"),elementToClick:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar-item")},element:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group-settings__extra")}},{title:(0,u._x)("Automation Groups","text","nelio-content"),intro:(0,u._x)("Once you’ve established which content is shareable, you can select the social profiles where Nelio Content is allowed to share it.","user","nelio-content"),elementToClick:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar-item")},element:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group-settings__section + .nelio-content-automation-group-settings__section")||document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar-item")}},{title:(0,u._x)("Automation Groups","text","nelio-content"),intro:(0,u._x)("Click on each social profile to toggle it. If it’s selected, Nelio Content might use it to share content on your behalf.","user","nelio-content"),elementToClick:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar-item")},element:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group-settings__section + .nelio-content-automation-group-settings__section")}},{title:(0,u._x)("Social Profile Settings","text","nelio-content"),intro:(0,u._x)("Active social profiles will show up here. Click on any profile to further customize how Nelio Content should use it to share your content.","user","nelio-content"),elementToClick:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar-item:not(:first-child)")},element:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar-item:not(:first-child)")||document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar")}},{title:(0,u._x)("Social Profile Settings","text","nelio-content"),intro:(0,u.sprintf)(/* translators: 1 -> a dashicon, 2 -> another dashicon */ /* translators: 1 -> a dashicon, 2 -> another dashicon */
(0,u._x)("In particular, you can customize if and how Nelio Content should share content on publication (%1$s) and on reshare (%2$s).","user","nelio-content"),'<span class="dashicons dashicons-megaphone"></span>','<span class="dashicons dashicons-share-alt"></span>'),elementToClick:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar-item:not(:first-child)")},element:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-profile-settings__tab-selector")||document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar-item:not(:first-child)")||document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar")}},{title:(0,u._x)("Social Profile Settings","text","nelio-content"),intro:(0,u._x)("If you enable social automations for a profile, you’ll be able to specify how many social messages should be created by Nelio Content when sharing new content, as well as the Social Templates is should use to do so, thus setting the tone of your auto-publications. Please notice the number of messages you set in one automation group is actually shared across all your groups.","user","nelio-content"),elementToClick:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar-item:not(:first-child)")},element:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-templates")||document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-profile-settings")||document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-profile-settings")||document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar-item:not(:first-child)")||document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar")}},{title:(0,u._x)("Duplicate and Delete","text","nelio-content"),intro:(0,u._x)("You can easily duplicate an existing group or delete it using the actions here.","user","nelio-content"),elementToClick:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar-item:not(:first-child)")},element:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar-actions")}},{title:(0,u._x)("Temporary Deactivation","text","nelio-content"),intro:(0,u._x)("If you want to disable a set of posts from being auto-shared, you can easily do so by toggling this button in the desired automation group.","user","nelio-content"),elementToClick:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar-item:not(:first-child)")},element:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__header-content-activation-toggle")}},{title:(0,u._x)("Save Changes","text","nelio-content"),intro:(0,u._x)("Once you’re happy with your setup, don’t forget to save your changes using this button!","user","nelio-content"),elementToClick:function(){return document.querySelector(".nelio-content-automation-group:first-child .nelio-content-automation-group__sidebar-item")},element:function(){return document.querySelector(".nelio-content-save-automation-groups")}}];const Re=window.wp.components,Ze=window.wp.notices,Ge=window.NelioContent.networks;var je=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},Me=function(){return p((function(e){var t=e(me.store),n=t.getAutomationGroup,o=t.getAutomationGroups,r=t.getSocialProfiles,i=o().map(n).filter(f.isDefined),a=r();return e(Pe).isDirty(i,a)}))};function De(e){return p((function(t){var n=t(Pe).getAutomationGroup;return e?n(e):void 0}))}var Ue=function(e,t){var n=De(e),o=(0,d.useDispatch)(Pe).updateAutomationGroup;return[n?n[t]:void 0,function(r){var i;n&&o(e,((i={})[t]=r,i))}]},Le=function(e){var t=(0,m.map)(Ve(e),"slug");return p((function(e){var n=e(pe.store),o=n.hasFinishedResolution,r=n.hasResolutionFailed,i=n.getEntityRecords,a=function(e,t){return o(e,t)||r(e,t)},s={per_page:10,context:"edit",search:"",page:1,exclude:[]},l={per_page:10,context:"view",search:"",page:1,exclude:[],who:"authors"};return t.forEach((function(e){return i("taxonomy",e,s)})),i("root","user",l),je(je([],t.map((function(e){return a("getEntityRecords",["taxonomy",e,s])})),!0),[a("getEntityRecords",["root","user",l])],!1)})).every(Boolean)},Ve=function(e){return Xe()[e||"nc_any"]||[]},qe=function(e){return!!Qe()[e||"nc_any"]},$e=function(e,t){var n=Qe(),o=(0,m.mapValues)(Xe(),(function(e){return(0,m.map)(e,"slug")})),r=He(t);return p((function(i){var a=i(pe.store),s=a.getEntityRecord,l=a.hasFinishedResolution,u=a.hasResolutionFailed,c=function(e,t,n){return!(n&&!s(e,t,n,{context:"user"===t?"view":"edit"})&&(o="getEntityRecord",r=[e,t,n,{context:"user"===t?"view":"edit"}],l(o,r)||u(o,r)));var o,r},d=function(e,t){return!t||!(null==e?void 0:e.length)||e.includes(t)};return e?(0,m.mapValues)((0,m.keyBy)((0,m.castArray)(t),"id"),(function(t){var i;return{target:!!t.profileId&&!!(0,Ge.doesNetworkSupport)("multi-target",t.network)&&!t.targetName&&(0,Ge.getTargetLabel)("selectTargetError",t.network),content:null!==(i=r[t.id])&&void 0!==i&&i,availability:!!t.availability&&et(t.availability),author:ot({doesAuthorExist:c("root","user",t.author),isAuthorSupported:!!n[t.postType||"nc_any"],isGroupAuthor:(0,f.isUniversalGroup)(e)||d(e.authors,t.author)}),taxonomies:(0,m.pick)((0,m.mapValues)(t.taxonomies,(function(t,n){return rt({doesTermExist:c("taxonomy",n,t),isGroupTerm:(0,f.isUniversalGroup)(e)||d(e.taxonomies[n],t)})})),o[t.postType||"nc_any"]||[])}})):{}}),[JSON.stringify(n),JSON.stringify(o),JSON.stringify(r),JSON.stringify(t)])},Be=function(){return p((function(e){return e(Pe).isSaving()}))},Fe=function(e){var t=(0,me.usePostTypes)("social");if(!e)return(0,u._x)("All Content","text","nelio-content");var n=t.find((function(t){return t.name===e}));return(null==n?void 0:n.labels.plural)||(0,u.sprintf)(/* translators: post type name */ /* translators: post type name */
(0,u._x)("Post type %s","text","nelio-content"),e)},ze=function(e){var t=p((function(t){var n=t(pe.store).getEntityRecord;return e.map((function(e){return n("root","user",e,{context:"view"})})).map((function(e){return null==e?void 0:e.name})).filter(f.isDefined)}));return t.length?(0,u.sprintf)(/* translators: author name(s) */ /* translators: author name(s) */
(0,u._x)("by %s","text","nelio-content"),(0,f.listify)("or",t)):""},We=function(e,t){var n,o,r,i,a,s,l,c,d=(0,m.map)(Ve(e),"slug"),h=(0,m.keys)(t).filter((function(e){return d.includes(e)})),v=p((function(e){var t=e(pe.store).getEntityRecord,n=h.map((function(e){return t("root","taxonomy",e)})).map((function(e){return null==e?void 0:e.labels.singular_name}));return(0,m.pickBy)((0,m.zipObject)(h,n),(function(e){return"string"==typeof e}))}),[JSON.stringify(h)]),g=(0,m.pick)(t,h),y=p((function(e){var t=e(pe.store).getEntityRecord;return(0,m.mapValues)(g,(function(e,n){return e.map((function(e){return t("taxonomy",n,e,{context:"edit"})})).map((function(e){return null==e?void 0:e.name})).filter(f.isDefined)}))}),[JSON.stringify(g)]),_=(0,m.keys)(v).filter((function(e){var t;return!!(null===(t=y[e])||void 0===t?void 0:t.length)})),b=!!(null===(n=y[f.CAT])||void 0===n?void 0:n.length)||!!(null===(o=y[f.PROD_CAT])||void 0===o?void 0:o.length),x=!!(null===(r=y[f.TAG])||void 0===r?void 0:r.length)||!!(null===(i=y[f.PROD_TAG])||void 0===i?void 0:i.length),E=[];b&&E.push((0,u.sprintf)(/* translators: category names */ /* translators: category names */
(0,u._x)("in %s","text","nelio-content"),(0,f.listify)("or",null!==(s=null!==(a=y[f.CAT])&&void 0!==a?a:y[f.PROD_CAT])&&void 0!==s?s:[]))),x&&E.push((0,u.sprintf)(/* translators: tag names */ /* translators: tag names */
(0,u._x)("tagged as %s","text","nelio-content"),(0,f.listify)("or",null!==(c=null!==(l=y[f.TAG])&&void 0!==l?l:y[f.PROD_TAG])&&void 0!==c?c:[])));var k=_.filter((function(e){return![f.CAT,f.PROD_CAT,f.TAG,f.PROD_TAG].includes(e)})).map((function(e,t){var n,o;return t?(0,u.sprintf)(/* translators: 1 -> taxonomy name, 2 -> taxonomy terms */ /* translators: 1 -> taxonomy name, 2 -> taxonomy terms */
(0,u._x)("%2$s in taxonomy %1$s","text","nelio-content"),v[e],(0,f.listify)("or",null!==(o=y[e])&&void 0!==o?o:[])):(0,u.sprintf)(/* translators: 1 -> taxonomy name, 2 -> taxonomy terms */ /* translators: 1 -> taxonomy name, 2 -> taxonomy terms */
(0,u._x)("with %2$s in taxonomy %1$s","text","nelio-content"),v[e],(0,f.listify)("or",null!==(n=y[e])&&void 0!==n?n:[]))}));return(0,f.listify)("and",je(je([],E,!0),k,!0))},Ke=function(e){return"always"===e.type?"":{30:(0,u._x)("from last month","text","nelio-content"),60:(0,u._x)("from last two months","text","nelio-content"),90:(0,u._x)("from last three months","text","nelio-content"),180:(0,u._x)("from last six months","text","nelio-content"),365:(0,u._x)("from last year","text","nelio-content")}["".concat(e.days)]||(0,u.sprintf)(/* translators: number of days */ /* translators: number of days */
(0,u._x)("from last %d days","text","nelio-content"),e.days)},He=function(e){var t=(0,m.mapValues)(Je(),(function(e){return(0,m.map)(e,"key")})),n=(0,m.mapValues)(Ye(),(function(e){return(0,m.map)(e,"key")})),o=Qe(),r=(0,m.mapValues)(Xe(),(function(e){return(0,m.map)(e,"slug")})),i=(0,m.map)(e,(function(e){if(!(0,m.trim)(e.text).length)return(0,u._x)("Please create a template with some content","user","nelio-content");var i=/* translators: a placeholder name, like author or tags */ /* translators: a placeholder name, like author or tags */
(0,u._x)("Unsupported %s placeholder found in template","text","nelio-content");if(!o[e.postType||"nc_any"]&&e.text.includes("{author}"))return(0,u.sprintf)(i,"{author}");var a=r[e.postType||"nc_any"]||[];if(!a.includes(f.CAT)&&!a.includes(f.PROD_CAT)&&e.text.includes("{categories}"))return(0,u.sprintf)(i,"{categories}");if(!a.includes(f.TAG)&&!a.includes(f.PROD_TAG)&&e.text.includes("{tags}"))return(0,u.sprintf)(i,"{tags}");for(var s=0,l=(0,m.map)(Array.from(e.text.matchAll(/{taxonomy:([^}]+)}/g)),1);s<l.length;s++){var c=l[s];if(!a.includes(c))return(0,u.sprintf)(i,"{taxonomy:".concat(c,"}"))}for(var d=e.postType?t[e.postType]||[]:(0,m.values)(t).flatMap((function(e){return e})),p=0,h=(0,m.map)(Array.from(e.text.matchAll(/{field:([^}]+)}/g)),1);p<h.length;p++){var v=h[p];if(!d.includes(v))return(0,u.sprintf)(i,"{field:".concat(v,"}"))}for(var g=e.postType?n[e.postType]||[]:(0,m.values)(n).flatMap((function(e){return e})),y=0,_=(0,m.map)(Array.from(e.text.matchAll(/{custom:([^}]+)}/g)),1);y<_.length;y++){var b=_[y];if(!g.includes(b))return(0,u.sprintf)(i,"{custom:".concat(b,"}"))}return!1})),a=(0,m.map)(e,"id");return(0,m.zipObject)(a,i)},Je=function(){return p((function(e){return e(Pe).getCustomFields()}))},Ye=function(){return p((function(e){return e(Pe).getCustomPlaceholders()}))},Xe=function(){var e=(0,m.map)((0,me.usePostTypes)("social"),"name"),t=(0,m.filter)(p((function(e){return e(pe.store).getEntityRecords("root","taxonomy",{per_page:-1})||[]}),[]),(function(e){return e.visibility.public}));return(0,m.reduce)(je(["nc_any"],e,!0),(function(n,o){var r="nc_any"===o?e:[o];return n[o]=(0,m.filter)(t,(function(e){return r.some((function(t){return e.types.includes(t)}))})),n}),{nc_any:[]})},Qe=function(){var e=(0,me.usePostTypes)("social");return(0,m.reduce)(je(["nc_any"],(0,m.map)(e,"name"),!0),(function(t,n){return t[n]=e.filter((function(e){return"nc_any"===n||e.name===n})).some((function(e){return e.supports.author})),t}),{nc_any:!1})},et=function(e){switch(e.type){case"publication-day-offset":return!(0<=e.hoursAfterPublication&&e.hoursAfterPublication<=24)&&(0,u._x)("Please select a number of hours after publication between 0 and 24 for the availability time.","user","nelio-content");case"publication-day-period":return tt(e.time);case"after-publication":return e.daysAfterPublication<0?(0,u._x)("Please select a valid positive number of days after publication for the availability date.","user","nelio-content"):tt(e.time);case"reshare":return(0,m.values)(e.weekday).some(Boolean)?tt(e.time):(0,u._x)("Please select at least one day for the availability date or the template will not be used.","user","nelio-content")}},tt=function(e){return!it(e)&&(0,u._x)("Please select a valid availability time.","user","nelio-content")},nt=function(e){switch(e){case"morning":return(0,u._x)("in the morning","text","nelio-content");case"noon":return(0,u._x)("at noon","text","nelio-content");case"afternoon":return(0,u._x)("in the afternoon","text","nelio-content");case"night":return(0,u._x)("at night","text","nelio-content");default:return(0,u.sprintf)(/* translators: a fixed time in the format HH:mm */ /* translators: a fixed time in the format HH:mm */(0,u._x)("at %s","text","nelio-content"),e)}},ot=function(e){var t=e.doesAuthorExist,n=e.isAuthorSupported,o=e.isGroupAuthor;return!!n&&(t?!o&&(0,u._x)("The author is not among those selected in the automation group","text","nelio-content"):(0,u._x)("Selected author doesn’t exist","text","nelio-content"))},rt=function(e){var t=e.doesTermExist,n=e.isGroupTerm;return t?!n&&(0,u._x)("The term is not among those selected in the automation group","text","nelio-content"):(0,u._x)("Selected term doesn’t exist","text","nelio-content")},it=function(e){return at(e)||/^(?:[01][0-9]|2[0-3]):[0-5][0-9](?::[0-5][0-9])?$/.test(e)},at=function(e){return["morning","noon","afternoon","night"].includes(e)};function st(e){return e.map((function(e){switch(e){case"mon":return(0,u._x)("Monday","text","nelio-content");case"tue":return(0,u._x)("Tuesday","text","nelio-content");case"wed":return(0,u._x)("Wednesday","text","nelio-content");case"thu":return(0,u._x)("Thursday","text","nelio-content");case"fri":return(0,u._x)("Friday","text","nelio-content");case"sat":return(0,u._x)("Saturday","text","nelio-content");case"sun":return(0,u._x)("Sunday","text","nelio-content");default:return""}}))}var lt=function(e,t){var n=(0,s.useState)(t.length?"loading-entities":"loading-groups"),o=n[0],r=n[1],i="authors"===e?ut(t):ct(t),a="authors"===e?"root":"taxonomy",l="authors"===e?"view":"edit";(0,s.useEffect)((function(){t.length&&"loading-groups"===o&&r("loading-entities")}),[!!t.length,o]);var u=p((function(e){return e(pe.store),"loading-entities"===o&&(0,m.keys)(i).length?{loadedEntities:(0,m.mapValues)(i,(function(t,n){return(0,m.chunk)(t,100).flatMap((function(t){return(0,m.map)(e(pe.store).getEntityRecords(a,n,{include:t.join(","),per_page:t.length,context:l}),(function(e){return e.id}))}))})),hasFinishedResolution:(0,m.every)((0,m.values)((0,m.mapValues)(i,(function(t,n){return(0,m.every)((0,m.chunk)(t,100).flatMap((function(t){return e(pe.store).hasFinishedResolution("getEntityRecords",[a,n,{include:t.join(","),per_page:t.length,context:l}])})))}))))}:{loadedEntities:{},hasFinishedResolution:!0}})),c=u.loadedEntities,f=u.hasFinishedResolution,h=function(){var e=(0,d.useDispatch)(pe.store),t=e.startResolution,n=e.finishResolution;return function(e,o){t(e,o),n(e,o)}}();return(0,s.useEffect)((function(){"loading-entities"===o&&f&&((0,m.mapValues)(c,(function(e,t){return e.forEach((function(e){return h("getEntityRecord",[a,t,e,{context:l}])}))})),r("done"))}),[o,f]),"done"!==o},ut=function(e){var t=e.flatMap((function(e){return je(je([],(0,m.values)(e.profileSettings),!0),(0,m.values)(e.networkSettings),!0)})).flatMap((function(e){return je(je([],e.publication.templates,!0),e.reshare.templates,!0)})).map((function(e){return e.author})).filter(f.isDefined),n=e.flatMap((function(e){return(0,f.isUniversalGroup)(e)?[]:e.authors}));return{user:(0,m.uniq)(je(je([],t,!0),n,!0))}},ct=function(e){var t=e.flatMap((function(e){return je(je([],(0,m.values)(e.profileSettings),!0),(0,m.values)(e.networkSettings),!0)})).flatMap((function(e){return je(je([],e.publication.templates,!0),e.reshare.templates,!0)})).map((function(e){return(0,m.mapValues)(e.taxonomies,(function(e){return[e]}))})),n=e.flatMap((function(e){return(0,f.isUniversalGroup)(e)?[]:e.taxonomies})),o=je(je([],t,!0),n,!0),r=(0,m.reduce)(o,(function(e,t){return(0,m.mergeWith)(e,t,(function(e,t){return(0,m.isArray)(e)&&(0,m.isArray)(t)?je(je([],e,!0),t,!0):void 0}))}),{});return(0,m.mapValues)(r,m.uniq)},dt=n(6942),pt=n.n(dt),mt=function(e){var t=e.groupId,n=e.isActive,o=e.isExpanded,r=e.onToggle,i=e.onToggleActivation,a=function(e){var t=De(e),n=function(e){var t=e.authors,n=e.postType,o=e.publication,r=e.taxonomies,i=Fe(n),a=ze(null!=t?t:[]),s=We(n,null!=r?r:{}),l=Ke(null!=o?o:{type:"always"}),c=(0,u.sprintf)(/* translators: 1 -> plural post type name (like “Posts” or “Pages”) or “All Content”, 2 -> byline, 3 -> in taxonomy, 4 -> published time */ /* translators: 1 -> plural post type name (like “Posts” or “Pages”) or “All Content”, 2 -> byline, 3 -> in taxonomy, 4 -> published time */
(0,u._x)("%1$s %2$s %3$s %4$s","text","nelio-content"),i,a,s,l);return(0,m.trim)(c.replace(/\s+/g," "))}(null!=t?t:{});return(0,f.isUniversalGroup)(t)?(0,u._x)("Universal Group","text","nelio-content"):(null==t?void 0:t.name)||n}(t),l=ht(t),d=Be();return s.createElement("div",{className:"nelio-content-automation-group__header",onClick:r,"aria-hidden":"true"},s.createElement("div",{className:"nelio-content-automation-group__header-content",onClick:r,"aria-hidden":"true"},s.createElement("div",{className:"nelio-content-automation-group__header-content-activation-toggle",onClick:function(e){return e.stopPropagation()},"aria-hidden":"true"},s.createElement(Re.ToggleControl,{label:"",checked:n,onChange:i,disabled:d})),s.createElement(ft,{groupId:t,isActive:n,isExpanded:o}),s.createElement("div",{className:"nelio-content-automation-group__header-content-title"},a),s.createElement("div",{className:"nelio-content-automation-group__header-content-icons"},l.length<=4?l.map((function(e){var t=e.id;return s.createElement(c.SocialProfileIcon,{key:t,profileId:t})})):l.slice(0,3).map((function(e){var t=e.id;return s.createElement(c.SocialProfileIcon,{key:t,profileId:t})})),l.length>4&&s.createElement("div",{className:"nelio-content-automation-group__header-content-remaining-profiles"},"+".concat(l.length-4+1)))),s.createElement("div",{className:"nelio-content-automation-group__header-toggle"},s.createElement(Re.Button,{disabled:d,icon:o?"arrow-up":"arrow-down",onClick:r})))},ft=function(e){var t=e.groupId,n=e.isActive,o=e.isExpanded,r=vt(t),i=gt(t),a=(0,me.useIsSubscribed)("standard");return!n&&!o||r&&(o||i)?a||"universal"===t?null:s.createElement(Re.Tooltip,{text:(0,u._x)("Upgrade to Nelio Content Standard to be able to use this automation group","user","nelio-content"),placement:"bottom-end",delay:0},s.createElement("div",{className:pt()({"nelio-content-automation-group--is-warning":!0,"nelio-content-automation-group--is-expanded":o})})):s.createElement(Re.Tooltip,{text:i?(0,u._x)("Please review this group’s settings and its active social profiles","user","nelio-content"):(0,u._x)("This group does not have any profiles selected","text","nelio-content"),placement:"bottom-end",delay:0},s.createElement("div",{className:pt()({"nelio-content-automation-group--is-invalid":!r||!o&&!i,"nelio-content-automation-group--is-expanded":o})}))},ht=function(e){return p((function(t){var n=t(Pe).getAutomationGroup(e);if(!n)return[];var o=(0,m.values)(n.profileSettings).filter((function(e){return e.enabled})).map((function(e){return e.profileId}));return t(me.store).getSocialProfiles().filter((function(e){return o.includes(e.id)}))}))},vt=function(e){return p((function(t){return t(Pe).isGroupValid(e)}))},gt=function(e){var t=De(e);return!!(0,m.values)(null==t?void 0:t.profileSettings).filter((function(e){return e.enabled})).length};const yt={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var _t,bt=new Uint8Array(16);function xt(){if(!_t&&!(_t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _t(bt)}for(var Et=[],kt=0;kt<256;++kt)Et.push((kt+256).toString(16).slice(1));const wt=function(e,t,n){if(yt.randomUUID&&!t&&!e)return yt.randomUUID();var o=(e=e||{}).random||(e.rng||xt)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=o[r];return t}return function(e,t=0){return(Et[e[t+0]]+Et[e[t+1]]+Et[e[t+2]]+Et[e[t+3]]+"-"+Et[e[t+4]]+Et[e[t+5]]+"-"+Et[e[t+6]]+Et[e[t+7]]+"-"+Et[e[t+8]]+Et[e[t+9]]+"-"+Et[e[t+10]]+Et[e[t+11]]+Et[e[t+12]]+Et[e[t+13]]+Et[e[t+14]]+Et[e[t+15]]).toLowerCase()}(o)};var Tt=function(){return Tt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Tt.apply(this,arguments)},St=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},It=function(e){var t=e.activeTab,n=e.groupId,o=e.setActiveTab,r=(0,s.useState)(!1),i=r[0],a=r[1],l=Be(),m=At(n),h=p((function(e){return e(Pe).getAutomationGroup(n)})),v=(0,d.useDispatch)(Pe),g=v.addAutomationGroup,y=v.deleteAutomationGroup,_=Ct();return h?s.createElement("div",{className:"nelio-content-automation-group__sidebar"},m.map((function(e,n){return s.createElement("div",{className:pt()({"nelio-content-automation-group__sidebar-item":!0,"nelio-content-automation-group__sidebar-item--active":Nt(e,t)}),key:n,onClick:function(){return!l&&o(e)},"aria-hidden":"true"},"settings"===e.type?s.createElement(Re.Dashicon,{icon:"admin-settings"}):s.createElement(Re.Tooltip,{text:e.displayName,placement:"bottom-end",delay:0},s.createElement("div",{className:"nelio-content-profile__icon-and-indicator"},s.createElement(c.SocialProfileIcon,{className:pt()({"nelio-content-profile__profile-icon":!0,"nelio-content-profile__profile-icon--is-selected":Nt(e,t),"nelio-content-profile__profile-icon--is-invalid":!e.isValid}),profileId:e.id,isNetworkHidden:!1}),s.createElement("div",{className:pt()({"nelio-content-profile__profile-indicator":!0,"nelio-content-profile__profile-indicator--is-invalid":!e.isValid})}))))})),s.createElement("div",{className:"nelio-content-automation-group__sidebar-item nelio-content-automation-group__sidebar-item--is-spacer"}),s.createElement("div",{className:"nelio-content-automation-group__sidebar-item nelio-content-automation-group__sidebar-actions"},s.createElement(Re.DropdownMenu,{icon:"admin-generic",label:(0,u._x)("Actions","text","nelio-content"),toggleProps:{disabled:l},controls:St([{title:(0,u._x)("Duplicate group","command","nelio-content"),icon:"admin-page",onClick:function(){return g(_(h))}}],(0,f.isUniversalGroup)(h)?[]:[{title:(0,u._x)("Remove group","command","nelio-content"),icon:"trash",onClick:function(){return a(!0)}}],!0)}),"universal"!==n&&s.createElement(c.ConfirmationDialog,{isOpen:i,confirmLabel:(0,u._x)("Delete","command","nelio-content"),onConfirm:function(){a(!1),y(n)},onCancel:function(){return a(!1)},text:(0,u._x)("Are you sure you want to delete this group? This operation can’t be undone.","user","nelio-content"),title:(0,u._x)("Delete group","text","nelio-content")}))):null},Nt=function(e,t){if(e.type!==t.type)return!1;switch(e.type){case"settings":return!0;case"profile":return"profile"===t.type&&e.id===t.id}},At=function(e){var t=De(e);return p((function(n){if(!t)return[];var o=(0,m.values)(t.profileSettings).filter((function(e){return e.enabled})).map((function(e){return e.profileId})),r=n(me.store).getSocialProfiles().filter((function(e){return o.includes(e.id)})),i=n(Pe).getProfileError;return St([{type:"settings"}],r.map((function(t){return{displayName:i(e,t.id)||t.displayName,type:"profile",id:t.id,isValid:!i(e,t.id)}})),!0)}))},Ct=function(){var e,t,n=null!==(t=null===(e=(0,me.usePostTypes)("social")[0])||void 0===e?void 0:e.name)&&void 0!==t?t:f.POST;return function(e){var t,o=Tt(Tt({postType:(0,f.isUniversalGroup)(e)?n:e.postType,authors:[],taxonomies:{}},e),{id:(0,f.createAutomationGroupId)(),name:(0,f.isUniversalGroup)(e)?(0,u._x)("Copy of Universal Group","text","nelio-content"):(0,u.sprintf)(/* translators: automation group name */ /* translators: automation group name */
(0,u._x)("Copy of %s","text","nelio-content"),null!==(t=e.name)&&void 0!==t?t:(0,u._x)("Unnamed Group","text","nelio-content"))}),r=(0,m.cloneDeep)(o);return Tt(Tt({},r),{name:(r.name||"")+" "+(0,u._x)("(duplicate)","text","nelio-content"),profileSettings:(0,m.mapValues)(r.profileSettings,(function(e){return Tt(Tt({},e),{publication:Tt(Tt({},e),{templates:e.publication.templates.map((function(e){return Tt(Tt({},e),{groupId:r.id,id:wt()})}))}),reshare:Tt(Tt({},e.reshare),{templates:e.reshare.templates.map((function(e){return Tt(Tt({},e),{groupId:r.id,id:wt()})}))})})})),networkSettings:(0,m.mapValues)(r.networkSettings,(function(e){return e?Tt(Tt({},e),{publication:Tt(Tt({},e.publication),{templates:e.publication.templates.map((function(e){return Tt(Tt({},e),{groupId:r.id,id:wt()})}))}),reshare:Tt(Tt({},e.reshare),{templates:e.reshare.templates.map((function(e){return Tt(Tt({},e),{groupId:r.id,id:wt()})}))})}):void 0}))})}},Pt=function(){return Pt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Pt.apply(this,arguments)},Ot=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},Rt=[{value:"always",label:(0,u._x)("Any date","text","nelio-content")},{value:"30",label:(0,u._x)("Last month","text","nelio-content")},{value:"60",label:(0,u._x)("Last two months","text","nelio-content")},{value:"90",label:(0,u._x)("Last three months","text","nelio-content")},{value:"180",label:(0,u._x)("Last six months","text","nelio-content")},{value:"365",label:(0,u._x)("Last year","text","nelio-content")}],Zt=function(e){var t=e.value,n=e.onChange,o="always"===t.type?"always":"".concat(t.days);return s.createElement(Re.SelectControl,{label:(0,u._x)("Publication date","text","nelio-content"),options:Rt,value:o,onChange:function(e){return n("always"===e?{type:"always"}:{type:"max-age",days:parseInt(e)||30})}})},Gt=function(){return Gt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Gt.apply(this,arguments)},jt=function(e){var t=e.groupId,n=e.disabled,o=e.profileId,r=(0,me.useSocialProfile)(o),i=Mt(t,o),a=i[0],l=i[1],u=r||{},d=u.displayName,p=void 0===d?"":d,m=u.network,f=void 0===m?"twitter":m;return s.createElement(Re.Tooltip,{text:"".concat(p," (").concat((0,Ge.getNetworkLabel)("name",f),")"),delay:0},s.createElement("li",{className:pt()({"nelio-content-profile-selector__profile":!0,"nelio-content-profile-selector__profile--is-selected":a,"nelio-content-profile-selector__profile--is-disabled":n})},s.createElement("span",{className:"screen-reader-text"},"".concat(p,": ")),s.createElement("input",{className:"nelio-content-profile-selector__profile-input-field",disabled:n,type:"checkbox",checked:!!a,onChange:function(){return l(!a)}}),s.createElement("div",{className:"nelio-content-profile-selector__icon-and-indicator"},s.createElement(c.SocialProfileIcon,{className:pt()({"nelio-content-profile-selector__profile-icon":!0,"nelio-content-profile-selector__profile-icon--is-selected":a}),profileId:o,isNetworkHidden:!1}),s.createElement("div",{className:pt()({"nelio-content-profile-selector__profile-indicator":!0,"nelio-content-profile-selector__profile-indicator--is-selected":a})}))))},Mt=function(e,t){var n=De(e),o=p((function(e){return e(me.store).getSocialProfile(t)})),r=(0,m.find)(null==n?void 0:n.profileSettings,{profileId:t}),i=(0,d.useDispatch)(Pe).addProfileSettings;return[!!(null==r?void 0:r.enabled),function(a){n&&o&&i(e,Gt(Gt({profileId:t,network:o.network,publication:{enabled:!0,templates:[(0,f.createSocialTemplate)({groupId:n.id,text:"{title} {permalink}",network:o.network,profileId:o.id,postType:void 0}),(0,f.createSocialTemplate)({groupId:n.id,text:"{highlight} {permalink}",network:o.network,profileId:o.id,postType:void 0}),(0,f.createSocialTemplate)({groupId:n.id,text:"{phrase} {permalink}",network:o.network,profileId:o.id,postType:void 0})]},reshare:{enabled:!1,templates:[]}},r),{enabled:a}))}]},Dt=function(e){var t=e.groupId,n=Ut(),o=(0,me.useAdminUrl)("admin.php",{page:"nelio-content-settings",subpage:"social--profiles"});return s.createElement("div",{className:"nelio-content-automation-group-settings__section"},s.createElement("p",{className:"nelio-content-automation-group-settings__section-title"},(0,u._x)("Where should your content be shared?","user","nelio-content")),s.createElement("div",{className:"nelio-content-automation-group-settings__section-content"},n.length?s.createElement(s.Fragment,null,s.createElement("p",{className:"screen-reader-text"},(0,u._x)("Select one or more profiles:","text","nelio-content")),s.createElement("ul",{className:"nelio-content-automation-group-settings__profile-list"},n.map((function(e){var n=e.id;return s.createElement("div",{className:"nelio-content-automation-group-settings__profile-list-item",key:n},s.createElement(jt,{groupId:t,profileId:n}))})))):s.createElement("p",null,(0,s.createInterpolateElement)((0,u._x)("There aren’t any social profiles connected to Nelio Content. <a>Connect one first</a> and then configure its auto share settings here.","user","nelio-content"),{a:s.createElement("a",{href:o},".")}))))},Ut=function(){return(0,me.useSocialProfiles)().filter((function(e){return(0,Ge.doesNetworkSupport)("automations",e.network)}))},Lt=function(){var e=(0,m.map)((0,me.usePostTypes)("social"),(function(e){return e.labels.plural})),t=(0,f.listify)("and",(0,m.map)(e,(function(e){return"<strong>".concat(e,"</strong>")}))),n=(0,me.useAdminUrl)("admin.php",{page:"nelio-content-settings",subpage:"social--advanced"});return s.createElement("div",{className:"nelio-content-automation-group-settings"},s.createElement("div",{className:"nelio-content-automation-group-settings__section"},s.createElement("p",{className:"nelio-content-automation-group-settings__section-title"},(0,u._x)("Which content should be shared?","user","nelio-content")),s.createElement("div",{className:"nelio-content-automation-group-settings__section-content"},s.createElement(Re.BaseControl,{id:"nelio-content-universal-post-types",label:(0,u._x)("Post Types","text","nelio-content")},s.createElement("p",{className:"nelio-content-automation-group-settings__universal-post-types"},(0,s.createInterpolateElement)((0,u.sprintf)(/* translators: list of post type names */ /* translators: list of post type names */
(0,u._x)("When enabled, the universal group applies to all your <a>shareable content</a>: %s.","text","nelio-content"),t),{strong:s.createElement("strong",null),a:s.createElement("a",{href:n},".")}))),s.createElement(Vt,null))),s.createElement(Dt,{groupId:"universal"}))},Vt=function(){var e=De("universal"),t=(0,d.useDispatch)(Pe).updateAutomationGroup;if(!(0,f.isUniversalGroup)(e))return null;var n=e.publication;return s.createElement("div",{className:"nelio-content-automation-group-settings__extra"},s.createElement(Zt,{value:n,onChange:function(e){return t("universal",{publication:e})}}))},qt=function(){return qt=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},qt.apply(this,arguments)},$t=function(e){var t=e.groupId,n=(0,me.usePostTypes)("social").map((function(e){return{value:e.name,label:e.labels.plural}})),o=Ue(t,"name"),r=o[0],i=o[1],a=Ue(t,"postType"),l=a[0],c=a[1],d=p((function(e){return e(Pe).isPostTypeValid(t)}));return s.createElement("div",{className:"nelio-content-automation-group-settings"},s.createElement(Re.TextControl,{className:"nelio-content-automation-group-settings__group-name",label:(0,u._x)("Group name","text","nelio-content"),value:null!=r?r:"",onChange:i}),s.createElement("p",{className:"nelio-content-automation-group-settings__section-title"},(0,u._x)("Which content should be shared?","user","nelio-content")),s.createElement("div",{className:"nelio-content-automation-group-settings__section-content"},s.createElement(Re.SelectControl,{label:(0,u._x)("Post Type","text","nelio-content"),help:!d&&s.createElement("span",{className:"nelio-content-error-help"},(0,u._x)("The selected post type is not valid.","text","nelio-content")),options:n,value:l,onChange:c}),s.createElement(Bt,{groupId:t})),s.createElement(Dt,{groupId:t}))},Bt=function(e){var t=e.groupId,n=Ue(t,"postType")[0],o=qe(n),r=Ue(t,"taxonomies"),i=r[0],a=void 0===i?{}:i,l=r[1],d=Ue(t,"authors"),f=d[0],h=void 0===f?[]:f,v=d[1],g=Ue(t,"publication"),y=g[0],_=void 0===y?{type:"always"}:y,b=g[1],x=(0,s.useState)((0,m.values)(a).some((function(e){return e.length}))||h.length||_&&"always"!==_.type),E=x[0],k=x[1],w=Ve(n),T=Le(n),S=p((function(e){var n=e(Pe);return{areAuthorsValid:n.areAuthorsValid(t),areTermsValid:n.getGroupTermsValidation(t)}})),I=S.areAuthorsValid,N=S.areTermsValid;return E?T?s.createElement("div",{className:"nelio-content-automation-group-settings__extra"},w.map((function(e){var t;return s.createElement(c.ItemSelectControl,{id:"nelio-content-automation-group-settings-taxonomies",error:!N[e.slug]&&(0,u._x)("Some terms are not valid.","text","nelio-content"),key:e.slug,kind:"taxonomy",label:e.labels.name,name:e.slug,placeholder:e.labels.filter_by_item,value:null!==(t=a[e.slug])&&void 0!==t?t:[],onChange:function(t){var n;return l(qt(qt({},a),((n={})[e.slug]=t,n)))}})})),o&&s.createElement(c.ItemSelectControl,{id:"nelio-content-automation-group-settings-authors",error:!I&&(0,u._nx)("The selected author is not valid.","Some of the selected authors are not valid.",h.length,"text","nelio-content"),kind:"author",label:(0,u._x)("Authors","text","nelio-content"),placeholder:(0,u._x)("Filter by author","text","nelio-content"),value:h,onChange:v}),s.createElement(Zt,{value:_,onChange:b})):s.createElement("div",{className:"nelio-content-automation-group-settings__extra"},s.createElement(Re.Spinner,null)):s.createElement("div",{className:"nelio-content-automation-group-settings__extra"},s.createElement(Re.Button,{className:"nelio-content-automation-group-settings__extra-action",variant:"link",onClick:function(){return k(!0)}},(0,u._x)("Show additional filters","command","nelio-content")))},Ft=function(e){var t=e.groupId;return"universal"===t?s.createElement(Lt,null):s.createElement($t,{groupId:t})},zt=/({title}|{permalink}|{phrase}|{highlight}|{tags}|{author}|{categories}|{excerpt}|{field:[^}]*}|{custom:[^}]*}|{taxonomy:[^}]*})/g,Wt=function(e){var t=Kt(e),n=Ht(t),o=Jt(e),r=(0,d.useDispatch)(Pe),i=r.deleteAutomationGroupTemplate,a=r.openTemplateEditor,l=r.openTemplateExporter;return t?s.createElement("div",{"data-template-type":"network"===e.type?(0,u._x)("Network","text (network template)","nelio-content"):"",className:pt()({"nelio-content-social-template":!0,"nelio-content-social-template--is-network":"network"===e.type})},s.createElement("div",{className:"nelio-content-social-template__text"},Xt(t.text)),s.createElement("div",{className:pt()({"nelio-content-social-template__extra":!0,"nelio-content-social-template__extra--is-invalid":!o})},s.createElement("span",{className:pt()({"nelio-content-social-template__filters":!0,"nelio-content-social-template__filters--is-invalid":!o})},n),s.createElement("div",{className:"nelio-content-social-template__actions"},s.createElement("span",null,"•"),s.createElement(Re.Button,{variant:"link",onClick:function(){return a(e.templateType,t)}},(0,u._x)("Edit","command","nelio-content")),"|",s.createElement(Re.Button,{variant:"link",onClick:function(){return l((0,f.makeExportedTemplate)(t))}},(0,u._x)("Export","command","nelio-content")),e.canBeDeleted&&s.createElement(s.Fragment,null,s.createElement("span",null,"|"),s.createElement(c.DeleteButton,{confirmationLabels:{title:(0,u._x)("Delete Template","text","nelio-content"),text:(0,u._x)("Are you sure you want to delete this social template? If you then save your social automations, you won’t be able to recover it.","user","nelio-content")},onClick:function(){return i(t)}}))))):null},Kt=function(e){var t,n,o,r,i,a,s=De(e.groupId);if(s){var l=s.profileSettings,u=s.networkSettings;switch(e.type){case"network":return null!==(n=(0,m.find)(null===(t=u[e.networkName])||void 0===t?void 0:t.publication.templates,{id:e.templateId}))&&void 0!==n?n:(0,m.find)(null===(o=u[e.networkName])||void 0===o?void 0:o.reshare.templates,{id:e.templateId});case"profile":return null!==(i=(0,m.find)(null===(r=l[e.profileId])||void 0===r?void 0:r.publication.templates,{id:e.templateId}))&&void 0!==i?i:(0,m.find)(null===(a=l[e.profileId])||void 0===a?void 0:a.reshare.templates,{id:e.templateId})}}},Ht=function(e){var t,n,o,r,i,a,s,l,c,d,p,h,v,g=(o=(t={attachment:null==e?void 0:e.attachment,postType:null==e?void 0:e.postType,author:null==e?void 0:e.author,taxonomies:null==e?void 0:e.taxonomies,availability:null==e?void 0:e.availability}).attachment,r=t.author,a=t.taxonomies,s=t.availability,l=Fe(i=t.postType),c=ze((0,f.isDefined)(r)?[r]:[]),d=We(i,null!==(n=(0,m.mapValues)(a,m.castArray))&&void 0!==n?n:{}),p=function(e){if(!e)return"";var t="";switch(e.type){case"publication-day-offset":t=0===e.hoursAfterPublication?(0,u._x)("on publication","text","nelio-content"):(0,u.sprintf)(/* translators: number of hours */ /* translators: number of hours */
(0,u._nx)("%d hour after publication","%d hours after publication",e.hoursAfterPublication,"text","nelio-content"),e.hoursAfterPublication);break;case"publication-day-period":t=nt(e.time);break;case"after-publication":switch(e.daysAfterPublication){case 0:t=(0,u._x)("on publication","text","nelio-content");break;case 1:t=(0,u._x)("the day after publication","text","nelio-content");break;case 7:t=(0,u._x)("one week after publication","text","nelio-content");break;case 28:case 29:case 30:case 31:t=(0,u._x)("one month after publication","text","nelio-content");break;default:t=(0,u.sprintf)(/* translators: number of days */ /* translators: number of days */
(0,u._x)("%d days after publication","text","nelio-content"),e.daysAfterPublication)}t+=" "+nt(e.time);break;case"reshare":var n=(0,m.keys)(e.weekday).filter((function(t){return!1!==e.weekday[t]}));t=(7===n.length?(0,u._x)("every day","text","nelio-content"):2===n.length&&n.includes("sat")&&n.includes("sun")?(0,u._x)("on weekends","text","nelio-content"):5!==n.length||n.includes("sat")||n.includes("sun")?1===n.length?(0,u.sprintf)(/* translators: a day of the week */ /* translators: a day of the week */
(0,u._x)("all week but %s,","text","nelio-content"),st(n)[0]):(0,u.sprintf)(/* translators: a list of days */ /* translators: a list of days */
(0,u._x)("on %s","text","nelio-content"),(0,f.listify)("and",st(n))):(0,u._x)("on weekdays","text","nelio-content"))+" "+nt(e.time)}return(0,u.sprintf)(/* translators: time period */ /* translators: time period */
(0,u._x)(", used %s","text","nelio-content"),t)}(s),h=function(e){if(!e)return"";switch(e){case"none":return(0,u._x)("(text only)","text","nelio-content");case"image":return(0,u._x)("(image)","text","nelio-content");case"video":return(0,u._x)("(video)","text","nelio-content")}}(o),v=(0,u.sprintf)(/* translators: 1 -> plural post type name, 2 -> byline, 3 -> in taxonomy, 4 -> availability time, 5 -> text / image template */ /* translators: 1 -> plural post type name, 2 -> byline, 3 -> in taxonomy, 4 -> availability time, 5 -> text / image template */
(0,u._x)("%1$s %2$s %3$s %4$s %5$s","text","nelio-content"),l,c,d,p,h),(0,m.trim)(v.replace(/\s+/g," ").replace(/ , /g,", ")));return Yt(e)||g},Jt=function(e){return p((function(t){var n=e.groupId,o=e.templateId;return t(Pe).isTemplateValid(n,o)}))},Yt=function(e){var t=p((function(t){var n=t(Pe).getTemplateErrors;return e&&n(e.groupId,e.id)}));return t?t.target||t.content||(t.author?t.author:(0,m.values)(t.taxonomies).some(Boolean)?(0,u._x)("Please review selected terms","user","nelio-content"):t.availability?(0,u._x)("Please review availability settings","user","nelio-content"):""):""},Xt=function(e){return(0,s.createInterpolateElement)(Qt(e),{code:s.createElement("span",{className:"nelio-content-social-template__code-tag"}),newline:s.createElement("span",{className:"nelio-content-social-template__newline-tag"})})},Qt=function(e){return(0,m.flow)(en,tn,nn,on,m.trim)(" ".concat(e," "))},en=function(e){return e.replace(/\r?\n/g,"¶")},tn=function(e){return e.replace(new RegExp("<","g"),"<⁠").replace(new RegExp(">","g"),"⁠>")},nn=function(e){return e.replace(zt,"<code>$1</code>")},on=function(e){return e.replace(/ *\\u00b6 */g,"<newline>¶</newline>")},rn=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},an=function(e){var t=(0,s.useState)(0),n=t[0],o=t[1];(0,s.useEffect)((function(){return o(0)}),[e.profileId]);var r=(0,d.useDispatch)(Pe),i=r.openTemplateEditor,a=r.openTemplateExporter,l=r.openTemplateImporter,c=De(e.groupId),p=un(e),h=ln(e.profileId),v=1===(null==p?void 0:p.length);if(!p||!h)return null;var g=p.length<=20?[p]:(0,m.chunk)(p,10),y=g.length,_=y>1;return s.createElement("div",{className:"nelio-content-automation-templates"},s.createElement("div",{className:"nelio-content-automation-templates__header"},s.createElement("h3",{className:"nelio-content-automation-templates__title"},(0,u._x)("Social Templates","text","nelio-content"),_?" (".concat(p.length,")"):""),s.createElement(Re.Button,{size:"small",variant:"secondary",onClick:function(){if(c){var t=(0,f.createSocialTemplate)({groupId:c.id,text:"",network:h,profileId:e.profileId,postType:(0,f.isUniversalGroup)(c)?void 0:c.postType});i(e.mode,t,"new")}}},(0,u._x)("Add Template","command","nelio-content")),s.createElement(Re.Button,{size:"small",variant:"secondary",onClick:function(){return l(e.groupId,e.profileId,e.mode)}},(0,u._x)("Import","command","nelio-content")),!!p.length&&s.createElement(Re.Button,{size:"small",variant:"secondary",onClick:function(){return a(p.map(f.makeExportedTemplate))}},(0,u._x)("Export","command","nelio-content")),_&&s.createElement(sn,{mode:"title",current:n,total:y,onChange:o})),s.createElement("div",{className:"nelio-content-automation-templates__content"},(0,m.map)(g[n],(function(t){return t.profileId?s.createElement(Wt,{key:t.id,type:"profile",groupId:e.groupId,profileId:t.profileId,templateId:t.id,templateType:e.mode,canBeDeleted:!v}):s.createElement(Wt,{key:t.id,type:"network",groupId:e.groupId,networkName:t.network,templateId:t.id,templateType:e.mode,canBeDeleted:!v})}))),_&&s.createElement(sn,{mode:"footer",current:n,total:y,onChange:o}))},sn=function(e){var t=e.mode,n=e.current,o=e.total,r=e.onChange;return s.createElement("div",{className:"nelio-content-automation-templates__pagination nelio-content-automation-templates__pagination--".concat(t)},s.createElement(Re.ButtonGroup,null,s.createElement(Re.Button,{disabled:0===n,onClick:function(){return r(n-1)},variant:"title"===t?"secondary":void 0,size:"title"===t?"small":void 0},"< ",s.createElement(Re.VisuallyHidden,null,(0,u._x)("Previous page","command","nelio-content"))),"footer"===t&&s.createElement("div",{className:"nelio-content-automation-templates__current-page"},"".concat(n+1," / ").concat(o)),s.createElement(Re.Button,{disabled:n>=o-1,onClick:function(){return r(n+1)},variant:"title"===t?"secondary":void 0,size:"title"===t?"small":void 0},"> ",s.createElement(Re.VisuallyHidden,null,(0,u._x)("Next page","command","nelio-content")))))},ln=function(e){return p((function(t){var n;return null===(n=t(me.store).getSocialProfile(e))||void 0===n?void 0:n.network}))},un=function(e){var t=e.groupId,n=e.profileId,o=e.mode,r=ln(n);return p((function(e){var i,a,s=e(Pe).getAutomationGroup(t);if(s){var l=s.profileSettings[n],u=r?s.networkSettings[r]:void 0;return rn(rn([],null!==(i=null==l?void 0:l[o].templates)&&void 0!==i?i:[],!0),null!==(a=null==u?void 0:u[o].templates)&&void 0!==a?a:[],!0)}}))},cn=function(e){var t=e.className,n=e.tab,o=e.setTab;return s.createElement(Re.Toolbar,{className:t,label:(0,u._x)("Settings","text","nelio-content")},s.createElement(Re.ToolbarButton,{icon:"megaphone",title:(0,u._x)("Publication","text","nelio-content"),isActive:"publication"===n,onClick:function(){return o("publication")}}),s.createElement(Re.ToolbarButton,{icon:"share-alt",title:(0,u._x)("Reshare","text","nelio-content"),isActive:"reshare"===n,onClick:function(){return o("reshare")}}))},dn=function(){return dn=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},dn.apply(this,arguments)},pn=function(e){var t=e.groupId,n=e.profileId,o=(0,s.useState)("publication"),r=o[0],i=o[1],a=(0,me.useSocialProfile)(n),l=hn(n),u=vn(t,n)[0];if(!a||!u)return null;var d=l&&!!u[r].enabled;return s.createElement("div",{className:"nelio-content-automation-profile-settings"},s.createElement("div",{className:"nelio-content-automation-profile-settings__header"},s.createElement("div",{className:"nelio-content-automation-profile-settings__profile-details"},s.createElement("h3",{className:"nelio-content-automation-profile-settings__profile-name"},a.displayName),s.createElement(c.ProfileCreator,{className:"nelio-content-automation-profile-settings__profile-creator",profileId:n})),s.createElement(cn,{className:"nelio-content-automation-profile-settings__tab-selector",tab:r,setTab:i})),s.createElement("div",{className:"nelio-content-automation-profile-settings__content"},s.createElement(mn,dn({type:r},e)),d&&s.createElement(an,{groupId:t,profileId:n,mode:r})))},mn=function(e){var t=e.type,n=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(e,["type"]),o=n.groupId,r=n.profileId,i=vn(o,r),a=i[0],l=i[1],u=De(o),c=gn(o,r,t);return u&&a?s.createElement("div",{className:"nelio-content-automation-profile-settings__sharing-settings"},s.createElement(Re.CheckboxControl,{checked:a[t].enabled,onChange:function(){var e,o=c||!!a[t].templates.length,r=!a[t].enabled,i=a[t].templates,s=[(0,f.createSocialTemplate)({groupId:u.id,text:"{title} {permalink}",network:a.network,profileId:n.profileId,postType:void 0}),(0,f.createSocialTemplate)({groupId:u.id,text:"{highlight} {permalink}",network:a.network,profileId:n.profileId,postType:void 0}),(0,f.createSocialTemplate)({groupId:u.id,text:"{phrase} {permalink}",network:a.network,profileId:n.profileId,postType:void 0})];l(dn(dn({},a),((e={})[t]=dn(dn({},a[t]),{enabled:r,templates:r&&!o?s:i}),e)))},label:s.createElement(fn,{profileId:n.profileId,enabled:a[t].enabled,type:t})})):null},fn=function(e){var t=e.enabled,n=e.profileId,o=e.type,r=yn(n,o),i=r[0],a=r[1];if(!t)return s.createElement(s.Fragment,null,"publication"===o?(0,u._x)("Share content on publication","command","nelio-content"):(0,u._x)("Reshare content","command","nelio-content"));var l=function(e){return Math.min(20,Math.max(1,e))},c="publication"===o?/* translators: number of social messages */ /* translators: number of social messages */
(0,u._x)("Share content on publication using up to %s messages","command","nelio-content"):/* translators: number of social messages */ /* translators: number of social messages */
(0,u._x)("Reshare content using up to %s daily messages","command","nelio-content");return(0,s.createInterpolateElement)((0,u.sprintf)(c,"<value/>"),{value:s.createElement("input",{type:"number",style:{width:"4.5em"},min:"1",max:20,value:l(i),onChange:function(e){var t=e.target.value,n=Number.parseInt(t);isNaN(n)||a(l(n))}})})},hn=function(e){var t=(0,me.useSocialProfile)(e);return!!t&&(0,Ge.doesNetworkSupport)("profile-template",t.network)},vn=function(e,t){var n=p((function(n){return n(Pe).getProfileAutomationSettings(e,t)})),o=(0,d.useDispatch)(Pe).addProfileSettings;return[n,function(t){if(n)return o(e,dn(dn({},n),t))}]},gn=function(e,t,n){var o,r,i=De(e),a=null===(o=null==i?void 0:i.profileSettings[t])||void 0===o?void 0:o.network;return!!a&&!!(null===(r=null==i?void 0:i.networkSettings[a])||void 0===r?void 0:r[n].templates.length)},yn=function(e,t){var n=p((function(n){var o,r;return null!==(r=null===(o=n(Pe).getProfileFrequencies(e))||void 0===o?void 0:o[t])&&void 0!==r?r:1})),o=(0,d.useDispatch)(Pe).setProfileFrequencies;return[n,function(n){var r;return o(e,((r={})[t]=n,r))}]},bn=function(e){var t=e.groupId,n=xn(t),o=n[0],r=n[1],i=(0,s.useState)(o),a=i[0],l=i[1],c=(0,s.useState)({type:"settings"}),h=c[0],v=c[1],g=Be();return function(e){var t=De(e),n=(0,m.map)((0,me.usePostTypes)("social"),"name"),o=!!(0,f.isUniversalGroup)(t)||!!(null==t?void 0:t.postType)&&n.includes(t.postType),r=function(e){var t,n=(0,f.isUniversalGroup)(e)||null==e?void 0:e.postType,o=!!(null===(t=(0,me.usePostType)(n))||void 0===t?void 0:t.supports.author);return p((function(t){var n;if(t(pe.store),!o||(0,f.isUniversalGroup)(e))return!0;var r=t(pe.store),i=r.getEntityRecord,a=r.hasFinishedResolution,s=r.hasResolutionFailed,l=null!==(n=null==e?void 0:e.authors)&&void 0!==n?n:[],u=(0,m.map)(l,(function(e){return i("root","user",e,{context:"view"})})),c=(0,m.map)(l,(function(e){return a("getEntityRecord",["root","user",e,{context:"view"}])||s("getEntityRecord",["root","user",e,{context:"view"}])}));return!(0,m.every)(c)||(0,m.every)(u)}))}(t),i=function(e){var t,n=(0,f.isUniversalGroup)(e)||null==e?void 0:e.postType,o=(0,m.map)(Ve(n),"slug"),r=(0,m.pick)(Pt(Pt({},(0,m.zipObject)(o,(0,m.map)(o,(function(){return[]})))),(0,f.isUniversalGroup)(e)?{}:null!==(t=null==e?void 0:e.taxonomies)&&void 0!==t?t:{}),o);return p((function(e){var t=e(pe.store),n=t.getEntityRecord,o=t.hasFinishedResolution,i=t.hasResolutionFailed,a=(0,m.mapValues)(r,(function(e,t){return e.map(function(e){return function(t){return n("taxonomy",e,t)||void 0}}(t))})),s=(0,m.mapValues)(r,(function(e,t){return e.map(function(e){return function(t){return!!o("getEntityRecord",["taxonomy",e,t])||!!i("getEntityRecord",["taxonomy",e,t])}}(t))}));return(0,m.mapValues)(r,(function(e,t){return!(0,m.every)(s[t])||(0,m.every)(a[t])}))}))}(t),a=function(e){return(0,m.mapValues)(null==e?void 0:e.profileSettings,(function(e){return!(!e.enabled||e.publication.enabled||e.reshare.enabled)&&(0,u._x)("Missing permissions to automatically share content on your behalf","user","nelio-content")}))}(t),l=$e(t,function(e){var t=(0,m.filter)((0,m.values)(null==e?void 0:e.profileSettings),{enabled:!0}),n=(0,m.map)(t,"network"),o=(0,m.values)((0,m.pick)(null==e?void 0:e.networkSettings,n));return Ot(Ot(Ot(Ot([],(0,m.flatten)((0,m.map)((0,m.filter)((0,m.map)(t,"publication"),{enabled:!0}),"templates")),!0),(0,m.flatten)((0,m.map)((0,m.filter)((0,m.map)(t,"reshare"),{enabled:!0}),"templates")),!0),(0,m.flatten)((0,m.map)((0,m.map)(o,"publication"),"templates")),!0),(0,m.flatten)((0,m.map)((0,m.map)(o,"reshare"),"templates")),!0)}(t)),c=(0,d.useDispatch)(Pe).setAutomationGroupValidation;(0,s.useEffect)((function(){t&&c(e,{isPostTypeValid:o,areAuthorsValid:r,areTermsValid:i,socialProfileErrors:a,templateErrors:l})}),[JSON.stringify(o),JSON.stringify(r),JSON.stringify(i),JSON.stringify(a),JSON.stringify(l)])}(t),s.createElement("div",{className:pt()({"nelio-content-automation-group":!0,"nelio-content-automation-group--inactive":!o&&!a,"nelio-content-automation-group--disabled":g})},s.createElement(mt,{groupId:t,isActive:o,isExpanded:a,onToggleActivation:function(){return r(!o)},onToggle:function(){return l(!a)}}),a&&s.createElement("div",{className:"nelio-content-automation-group__body"},s.createElement(It,{groupId:t,activeTab:h,setActiveTab:v}),s.createElement("div",{className:"nelio-content-automation-group__body-content"},"settings"===h.type?s.createElement(Ft,{groupId:t}):s.createElement(pn,{groupId:t,profileId:h.id}))))},xn=function(e){var t=De(e),n=!!(null==t?void 0:t.priority),o=(0,d.useDispatch)(Pe).updateAutomationGroup;return[n,function(t){return o(e,{priority:t?100:0})}]},En=function(){var e=p((function(e){return e(Pe).getAutomationGroups()})),t=p((function(e){return e(me.store).getPluginLimits().maxAutomationGroups})),n=p((function(e){return e(me.store).canCurrentUserManagePlugin()})),o=e.length<t,r=(0,me.usePostTypes)("social"),i=(0,d.useDispatch)(Pe),a=i.addAutomationGroup,l=i.saveAutomationGroups,m=p((function(e){return e(Pe).isSaving()})),h=Me();return(0,f.isEmpty)(e)?null:s.createElement(s.Fragment,null,s.createElement("div",{className:"nelio-content-automation-group-list"},e.map((function(e){return s.createElement(bn,{key:e,groupId:e})}))),s.createElement(kn,{limit:t,active:!o}),s.createElement("div",{className:"nelio-content-automation-group-list__actions"},!(0,f.isEmpty)(e)&&s.createElement(Re.Button,{className:"nelio-content-save-automation-groups",variant:"primary",onClick:l,disabled:!h||m},m?(0,u._x)("Saving…","text","nelio-content"):(0,u._x)("Save Changes","command","nelio-content")),1===t&&n&&s.createElement(c.PremiumFeatureButton,{feature:"raw/automation-groups",label:(0,u._x)("Add Group","command","nelio-content"),variant:"secondary"}),1<t&&s.createElement(Re.Button,{className:"nelio-content-add-automation-group",variant:(0,f.isEmpty)(e)?"primary":"secondary",onClick:function(){r[0]&&a({id:(0,f.createAutomationGroupId)(),name:"",priority:100,postType:r[0].name,taxonomies:{},publication:{type:"always"},authors:[],profileSettings:{},networkSettings:{}})},disabled:m||!o},(0,u._x)("Add Group","command","nelio-content"))))},kn=function(e){var t=e.active,n=e.limit,o=p((function(e){return e(me.store).getAdminUrl("/admin.php",{page:"nelio-content-account"})})),r=p((function(e){return e(me.store).canCurrentUserManagePlugin()})),i=p((function(e){return e(me.store).isSubscribed("plus")}));return t&&1!==n?s.createElement("div",{className:"nelio-content-automation-group-list__error"},(0,u.sprintf)(/* translators: number of groups allowed */ /* translators: number of groups allowed */
(0,u._x)("You’ve reached the maximum number of automation groups allowed (i.e. %d).","user","nelio-content"),n)+" ",!i&&r&&s.createElement(Re.ExternalLink,{href:o},(0,u._x)("Please consider upgrading your subscription.","user","nelio-content"))):null},wn=function(){var e=p((function(e){return e(me.store).isSocialPublicationPaused()})),t=p((function(e){return e(me.store).isSocialPublicationStatusBeingSynched()})),n=(0,d.useDispatch)(me.store).toggleSocialPublicationStatus,o=e?(0,u._x)("Resume Social Publication","command","nelio-content"):(0,u._x)("Pause Social Publication","command","nelio-content"),r=e?(0,u._x)("Resuming Social Publication…","command","nelio-content"):(0,u._x)("Pausing Social Publication…","command","nelio-content");return s.createElement(Re.Button,{variant:"link",disabled:t,onClick:n},t?r:o)},Tn=function(){switch(p((function(e){return e(me.store).getResetStatus()}))){case"ready":return s.createElement(Sn,null);case"resetting":return s.createElement(In,null);case"done":return s.createElement(Nn,null);case"error":return s.createElement(An,null)}},Sn=function(){var e=(0,d.useDispatch)(me.store).resetSocialMessages;return s.createElement(Re.Button,{variant:"link",onClick:e},(0,u._x)("Reset Social Messages","command","nelio-content"))},In=function(){return s.createElement(s.Fragment,null,(0,u._x)("Resetting Social Messages…","text","nelio-content"))},Nn=function(){return s.createElement(s.Fragment,null,s.createElement(Re.Dashicon,{icon:"info"})," ",(0,u._x)("Social messages will be automatically regenerated shortly","text","nelio-content"))},An=function(){return s.createElement(s.Fragment,null,s.createElement(Re.Dashicon,{icon:"warning"})," ",(0,u._x)("Unable to reset social messages","text","nelio-content"))},Cn=function(){var e=Me();return!p((function(e){return!!e(me.store).canCurrentUserManagePlugin()}))||e?null:s.createElement("div",{className:"nelio-content-message-actions"},s.createElement(Tn,null),s.createElement("span",null,"|"),s.createElement(wn,null))},Pn=function(){var e=On(),t=e.publication,n=e.reshare,o=p((function(e){return e(me.store).isSocialPublicationPaused()}));return t||n?s.createElement("div",{className:"nelio-content-message-count-estimation"},s.createElement("div",null,!!o&&Rn(),!!t&&Gn(t),!!n&&Zn(n)),s.createElement(Cn,null)):s.createElement("div",{className:"nelio-content-message-count-estimation"},s.createElement("div",null,(0,u._x)("Enable social automations on one or more profiles to allow Nelio Content to generate messages automatically.","user","nelio-content")))},On=function(){return p((function(e){var t=e(Pe),n=t.getAutomationGroup,o=t.getAutomationGroups,r=t.getProfileFrequencies,i=o().map(n).filter(f.isDefined),a=function(e){return(0,m.sum)((0,m.uniq)(i.flatMap((function(t){return Object.keys(t.profileSettings).map((function(e){return e})).filter((function(n){var o,r;return!!t.priority&&!!(null===(o=t.profileSettings[n])||void 0===o?void 0:o.enabled)&&!!(null===(r=t.profileSettings[n])||void 0===r?void 0:r[e].enabled)}))}))).map(r).filter(f.isDefined).map((function(t){return t[e]})))};return{publication:a("publication"),reshare:a("reshare")}}))},Rn=function(){return jn((0,u._x)("<strong>Notice!</strong> Social publication is currently paused. This means Nelio Content will not share any scheduled social messages when their time comes.","usr","nelio-content")+"<br/>")},Zn=function(e){return jn(30<e?(0,u._x)("Your calendar will contain <strong>as many messages per day as possible</strong>.","text","nelio-content"):(0,u.sprintf)(/* translators: number of social messages */ /* translators: number of social messages */
(0,u._nx)("Your calendar will contain <strong>%d social message per day</strong>.","Your calendar will contain <strong>%d social messages per day</strong>.",e,"text","nelio-content"),e))},Gn=function(e){return jn(30<e?(0,u._x)("When publishing new content, Nelio will automatically generate <strong>as many messages as possible</strong>.","text","nelio-content"):(0,u.sprintf)(/* translators: number of social messages */ /* translators: number of social messages */
(0,u._nx)("When publishing new content, Nelio will automatically generate up to <strong>%d social message</strong>.","When publishing new content, Nelio will automatically generate up to <strong>%d social messages</strong>.",e,"text","nelio-content"),e))},jn=function(e){return(0,s.createInterpolateElement)(e+" ",{strong:s.createElement("strong",null),br:s.createElement("br",null)})},Mn=function(e){var t=e.resetDateTime;return s.createElement("div",{className:"nelio-content-social-template-editor__reset-date-button"},s.createElement(Re.Button,{variant:"link",onClick:function(){return t()}},(0,u._x)("Change","command","nelio-content")))},Dn=function(e){var t=e.value,n=e.onChange,o=e.resetSelector;return s.createElement(Re.BaseControl,{id:"nelio-content-social-template-editor__date-selector",label:(0,u._x)("Date","text","nelio-content")},s.createElement("div",{className:"nelio-content-social-template-editor__date-selector"},(0,s.createInterpolateElement)((0,u.sprintf)(/* translators: number of days */ /* translators: number of days */
(0,u._x)("%s days after publication.","text","nelio-content"),"<input/>"),{input:s.createElement(c.NumberControl,{className:"nelio-content-social-template-editor__positive-days-selector",value:t,min:2,onChange:function(e){return n(null!=e?e:2)}})}),s.createElement(Mn,{resetDateTime:o})))},Un=function(e){var t=e.daysAfterPublication,n=e.onChange;return s.createElement(Re.BaseControl,{id:"nelio-content-social-template-editor__date-selector",label:(0,u._x)("Date","text","nelio-content")},s.createElement("div",{className:"nelio-content-social-template-editor__date-selector"},s.createElement(Re.SelectControl,{options:Ln,value:"".concat(t),onChange:function(e){return n("positive-days"===e?"positive-days":parseInt(e))}})))},Ln=[{value:"0",label:(0,u._x)("Same day as publication","text","nelio-content")},{value:"1",label:(0,u._x)("The day after publication","text","nelio-content")},{value:"7",label:(0,u._x)("A week after publication","text","nelio-content")},{value:"28",label:(0,u._x)("A month after publication","text","nelio-content")},{value:"positive-days",label:(0,u._x)("__ days after publication","text","nelio-content")}],Vn=function(){return Vn=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Vn.apply(this,arguments)},qn=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},$n=function(e){var t=e.days,n=e.onChange,o=p((function(e){return e(me.store).getFirstDayOfWeek()})),r=[{id:"sun",label:(0,u._x)("SUN","text","nelio-content")},{id:"mon",label:(0,u._x)("MON","text","nelio-content")},{id:"tue",label:(0,u._x)("TUE","text","nelio-content")},{id:"wed",label:(0,u._x)("WED","text","nelio-content")},{id:"thu",label:(0,u._x)("THU","text","nelio-content")},{id:"fri",label:(0,u._x)("FRI","text","nelio-content")},{id:"sat",label:(0,u._x)("SAT","text","nelio-content")}],i=qn(qn([],r.slice(o),!0),r.slice(0,o),!0);return s.createElement(Re.BaseControl,{id:"nelio-content-social-template-editor__week-days-selector",label:(0,u._x)("Week Days","text","nelio-content")},s.createElement("div",{className:"nelio-content-social-template-editor__week-days-selector"},i.map((function(e,o){var r=e.id,i=e.label;return s.createElement(Re.CheckboxControl,{key:o,label:i,checked:t[r],onChange:function(e){var o;return n(Vn(Vn({},t),((o={})[r]=e,o)))}})}))))},Bn=function(){return Bn=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Bn.apply(this,arguments)},Fn=function(e){var t=e.templateType,n=e.availability,o=e.setAvailability,r=(0,s.useState)("after-publication"===n.type&&!Kn(n.daysAfterPublication)),i=r[0],a=r[1],l=zn(n),u=Wn(n);return"reshare"===t||"reshare"===n.type?s.createElement($n,{days:u,onChange:function(e){return o(Bn(Bn({},n),function(e){switch(e.type){case"publication-day-offset":case"after-publication":case"publication-day-period":return!1;case"reshare":return!0}}(n)&&{weekday:Bn({},e)}))}}):"after-publication"!==n.type||Kn(n.daysAfterPublication)&&!i?s.createElement(Un,{daysAfterPublication:l,onChange:function(e){0===e?o(Bn(Bn({},n),{type:"publication-day-offset",hoursAfterPublication:"publication-day-offset"===n.type?n.hoursAfterPublication:0})):"positive-days"===e?(o(Bn(Bn({},n),{type:"after-publication",daysAfterPublication:2,time:"after-publication"===n.type?n.time:"morning"})),a(!0)):o(Bn(Bn({},n),{type:"after-publication",daysAfterPublication:e,time:"after-publication"===n.type?n.time:"morning"}))}}):s.createElement(Dn,{value:n.daysAfterPublication,onChange:function(e){return o(Bn(Bn({},n),{type:"after-publication",daysAfterPublication:e}))},resetSelector:function(){o({type:"publication-day-offset",hoursAfterPublication:0}),a(!1)}})},zn=function(e){return"after-publication"!==e.type?0:e.daysAfterPublication},Wn=function(e){return"reshare"===e.type?e.weekday:{mon:!1,tue:!1,wed:!1,thu:!1,fri:!1,sat:!1,sun:!1}};function Kn(e){return[0,1,7,28].includes(e)}var Hn=function(e){var t=e.onClick;return s.createElement("div",{className:"nelio-content-social-template-editor__reset-time-button"},s.createElement(Re.Button,{variant:"link",onClick:t},(0,u._x)("Change","command","nelio-content")))},Jn=function(e){var t=e.exactTime,n=e.setExactTime,o=e.reset;return s.createElement(Re.BaseControl,{id:"nelio-content-social-template-editor__time-selector",label:(0,u._x)("Time","text","nelio-content")},s.createElement("div",{className:"nelio-content-social-template-editor__time-selector"},s.createElement(c.TimeInput,{value:t,onChange:function(e){return e?n(e):null}}),s.createElement(Hn,{onClick:function(){return o()}})))},Yn=function(e){var t=e.hours,n=e.setHours,o=e.reset;return s.createElement(Re.BaseControl,{id:"nelio-content-social-template-editor__time-selector",label:(0,u._x)("Time","text","nelio-content")},s.createElement("div",{className:"nelio-content-social-template-editor__time-selector"},(0,s.createInterpolateElement)((0,u.sprintf)(/* translators: number of hours */ /* translators: number of hours */
(0,u._x)("%s hours after publication.","text","nelio-content"),"<input/>"),{input:s.createElement(c.NumberControl,{className:"nelio-content-social-template-editor__positive-hours-selector",value:t,min:2,max:24,onChange:function(e){return n(null!=e?e:2)}})}),s.createElement(Hn,{onClick:function(){return o()}})))},Xn=function(e){var t=e.interval,n=e.setIntervalValue,o=e.selectExactTime,r=e.reset;return s.createElement(Re.BaseControl,{id:"nelio-content-social-template-editor__time-selector",label:(0,u._x)("Time","text","nelio-content")},s.createElement("div",{className:"nelio-content-social-template-editor__time-selector"},s.createElement(Re.SelectControl,{options:Qn,value:t,onChange:function(e){return"exact"===e?o():n(e)}})),!!r&&s.createElement(Hn,{onClick:function(){return r()}}))},Qn=[{value:"morning",label:(0,u._x)("Morning (8am – 11am)","text","nelio-content")},{value:"noon",label:(0,u._x)("Noon (11am – 3pm)","text","nelio-content")},{value:"afternoon",label:(0,u._x)("Afternoon (3pm – 7pm)","text","nelio-content")},{value:"night",label:(0,u._x)("Night (7pm – 11pm)","text","nelio-content")},{value:"exact",label:(0,u._x)("Choose a custom time…","user","nelio-content")}],eo=function(e){var t=e.value,n=e.setValue,o=e.selectExactTime,r=e.selectPositiveHours,i=e.selectTimeInterval;return s.createElement(Re.BaseControl,{id:"nelio-content-social-template-editor__time-selector",label:(0,u._x)("Time","text","nelio-content")},s.createElement("div",{className:"nelio-content-social-template-editor__time-selector"},s.createElement(Re.SelectControl,{options:to,value:"".concat(t),onChange:function(e){"positive-hours"===e?r():"exact"===e?o():"time-interval"===e?i():n(parseInt(e))}})))},to=[{value:"0",label:(0,u._x)("Same time as publication","text","nelio-content")},{value:"1",label:(0,u._x)("One hour after publication","text","nelio-content")},{value:"3",label:(0,u._x)("Three hours after publication","text","nelio-content")},{value:"5",label:(0,u._x)("Five hours after publication","text","nelio-content")},{value:"positive-hours",label:(0,u._x)("__ hours after publication","text","nelio-content")},{value:"time-interval",label:(0,u._x)("Choose a time interval…","user","nelio-content")},{value:"exact",label:(0,u._x)("Choose a custom time…","user","nelio-content")}],no=function(){return no=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},no.apply(this,arguments)},oo=function(e){var t=e.templateType,n=e.availability,o=e.setAvailability,r=(0,s.useState)("publication-day-offset"===n.type&&!lo(n.hoursAfterPublication)),i=r[0],a=r[1],l=ro(t,i,n),u=io(n);return"exact"===l||"time-interval"===l&&co(u)?s.createElement(Jn,{exactTime:co(u)?u:"10:00",setExactTime:function(e){return o(no(no({},n),ao(n)&&{time:e}))},reset:function(){return o("publication-day-period"===n.type?{type:"publication-day-offset",hoursAfterPublication:0}:no(no({},n),ao(n)&&{time:"morning"}))}}):"positive-hours"===l?s.createElement(Yn,{hours:"number"==typeof u?u:2,setHours:function(e){return o({type:"publication-day-offset",hoursAfterPublication:e})},reset:function(){o(no(no({},n),so(n)&&{hoursAfterPublication:0})),a(!1)}}):"time-interval"===l?s.createElement(Xn,{interval:"number"!=typeof u&&uo(u)?u:"morning",setIntervalValue:function(e){return o(no(no({},n),ao(n)&&{time:e}))},selectExactTime:function(){return o(no(no({},n),ao(n)&&{time:"10:00"}))},reset:"publication-day-period"===n.type?function(){return o({type:"publication-day-offset",hoursAfterPublication:0})}:void 0}):"predefined-offset"===l?s.createElement(eo,{value:"publication-day-offset"===n.type&&lo(n.hoursAfterPublication)?n.hoursAfterPublication:0,setValue:function(e){a(!1),o(no(no({},n),so(n)&&{hoursAfterPublication:e}))},selectExactTime:function(){a(!1),o({type:"publication-day-period",time:"10:00"})},selectTimeInterval:function(){a(!1),o({type:"publication-day-period",time:"morning"})},selectPositiveHours:function(){a(!0),o(no(no({},n),so(n)&&{hoursAfterPublication:2}))}}):null},ro=function(e,t,n){var o=n.type;if("reshare"===e)return"time-interval";switch(o){case"publication-day-offset":return!n.hoursAfterPublication||!t&&lo(n.hoursAfterPublication)?"predefined-offset":"positive-hours";case"after-publication":case"publication-day-period":case"reshare":return uo(n.time)?"time-interval":"exact"}},io=function(e){switch(e.type){case"publication-day-offset":return e.hoursAfterPublication;case"after-publication":case"publication-day-period":case"reshare":return e.time}};function ao(e){switch(e.type){case"publication-day-offset":return!1;case"after-publication":case"publication-day-period":case"reshare":return!0}}function so(e){return"publication-day-offset"===e.type}function lo(e){return[0,1,3,5].includes(e)}function uo(e){return!e.includes(":")}function co(e){return"string"==typeof e&&!uo(e)}var po,mo,fo,ho=function(){var e,t=go(),n=vo(),o=n[0],r=n[1],i=p((function(e){return e(Pe).getEditingTemplateErrors()}));if(!o)return null;var a=o.availability;return s.createElement("div",{className:"nelio-content-availability-control"},!a&&s.createElement(Re.Button,{variant:"link",onClick:function(){return r({availability:yo(t)})}},(0,u._x)("Customize template availability","command","nelio-content")),!!a&&s.createElement(s.Fragment,null,s.createElement("div",{className:pt()("nelio-content-availability-control__options",{"nelio-content-availability-control__options--reshare":"reshare"===t})},s.createElement(Fn,{templateType:t,availability:a,setAvailability:function(e){return r({availability:e})}}),s.createElement(oo,{templateType:t,availability:a,setAvailability:function(e){return r({availability:e})}})),s.createElement("div",{className:"nelio-content-availability-control__error"},null!==(e=i.availability)&&void 0!==e?e:""),s.createElement("div",null,s.createElement(Re.Button,{variant:"link",onClick:function(){return r({availability:void 0})}},(0,u._x)("Make template always available","command","nelio-content")))))},vo=function(){return[p((function(e){return e(Pe).getEditingTemplate()})),(0,d.useDispatch)(Pe).setEditingTemplateAttributes]},go=function(){return p((function(e){return e(Pe).getEditingTemplateType()}))},yo=function(e){return"publication"===e?{type:"publication-day-offset",hoursAfterPublication:0}:{type:"reshare",weekday:{mon:!0,tue:!0,wed:!0,thu:!0,fri:!0,sat:!0,sun:!0},time:"morning"}},_o=[{title:(0,u._x)("Social Template Editor","text","nelio-content"),intro:(0,u._x)("Welcome to the social template editor, the easiest way to create custom templates for sharing your content on social media.","user","nelio-content"),elementToClick:function(){return null},element:function(){return document.querySelector(".nelio-content-social-template-editor-dialog")}},{title:(0,u._x)("Message","text","nelio-content"),intro:(0,u._x)("Here you can write the template itself. Add placeholders like, for example, {title} or {tags}, which will be then replaced by Nelio Content when the template is used for sharing a specific post from your site.","user","nelio-content"),elementToClick:function(){return null},element:function(){return document.querySelector(".nelio-content-social-template-editor-dialog__text")}},{title:(0,u._x)("Placeholders","text","nelio-content"),intro:(0,u._x)("If you don’t know which placeholders are available, use this action and select the placeholder(s) you want to include in your template.","user","nelio-content"),elementToClick:function(){return null},element:function(){return document.querySelector(".nelio-content-social-template-editor-dialog__add-placeholder")}},{title:(0,u._x)("Additional Filters","text","nelio-content"),intro:(0,u._x)("By default, templates apply to all content in the Automation Group. But you can narrow the selection using these actions here.","user","nelio-content"),elementToClick:function(){return null},element:function(){return document.querySelector(".nelio-content-social-template-editor-dialog__quick-actions .is-link")||document.querySelector(".nelio-content-social-template-editor-dialog__tab-selector")}},{title:(0,u._x)("Content Type","text","nelio-content"),intro:(0,u._x)("Depending on the content selected in the Automation Group, you’ll be able to filter the tempate by taxonomy and/or author.","user","nelio-content"),elementToClick:function(){return document.querySelector(".nelio-content-social-template-editor-dialog__quick-actions .is-link")},element:function(){return document.querySelector(".nelio-content-social-template-editor-dialog__tab-selector")}},{title:(0,u._x)("Template Availability","text","nelio-content"),intro:(0,u._x)("You can also customize the template’s availability (i.e. when a template is eligible). For instance, let Nelio Content use a template on post’s publication or on a Monday morning","user","nelio-content"),elementToClick:function(){return document.querySelector(".nelio-content-social-template-editor__availability-action")},element:function(){return document.querySelector(".nelio-content-availability-control")}},{title:(0,u._x)("Save Changes","text","nelio-content"),intro:(0,u._x)("Save the template using the “Save” button. If there are any errors, the button will be disabled – hover it to reveal the error.","user","nelio-content"),elementToClick:function(){return null},element:function(){return document.querySelector(".nelio-content-social-template-editor-dialog__save-button")}}],bo=function(){"function"==typeof po&&po()},xo=function(e){var t=e.onClick,n=ko(),o=Eo(),r=function(e){return p((function(t){var n=t(Pe).getCustomFields();return e?n[e]||[]:(0,m.values)((0,m.keyBy)((0,m.values)(n).flatMap((function(e){return e})),"key"))}))}(n),i=function(e){return p((function(t){var n=t(Pe).getCustomPlaceholders();return e?n[e]||[]:(0,m.values)((0,m.keyBy)((0,m.values)(n).flatMap((function(e){return e})),"key"))}))}(n),a=wo();return s.createElement(Re.DropdownMenu,{className:"nelio-content-social-template-editor-dialog__quick-action nelio-content-social-template-editor-dialog__add-placeholder",icon:"tag",label:(0,u._x)("Placeholders","text","nelio-content"),toggleProps:{tooltipPosition:"bottom center"},popoverProps:{onFocusOutside:bo}},(function(e){var n=e.onClose;return po=n,s.createElement(Re.MenuGroup,null,s.createElement(Re.MenuGroup,null,o.title&&s.createElement(Re.MenuItem,{role:"menuitem",icon:"editor-textcolor",onClick:function(){return t("{title}")}},(0,u._x)("Add Title","command","nelio-content")),s.createElement(Re.MenuItem,{role:"menuitem",icon:"format-status",onClick:function(){return t("{phrase}")}},(0,u._x)("Add Content Phrase","command","nelio-content")),s.createElement(Re.MenuItem,{role:"menuitem",icon:"editor-quote",onClick:function(){return t("{highlight}")}},(0,u._x)("Add Highlight","command","nelio-content")),o.author&&s.createElement(Re.MenuItem,{role:"menuitem",icon:"admin-users",onClick:function(){return t("{author}")}},(0,u._x)("Add Author","command","nelio-content")),o.excerpt&&s.createElement(Re.MenuItem,{role:"menuitem",icon:"text",onClick:function(){return t("{excerpt}")}},(0,u._x)("Add Excerpt","command","nelio-content")),s.createElement(Re.MenuItem,{role:"menuitem",icon:"admin-links",onClick:function(){return t("{permalink}")}},(0,u._x)("Add Permalink","command","nelio-content"))),!!a.length&&s.createElement(Re.MenuGroup,{label:(0,u._x)("Taxonomies","text","nelio-content")},a.map((function(e){var n=e.slug,o=e.labels;return s.createElement(Re.MenuItem,{key:n,role:"menuitem",icon:So(n),onClick:function(){return t(Io(n))}},(0,u.sprintf)(/* translators: taxonomy name */ /* translators: taxonomy name */
(0,u._x)("Add %s","command","nelio-content"),o.name))}))),!!r.length&&s.createElement(Re.MenuGroup,{label:(0,u._x)("Custom fields","text","nelio-content")},r.map((function(e){var n=e.key,o=e.name;return s.createElement(Re.MenuItem,{key:n,role:"menuitem",icon:"welcome-widgets-menus",onClick:function(){return t("{field:".concat(n,"}"))}},(0,u.sprintf)(/* translators: custom field name */ /* translators: custom field name */
(0,u._x)("Add %s","command","nelio-content"),o))}))),!!i.length&&s.createElement(Re.MenuGroup,{label:(0,u._x)("Custom placeholders","text","nelio-content")},i.map((function(e){var n=e.key,o=e.name;return s.createElement(Re.MenuItem,{key:n,role:"menuitem",icon:"plus-alt",onClick:function(){return t("{custom:".concat(n,"}"))}},(0,u.sprintf)(/* translators: custom placeholder name */ /* translators: custom placeholder name */
(0,u._x)("Add %s","command","nelio-content"),o))}))))}))},Eo=function(){var e=ko();return p((function(t){var n=e?[e]:(0,m.map)(t(me.store).getPostTypes("social"),"name"),o=t(pe.store).getEntityRecord,r=n.map((function(e){return o("root","postType",e)})).filter(To).filter(f.isDefined);return{author:r.some((function(e){var t;return!!(null===(t=e.supports)||void 0===t?void 0:t.author)})),excerpt:r.some((function(e){var t;return!!(null===(t=e.supports)||void 0===t?void 0:t.excerpt)})),title:r.some((function(e){var t;return!!(null===(t=e.supports)||void 0===t?void 0:t.title)}))}}))},ko=function(){return p((function(e){var t;return null===(t=e(Pe).getEditingTemplate())||void 0===t?void 0:t.postType}))},wo=function(){return p((function(e){var t,n;e(pe.store),e(me.store);var o=(0,e(Pe).getEditingTemplate)();if(!o)return[];var r=e(me.store).getPostTypes,i=o.postType?[o.postType]:null!==(t=(0,m.map)(r("social"),"name"))&&void 0!==t?t:[];return(null!==(n=(0,e(pe.store).getEntityRecords)("root","taxonomy",{per_page:-1}))&&void 0!==n?n:[]).filter((function(e){return!!e})).filter((function(e){return e.visibility.public&&i.some((function(t){return e.types.includes(t)}))}))}))},To=function(e){return!!e},So=function(e){switch(e){case"category":case"product_cat":return"category";case"post_tag":case"product_tag":return"tag";default:return"archive"}},Io=function(e){switch(e){case"category":case"product_cat":return"{categories}";case"post_tag":case"product_tag":return"{tags}";default:return"{taxonomy:".concat(e,"}")}},No=function(){return No=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},No.apply(this,arguments)},Ao=function(e){var t=e.data,n=t.label,o=t.image,r=e.isFocused,i=e.isSelected,a=e.innerRef,l=e.innerProps;return s.createElement("div",No({ref:a,className:pt()({"nelio-content-target-option-in-profile-selector":!0,"nelio-content-target-option-in-profile-selector--is-focused":r,"nelio-content-target-option-in-profile-selector--is-selected":i})},l),s.createElement("div",{className:"nelio-content-target-option-in-profile-selector__icon-wrapper"},s.createElement("div",{className:"nelio-content-target-option-in-profile-selector__icon",style:{backgroundImage:"url(".concat(o||"",")")}})),s.createElement("div",{className:"nelio-content-target-option-in-profile-selector__label"},n))},Co=function(e){var t=e.network,n=e.profileId,o=e.targetName,r=e.onTargetChange,i=Po(n,t),a=i.targets,l=i.isLoadingTargets;if(!n||!a)return null;var d=(0,m.map)(a,(function(e){return{value:e.name,label:e.displayName,image:e.image}})),p=o?(0,m.find)(d,{value:o}):void 0;return s.createElement("div",{className:"nelio-content-social-profile-selector__targets"},s.createElement(c.StylizedSelectControl,{disabled:l,placeholder:l?(0,u._x)("Loading…","text","nelio-content"):(0,Ge.getTargetLabel)("selectTarget",t),options:d,value:p,onChange:function(e){return r(null==e?void 0:e.value)},components:{Option:Ao}}))},Po=function(e,t){return p((function(n){if(n(me.store),!e||!(0,Ge.doesNetworkSupport)("multi-target",t))return{};var o=(0,n(me.store).getTargetsInProfile)(e);return{isLoadingTargets:void 0===o,targets:o||[]}}))},Oo=function(){return Oo=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Oo.apply(this,arguments)},Ro=function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},Zo=function(e){var t=e.className,n=void 0===t?"":t,o=Do(),r=Lo(),i=r[0],a=r[1],l=(0,s.useState)("availability"),p=l[0],f=l[1],h=Vo(),v=h[0],g=h[1],y=$o(),_=y.isNewTemplate,b=y.templateType,x=Uo(null==v?void 0:v.groupId),E=qe(null==v?void 0:v.postType),k=qo(),w=k[0],T=k[1],S=(0,d.useDispatch)(Pe),I=S.closeTemplateEditor,N=S.receiveAutomationGroupTemplates,A=Bo();Fo();var C=Ve(null==v?void 0:v.postType);if((0,s.useEffect)((function(){x.length>1?f("postType"):C.length?f("taxonomy"):f(E?"author":"availability")}),[x.length,null==v?void 0:v.postType]),!o||!v||!C)return null;var P=function(){I(),a(!1)},O=v.text,R=v.network,Z=function(e){return g({text:e})};return s.createElement(Re.Modal,{className:"nelio-content-social-template-editor-dialog ".concat(n),title:w?Ko(_):Ho(_),isDismissible:!1,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,onRequestClose:function(){}},s.createElement(Co,{network:v.network,profileId:v.profileId,targetName:v.targetName,onTargetChange:function(e){return g({targetName:e})}}),s.createElement(Re.TextareaControl,{className:"nelio-content-social-template-editor-dialog__text",value:O,onChange:Z,placeholder:(0,u._x)("Write a template…","user","nelio-content")}),s.createElement("div",{className:"nelio-content-social-template-editor-dialog__quick-actions"},i?s.createElement(Mo,{className:"nelio-content-social-template-editor-dialog__tab-selector",tab:p,availableTabs:[x.length>1&&"postType",!!C.length&&"taxonomy",E&&"author","availability","attachment"],setTab:f}):s.createElement(Re.Button,{variant:"link",onClick:function(){return a(!0)}},(0,u._x)("Additional options","command","nelio-content")),s.createElement("div",{className:"nelio-content-social-template-editor-dialog__quick-action-spacer"}),_&&(0,Ge.doesNetworkSupport)("network-template",R)&&!(0,Ge.doesNetworkSupport)("multi-target",R)&&s.createElement(Re.Button,{className:pt()({"nelio-content-social-template-editor-dialog__quick-action":!0,"nelio-content-social-template-editor-dialog__quick-action--is-preview":!0,"nelio-content-social-template-editor-dialog__quick-action--is-toggled":w}),icon:(0,Ge.getNetworkIcon)(R),label:(0,u.sprintf)(/* translators: network name */ /* translators: network name */
(0,u._x)("Network template (available to all %s profiles)","text","nelio-content"),(0,Ge.getNetworkLabel)("name",R)),onClick:function(){return T(!w)}}),s.createElement(xo,{onClick:function(e){return function(e){return Z(/[^\s]$/.test(O)?"".concat(O," ").concat(e):"".concat(O).concat(e))}(e)}})),i&&s.createElement(Go,{type:p}),s.createElement("div",{className:"nelio-content-social-template-editor-dialog__buttons"},s.createElement(c.ContextualHelp,{context:"social-template-editor",walkthrough:_o,autostart:!0}),s.createElement("div",{className:"nelio-content-social-template-editor-dialog__default-buttons-wrapper"},s.createElement(Re.Button,{className:"nelio-content-social-template-editor-dialog__cancel-button",variant:"secondary",onClick:P},(0,u._x)("Cancel","command","nelio-content")),s.createElement(c.SaveButton,{className:"nelio-content-social-template-editor-dialog__save-button",variant:"primary",isUpdate:!_,error:A,onClick:function(){P(),N(b,Oo(Oo({},v),{taxonomies:(0,m.pick)(v.taxonomies,(0,m.map)(C,"slug")),profileId:w?void 0:v.profileId,targetName:w?void 0:v.targetName}))}}))))},Go=function(e){var t=e.type,n=Vo(),o=n[0],r=n[1],i=(0,me.usePostTypes)("social"),a=Ve(null==o?void 0:o.postType),l=Le(null==o?void 0:o.postType),d=p((function(e){return e(Pe).getEditingTemplateErrors()})),m=zo(null==o?void 0:o.attachment);if(!o||!d)return null;var h=o.author;if(!l)return s.createElement("div",{className:"nelio-content-social-template-editor-dialog__extra"},s.createElement(Re.Spinner,null));switch(t){case"postType":return s.createElement("div",{className:"nelio-content-social-template-editor-dialog__extra"},s.createElement(Re.SelectControl,{value:(null==o?void 0:o.postType)||"__nc-all",options:Ro([{value:"__nc-all",label:(0,u._x)("All Content","text","nelio-content")}],i.map((function(e){return{value:e.name,label:e.labels.plural||e.labels.singular||e.name}})),!0),onChange:function(e){return r("__nc-all"===e?{postType:void 0}:{postType:e})}}));case"taxonomy":return s.createElement("div",{className:"nelio-content-social-template-editor-dialog__extra"},a.map((function(e){return s.createElement(c.ItemSelectControl,{key:e.slug,error:d.taxonomies[e.slug],isSingle:!0,kind:"taxonomy",label:e.labels.singular_name,name:e.slug,value:o.taxonomies[e.slug],onChange:function(t){var n;return r({taxonomies:Wo(Oo(Oo({},o.taxonomies),(n={},n[e.slug]=t||void 0,n)))})}})})));case"author":return s.createElement("div",{className:"nelio-content-social-template-editor-dialog__extra"},s.createElement(c.ItemSelectControl,{isSingle:!0,error:d.author,kind:"author",label:(0,u._x)("Author","text","nelio-content"),value:h,onChange:function(e){return r({author:e})}}));case"availability":return s.createElement("div",{className:"nelio-content-social-template-editor-dialog__extra"},s.createElement(ho,null));case"attachment":return s.createElement("div",{className:"nelio-content-social-template-editor-dialog__extra"},s.createElement(Re.SelectControl,{options:[{label:(0,u._x)("Auto Image","text","nelio-content"),value:"auto-image"},{label:(0,u._x)("Text","text","nelio-content"),value:"none"},{label:(0,u._x)("Image","text","nelio-content"),value:"image"},"video"===(null==o?void 0:o.attachment)?{label:(0,u._x)("Video","text","nelio-content"),value:"video"}:void 0].filter(f.isDefined),value:(null==o?void 0:o.attachment)||"auto-image",onChange:function(e){return r({attachment:"auto-image"===e?void 0:e})},help:m}))}},jo={postType:{icon:"admin-post",title:(0,u._x)("Post Type","text","nelio-content")},taxonomy:{icon:"archive",title:(0,u._x)("Taxonomies","text","nelio-content")},author:{icon:"admin-users",title:(0,u._x)("Author","text","nelio-content")},availability:{icon:"calendar-alt",title:(0,u._x)("Availability","text","nelio-content")},attachment:{icon:"format-gallery",title:(0,u._x)("Media Requirements","text","nelio-content")}},Mo=function(e){var t=e.className,n=e.availableTabs,o=e.tab,r=e.setTab;return s.createElement(Re.Toolbar,{className:t,label:(0,u._x)("Settings","text","nelio-content")},n.filter((function(e){return!!e})).map((function(e){return s.createElement(Re.ToolbarButton,{key:e,className:"nelio-content-social-template-editor__".concat(e,"-action"),icon:jo[e].icon,title:jo[e].title,isActive:o===e,onClick:function(){return r(e)}})})))},Do=function(){return p((function(e){return e(Pe).isEditingTemplate()}))},Uo=function(e){var t=De(e);return(0,me.usePostTypes)("social").filter((function(e){return(0,f.isUniversalGroup)(t)||e.name===(null==t?void 0:t.postType)}))},Lo=function(){var e=Do(),t=Vo()[0],n=(0,s.useState)(!1),o=n[0],r=n[1];return(0,s.useEffect)((function(){r(!(!e||!(null==t?void 0:t.author)&&!(0,m.keys)(null==t?void 0:t.taxonomies).length&&!(null==t?void 0:t.availability)))}),[e]),[o,r]},Vo=function(){return[p((function(e){return e(Pe).getEditingTemplate()})),(0,d.useDispatch)(Pe).setEditingTemplateAttributes]},qo=function(){return[p((function(e){return e(Pe).isEditingNetworkTemplate()})),(0,d.useDispatch)(Pe).markAsNetworkTemplate]},$o=function(){return{isNewTemplate:p((function(e){return e(Pe).isEditingNewTemplate()})),templateType:p((function(e){return e(Pe).getEditingTemplateType()}))}},Bo=function(){var e=p((function(e){return e(Pe).getEditingTemplateErrors()}));return e.target||e.content||(e.author?e.author:(0,m.values)(e.taxonomies).some(Boolean)?(0,u._x)("Please review selected terms","user","nelio-content"):e.availability?(0,u._x)("Please review availability settings","user","nelio-content"):"")},Fo=function(){var e=Do(),t=Vo()[0],n=(0,d.useDispatch)(Pe).setEditingTemplateErrors,o=De(null==t?void 0:t.groupId),r=$e(o,t?[t]:[]);(0,s.useEffect)((function(){if(e&&(null==t?void 0:t.id)){var o=r[t.id];o&&n(o)}}),[e,JSON.stringify(r)])},zo=function(e){switch(e){case void 0:return(0,u._x)("Nelio Content may sometimes generate messages that share an image from related content","text","nelio-content");case"none":return(0,u._x)("Nelio Content won’t attach any images to messages generated using this template","text","nelio-content");case"image":return(0,u._x)("Nelio Content will only use this template if it can extract an image from shared content","text","nelio-content");case"video":return""}},Wo=function(e){return(0,m.keys)(e).reduce((function(t,n){var o;return e[n]?Oo(Oo({},t),((o={})[n]=e[n],o)):t}),{})},Ko=function(e){return e?(0,u._x)("New Network Template","text","nelio-content"):(0,u._x)("Edit Network Template","text","nelio-content")},Ho=function(e){return e?(0,u._x)("New Template","text","nelio-content"):(0,u._x)("Edit Template","text","nelio-content")};!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(_x){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),o={};for(const e of n)o[e]=t[e];return e.objectValues(o)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(mo||(mo={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(fo||(fo={}));const Jo=mo.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Yo=e=>{switch(typeof e){case"undefined":return Jo.undefined;case"string":return Jo.string;case"number":return isNaN(e)?Jo.nan:Jo.number;case"boolean":return Jo.boolean;case"function":return Jo.function;case"bigint":return Jo.bigint;case"symbol":return Jo.symbol;case"object":return Array.isArray(e)?Jo.array:null===e?Jo.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?Jo.promise:"undefined"!=typeof Map&&e instanceof Map?Jo.map:"undefined"!=typeof Set&&e instanceof Set?Jo.set:"undefined"!=typeof Date&&e instanceof Date?Jo.date:Jo.object;default:return Jo.unknown}},Xo=mo.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Qo extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},o=e=>{for(const r of e.issues)if("invalid_union"===r.code)r.unionErrors.map(o);else if("invalid_return_type"===r.code)o(r.returnTypeError);else if("invalid_arguments"===r.code)o(r.argumentsError);else if(0===r.path.length)n._errors.push(t(r));else{let e=n,o=0;for(;o<r.path.length;){const n=r.path[o];o===r.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(r))):e[n]=e[n]||{_errors:[]},e=e[n],o++}}};return o(this),n}static assert(e){if(!(e instanceof Qo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,mo.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const o of this.issues)o.path.length>0?(t[o.path[0]]=t[o.path[0]]||[],t[o.path[0]].push(e(o))):n.push(e(o));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Qo.create=e=>new Qo(e);const er=(e,t)=>{let n;switch(e.code){case Xo.invalid_type:n=e.received===Jo.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case Xo.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,mo.jsonStringifyReplacer)}`;break;case Xo.unrecognized_keys:n=`Unrecognized key(s) in object: ${mo.joinValues(e.keys,", ")}`;break;case Xo.invalid_union:n="Invalid input";break;case Xo.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${mo.joinValues(e.options)}`;break;case Xo.invalid_enum_value:n=`Invalid enum value. Expected ${mo.joinValues(e.options)}, received '${e.received}'`;break;case Xo.invalid_arguments:n="Invalid function arguments";break;case Xo.invalid_return_type:n="Invalid function return type";break;case Xo.invalid_date:n="Invalid date";break;case Xo.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:mo.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case Xo.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case Xo.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case Xo.custom:n="Invalid input";break;case Xo.invalid_intersection_types:n="Intersection results could not be merged";break;case Xo.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Xo.not_finite:n="Number must be finite";break;default:n=t.defaultError,mo.assertNever(e)}return{message:n}};let tr=er;function nr(){return tr}const or=e=>{const{data:t,path:n,errorMaps:o,issueData:r}=e,i=[...n,...r.path||[]],a={...r,path:i};if(void 0!==r.message)return{...r,path:i,message:r.message};let s="";const l=o.filter((e=>!!e)).slice().reverse();for(const e of l)s=e(a,{data:t,defaultError:s}).message;return{...r,path:i,message:s}};function rr(e,t){const n=nr(),o=or({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===er?void 0:er].filter((e=>!!e))});e.common.issues.push(o)}class ir{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const o of t){if("aborted"===o.status)return ar;"dirty"===o.status&&e.dirty(),n.push(o.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t){const t=await e.key,o=await e.value;n.push({key:t,value:o})}return ir.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const o of t){const{key:t,value:r}=o;if("aborted"===t.status)return ar;if("aborted"===r.status)return ar;"dirty"===t.status&&e.dirty(),"dirty"===r.status&&e.dirty(),"__proto__"===t.value||void 0===r.value&&!o.alwaysSet||(n[t.value]=r.value)}return{status:e.value,value:n}}}const ar=Object.freeze({status:"aborted"}),sr=e=>({status:"dirty",value:e}),lr=e=>({status:"valid",value:e}),ur=e=>"aborted"===e.status,cr=e=>"dirty"===e.status,dr=e=>"valid"===e.status,pr=e=>"undefined"!=typeof Promise&&e instanceof Promise;function mr(e,t,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:t.get(e)}function fr(e,t,n,o,r){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?r.call(e,n):r?r.value=n:t.set(e,n),n}var hr,vr,gr;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(hr||(hr={}));class yr{constructor(e,t,n,o){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=o}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const _r=(e,t)=>{if(dr(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Qo(e.common.issues);return this._error=t,this._error}}};function br(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:o,description:r}=e;if(t&&(n||o))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:r}:{errorMap:(t,r)=>{var i,a;const{message:s}=e;return"invalid_enum_value"===t.code?{message:null!=s?s:r.defaultError}:void 0===r.data?{message:null!==(i=null!=s?s:o)&&void 0!==i?i:r.defaultError}:"invalid_type"!==t.code?{message:r.defaultError}:{message:null!==(a=null!=s?s:n)&&void 0!==a?a:r.defaultError}},description:r}}class xr{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Yo(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Yo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ir,ctx:{common:e.parent.common,data:e.data,parsedType:Yo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(pr(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const o={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Yo(e)},r=this._parseSync({data:e,path:o.path,parent:o});return _r(o,r)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Yo(e)},o=this._parse({data:e,path:n.path,parent:n}),r=await(pr(o)?o:Promise.resolve(o));return _r(n,r)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,o)=>{const r=e(t),i=()=>o.addIssue({code:Xo.custom,...n(t)});return"undefined"!=typeof Promise&&r instanceof Promise?r.then((e=>!!e||(i(),!1))):!!r||(i(),!1)}))}refinement(e,t){return this._refinement(((n,o)=>!!e(n)||(o.addIssue("function"==typeof t?t(n,o):t),!1)))}_refinement(e){return new hi({schema:this,typeName:Ii.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return vi.create(this,this._def)}nullable(){return gi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Jr.create(this,this._def)}promise(){return fi.create(this,this._def)}or(e){return Qr.create([this,e],this._def)}and(e){return oi.create(this,e,this._def)}transform(e){return new hi({...br(this._def),schema:this,typeName:Ii.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new yi({...br(this._def),innerType:this,defaultValue:t,typeName:Ii.ZodDefault})}brand(){return new Ei({typeName:Ii.ZodBranded,type:this,...br(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new _i({...br(this._def),innerType:this,catchValue:t,typeName:Ii.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return ki.create(this,e)}readonly(){return wi.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Er=/^c[^\s-]{8,}$/i,kr=/^[0-9a-z]+$/,wr=/^[0-9A-HJKMNP-TV-Z]{26}$/,Tr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Sr=/^[a-z0-9_-]{21}$/i,Ir=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Nr=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Ar;const Cr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Pr=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Or=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Rr="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Zr=new RegExp(`^${Rr}$`);function Gr(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function jr(e){let t=`${Rr}T${Gr(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}class Mr extends xr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Jo.string){const t=this._getOrReturnCtx(e);return rr(t,{code:Xo.invalid_type,expected:Jo.string,received:t.parsedType}),ar}const t=new ir;let n;for(const i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),rr(n,{code:Xo.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("max"===i.kind)e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),rr(n,{code:Xo.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("length"===i.kind){const o=e.data.length>i.value,r=e.data.length<i.value;(o||r)&&(n=this._getOrReturnCtx(e,n),o?rr(n,{code:Xo.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):r&&rr(n,{code:Xo.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),t.dirty())}else if("email"===i.kind)Nr.test(e.data)||(n=this._getOrReturnCtx(e,n),rr(n,{validation:"email",code:Xo.invalid_string,message:i.message}),t.dirty());else if("emoji"===i.kind)Ar||(Ar=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ar.test(e.data)||(n=this._getOrReturnCtx(e,n),rr(n,{validation:"emoji",code:Xo.invalid_string,message:i.message}),t.dirty());else if("uuid"===i.kind)Tr.test(e.data)||(n=this._getOrReturnCtx(e,n),rr(n,{validation:"uuid",code:Xo.invalid_string,message:i.message}),t.dirty());else if("nanoid"===i.kind)Sr.test(e.data)||(n=this._getOrReturnCtx(e,n),rr(n,{validation:"nanoid",code:Xo.invalid_string,message:i.message}),t.dirty());else if("cuid"===i.kind)Er.test(e.data)||(n=this._getOrReturnCtx(e,n),rr(n,{validation:"cuid",code:Xo.invalid_string,message:i.message}),t.dirty());else if("cuid2"===i.kind)kr.test(e.data)||(n=this._getOrReturnCtx(e,n),rr(n,{validation:"cuid2",code:Xo.invalid_string,message:i.message}),t.dirty());else if("ulid"===i.kind)wr.test(e.data)||(n=this._getOrReturnCtx(e,n),rr(n,{validation:"ulid",code:Xo.invalid_string,message:i.message}),t.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(o){n=this._getOrReturnCtx(e,n),rr(n,{validation:"url",code:Xo.invalid_string,message:i.message}),t.dirty()}else"regex"===i.kind?(i.regex.lastIndex=0,i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),rr(n,{validation:"regex",code:Xo.invalid_string,message:i.message}),t.dirty())):"trim"===i.kind?e.data=e.data.trim():"includes"===i.kind?e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),rr(n,{code:Xo.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),t.dirty()):"toLowerCase"===i.kind?e.data=e.data.toLowerCase():"toUpperCase"===i.kind?e.data=e.data.toUpperCase():"startsWith"===i.kind?e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),rr(n,{code:Xo.invalid_string,validation:{startsWith:i.value},message:i.message}),t.dirty()):"endsWith"===i.kind?e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),rr(n,{code:Xo.invalid_string,validation:{endsWith:i.value},message:i.message}),t.dirty()):"datetime"===i.kind?jr(i).test(e.data)||(n=this._getOrReturnCtx(e,n),rr(n,{code:Xo.invalid_string,validation:"datetime",message:i.message}),t.dirty()):"date"===i.kind?Zr.test(e.data)||(n=this._getOrReturnCtx(e,n),rr(n,{code:Xo.invalid_string,validation:"date",message:i.message}),t.dirty()):"time"===i.kind?new RegExp(`^${Gr(i)}$`).test(e.data)||(n=this._getOrReturnCtx(e,n),rr(n,{code:Xo.invalid_string,validation:"time",message:i.message}),t.dirty()):"duration"===i.kind?Ir.test(e.data)||(n=this._getOrReturnCtx(e,n),rr(n,{validation:"duration",code:Xo.invalid_string,message:i.message}),t.dirty()):"ip"===i.kind?(o=e.data,("v4"!==(r=i.version)&&r||!Cr.test(o))&&("v6"!==r&&r||!Pr.test(o))&&(n=this._getOrReturnCtx(e,n),rr(n,{validation:"ip",code:Xo.invalid_string,message:i.message}),t.dirty())):"base64"===i.kind?Or.test(e.data)||(n=this._getOrReturnCtx(e,n),rr(n,{validation:"base64",code:Xo.invalid_string,message:i.message}),t.dirty()):mo.assertNever(i);var o,r;return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:Xo.invalid_string,...hr.errToObj(n)})}_addCheck(e){return new Mr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...hr.errToObj(e)})}url(e){return this._addCheck({kind:"url",...hr.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...hr.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...hr.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...hr.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...hr.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...hr.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...hr.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...hr.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...hr.errToObj(e)})}datetime(e){var t,n;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null==e?void 0:e.local)&&void 0!==n&&n,...hr.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...hr.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...hr.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...hr.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...hr.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...hr.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...hr.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...hr.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...hr.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...hr.errToObj(t)})}nonempty(e){return this.min(1,hr.errToObj(e))}trim(){return new Mr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Mr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Mr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Dr(e,t){const n=(e.toString().split(".")[1]||"").length,o=(t.toString().split(".")[1]||"").length,r=n>o?n:o;return parseInt(e.toFixed(r).replace(".",""))%parseInt(t.toFixed(r).replace(".",""))/Math.pow(10,r)}Mr.create=e=>{var t;return new Mr({checks:[],typeName:Ii.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...br(e)})};class Ur extends xr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Jo.number){const t=this._getOrReturnCtx(e);return rr(t,{code:Xo.invalid_type,expected:Jo.number,received:t.parsedType}),ar}let t;const n=new ir;for(const o of this._def.checks)"int"===o.kind?mo.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),rr(t,{code:Xo.invalid_type,expected:"integer",received:"float",message:o.message}),n.dirty()):"min"===o.kind?(o.inclusive?e.data<o.value:e.data<=o.value)&&(t=this._getOrReturnCtx(e,t),rr(t,{code:Xo.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),n.dirty()):"max"===o.kind?(o.inclusive?e.data>o.value:e.data>=o.value)&&(t=this._getOrReturnCtx(e,t),rr(t,{code:Xo.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),n.dirty()):"multipleOf"===o.kind?0!==Dr(e.data,o.value)&&(t=this._getOrReturnCtx(e,t),rr(t,{code:Xo.not_multiple_of,multipleOf:o.value,message:o.message}),n.dirty()):"finite"===o.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),rr(t,{code:Xo.not_finite,message:o.message}),n.dirty()):mo.assertNever(o);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,hr.toString(t))}gt(e,t){return this.setLimit("min",e,!1,hr.toString(t))}lte(e,t){return this.setLimit("max",e,!0,hr.toString(t))}lt(e,t){return this.setLimit("max",e,!1,hr.toString(t))}setLimit(e,t,n,o){return new Ur({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:hr.toString(o)}]})}_addCheck(e){return new Ur({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:hr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:hr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:hr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:hr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:hr.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:hr.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:hr.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:hr.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:hr.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&mo.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ur.create=e=>new Ur({checks:[],typeName:Ii.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...br(e)});class Lr extends xr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Jo.bigint){const t=this._getOrReturnCtx(e);return rr(t,{code:Xo.invalid_type,expected:Jo.bigint,received:t.parsedType}),ar}let t;const n=new ir;for(const o of this._def.checks)"min"===o.kind?(o.inclusive?e.data<o.value:e.data<=o.value)&&(t=this._getOrReturnCtx(e,t),rr(t,{code:Xo.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty()):"max"===o.kind?(o.inclusive?e.data>o.value:e.data>=o.value)&&(t=this._getOrReturnCtx(e,t),rr(t,{code:Xo.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty()):"multipleOf"===o.kind?e.data%o.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),rr(t,{code:Xo.not_multiple_of,multipleOf:o.value,message:o.message}),n.dirty()):mo.assertNever(o);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,hr.toString(t))}gt(e,t){return this.setLimit("min",e,!1,hr.toString(t))}lte(e,t){return this.setLimit("max",e,!0,hr.toString(t))}lt(e,t){return this.setLimit("max",e,!1,hr.toString(t))}setLimit(e,t,n,o){return new Lr({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:hr.toString(o)}]})}_addCheck(e){return new Lr({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:hr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:hr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:hr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:hr.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:hr.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Lr.create=e=>{var t;return new Lr({checks:[],typeName:Ii.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...br(e)})};class Vr extends xr{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==Jo.boolean){const t=this._getOrReturnCtx(e);return rr(t,{code:Xo.invalid_type,expected:Jo.boolean,received:t.parsedType}),ar}return lr(e.data)}}Vr.create=e=>new Vr({typeName:Ii.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...br(e)});class qr extends xr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Jo.date){const t=this._getOrReturnCtx(e);return rr(t,{code:Xo.invalid_type,expected:Jo.date,received:t.parsedType}),ar}if(isNaN(e.data.getTime()))return rr(this._getOrReturnCtx(e),{code:Xo.invalid_date}),ar;const t=new ir;let n;for(const o of this._def.checks)"min"===o.kind?e.data.getTime()<o.value&&(n=this._getOrReturnCtx(e,n),rr(n,{code:Xo.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),t.dirty()):"max"===o.kind?e.data.getTime()>o.value&&(n=this._getOrReturnCtx(e,n),rr(n,{code:Xo.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),t.dirty()):mo.assertNever(o);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new qr({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:hr.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:hr.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}qr.create=e=>new qr({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Ii.ZodDate,...br(e)});class $r extends xr{_parse(e){if(this._getType(e)!==Jo.symbol){const t=this._getOrReturnCtx(e);return rr(t,{code:Xo.invalid_type,expected:Jo.symbol,received:t.parsedType}),ar}return lr(e.data)}}$r.create=e=>new $r({typeName:Ii.ZodSymbol,...br(e)});class Br extends xr{_parse(e){if(this._getType(e)!==Jo.undefined){const t=this._getOrReturnCtx(e);return rr(t,{code:Xo.invalid_type,expected:Jo.undefined,received:t.parsedType}),ar}return lr(e.data)}}Br.create=e=>new Br({typeName:Ii.ZodUndefined,...br(e)});class Fr extends xr{_parse(e){if(this._getType(e)!==Jo.null){const t=this._getOrReturnCtx(e);return rr(t,{code:Xo.invalid_type,expected:Jo.null,received:t.parsedType}),ar}return lr(e.data)}}Fr.create=e=>new Fr({typeName:Ii.ZodNull,...br(e)});class zr extends xr{constructor(){super(...arguments),this._any=!0}_parse(e){return lr(e.data)}}zr.create=e=>new zr({typeName:Ii.ZodAny,...br(e)});class Wr extends xr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return lr(e.data)}}Wr.create=e=>new Wr({typeName:Ii.ZodUnknown,...br(e)});class Kr extends xr{_parse(e){const t=this._getOrReturnCtx(e);return rr(t,{code:Xo.invalid_type,expected:Jo.never,received:t.parsedType}),ar}}Kr.create=e=>new Kr({typeName:Ii.ZodNever,...br(e)});class Hr extends xr{_parse(e){if(this._getType(e)!==Jo.undefined){const t=this._getOrReturnCtx(e);return rr(t,{code:Xo.invalid_type,expected:Jo.void,received:t.parsedType}),ar}return lr(e.data)}}Hr.create=e=>new Hr({typeName:Ii.ZodVoid,...br(e)});class Jr extends xr{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),o=this._def;if(t.parsedType!==Jo.array)return rr(t,{code:Xo.invalid_type,expected:Jo.array,received:t.parsedType}),ar;if(null!==o.exactLength){const e=t.data.length>o.exactLength.value,r=t.data.length<o.exactLength.value;(e||r)&&(rr(t,{code:e?Xo.too_big:Xo.too_small,minimum:r?o.exactLength.value:void 0,maximum:e?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),n.dirty())}if(null!==o.minLength&&t.data.length<o.minLength.value&&(rr(t,{code:Xo.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),n.dirty()),null!==o.maxLength&&t.data.length>o.maxLength.value&&(rr(t,{code:Xo.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>o.type._parseAsync(new yr(t,e,t.path,n))))).then((e=>ir.mergeArray(n,e)));const r=[...t.data].map(((e,n)=>o.type._parseSync(new yr(t,e,t.path,n))));return ir.mergeArray(n,r)}get element(){return this._def.type}min(e,t){return new Jr({...this._def,minLength:{value:e,message:hr.toString(t)}})}max(e,t){return new Jr({...this._def,maxLength:{value:e,message:hr.toString(t)}})}length(e,t){return new Jr({...this._def,exactLength:{value:e,message:hr.toString(t)}})}nonempty(e){return this.min(1,e)}}function Yr(e){if(e instanceof Xr){const t={};for(const n in e.shape){const o=e.shape[n];t[n]=vi.create(Yr(o))}return new Xr({...e._def,shape:()=>t})}return e instanceof Jr?new Jr({...e._def,type:Yr(e.element)}):e instanceof vi?vi.create(Yr(e.unwrap())):e instanceof gi?gi.create(Yr(e.unwrap())):e instanceof ri?ri.create(e.items.map((e=>Yr(e)))):e}Jr.create=(e,t)=>new Jr({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ii.ZodArray,...br(t)});class Xr extends xr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=mo.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Jo.object){const t=this._getOrReturnCtx(e);return rr(t,{code:Xo.invalid_type,expected:Jo.object,received:t.parsedType}),ar}const{status:t,ctx:n}=this._processInputParams(e),{shape:o,keys:r}=this._getCached(),i=[];if(!(this._def.catchall instanceof Kr&&"strip"===this._def.unknownKeys))for(const e in n.data)r.includes(e)||i.push(e);const a=[];for(const e of r){const t=o[e],r=n.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new yr(n,r,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof Kr){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of i)a.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)i.length>0&&(rr(n,{code:Xo.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of i){const o=n.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new yr(n,o,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of a){const n=await t.key,o=await t.value;e.push({key:n,value:o,alwaysSet:t.alwaysSet})}return e})).then((e=>ir.mergeObjectSync(t,e))):ir.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return hr.errToObj,new Xr({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var o,r,i,a;const s=null!==(i=null===(r=(o=this._def).errorMap)||void 0===r?void 0:r.call(o,t,n).message)&&void 0!==i?i:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=hr.errToObj(e).message)&&void 0!==a?a:s}:{message:s}}}:{}})}strip(){return new Xr({...this._def,unknownKeys:"strip"})}passthrough(){return new Xr({...this._def,unknownKeys:"passthrough"})}extend(e){return new Xr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Xr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ii.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Xr({...this._def,catchall:e})}pick(e){const t={};return mo.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new Xr({...this._def,shape:()=>t})}omit(e){const t={};return mo.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new Xr({...this._def,shape:()=>t})}deepPartial(){return Yr(this)}partial(e){const t={};return mo.objectKeys(this.shape).forEach((n=>{const o=this.shape[n];e&&!e[n]?t[n]=o:t[n]=o.optional()})),new Xr({...this._def,shape:()=>t})}required(e){const t={};return mo.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof vi;)e=e._def.innerType;t[n]=e}})),new Xr({...this._def,shape:()=>t})}keyof(){return di(mo.objectKeys(this.shape))}}Xr.create=(e,t)=>new Xr({shape:()=>e,unknownKeys:"strip",catchall:Kr.create(),typeName:Ii.ZodObject,...br(t)}),Xr.strictCreate=(e,t)=>new Xr({shape:()=>e,unknownKeys:"strict",catchall:Kr.create(),typeName:Ii.ZodObject,...br(t)}),Xr.lazycreate=(e,t)=>new Xr({shape:e,unknownKeys:"strip",catchall:Kr.create(),typeName:Ii.ZodObject,...br(t)});class Qr extends xr{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new Qo(e.ctx.common.issues)));return rr(t,{code:Xo.invalid_union,unionErrors:n}),ar}));{let e;const o=[];for(const r of n){const n={...t,common:{...t.common,issues:[]},parent:null},i=r._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&o.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const r=o.map((e=>new Qo(e)));return rr(t,{code:Xo.invalid_union,unionErrors:r}),ar}}get options(){return this._def.options}}Qr.create=(e,t)=>new Qr({options:e,typeName:Ii.ZodUnion,...br(t)});const ei=e=>e instanceof ui?ei(e.schema):e instanceof hi?ei(e.innerType()):e instanceof ci?[e.value]:e instanceof pi?e.options:e instanceof mi?mo.objectValues(e.enum):e instanceof yi?ei(e._def.innerType):e instanceof Br?[void 0]:e instanceof Fr?[null]:e instanceof vi?[void 0,...ei(e.unwrap())]:e instanceof gi?[null,...ei(e.unwrap())]:e instanceof Ei||e instanceof wi?ei(e.unwrap()):e instanceof _i?ei(e._def.innerType):[];class ti extends xr{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Jo.object)return rr(t,{code:Xo.invalid_type,expected:Jo.object,received:t.parsedType}),ar;const n=this.discriminator,o=t.data[n],r=this.optionsMap.get(o);return r?t.common.async?r._parseAsync({data:t.data,path:t.path,parent:t}):r._parseSync({data:t.data,path:t.path,parent:t}):(rr(t,{code:Xo.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ar)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const o=new Map;for(const n of t){const t=ei(n.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const r of t){if(o.has(r))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(r)}`);o.set(r,n)}}return new ti({typeName:Ii.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:o,...br(n)})}}function ni(e,t){const n=Yo(e),o=Yo(t);if(e===t)return{valid:!0,data:e};if(n===Jo.object&&o===Jo.object){const n=mo.objectKeys(t),o=mo.objectKeys(e).filter((e=>-1!==n.indexOf(e))),r={...e,...t};for(const n of o){const o=ni(e[n],t[n]);if(!o.valid)return{valid:!1};r[n]=o.data}return{valid:!0,data:r}}if(n===Jo.array&&o===Jo.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let o=0;o<e.length;o++){const r=ni(e[o],t[o]);if(!r.valid)return{valid:!1};n.push(r.data)}return{valid:!0,data:n}}return n===Jo.date&&o===Jo.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class oi extends xr{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),o=(e,o)=>{if(ur(e)||ur(o))return ar;const r=ni(e.value,o.value);return r.valid?((cr(e)||cr(o))&&t.dirty(),{status:t.value,value:r.data}):(rr(n,{code:Xo.invalid_intersection_types}),ar)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>o(e,t))):o(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}oi.create=(e,t,n)=>new oi({left:e,right:t,typeName:Ii.ZodIntersection,...br(n)});class ri extends xr{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Jo.array)return rr(n,{code:Xo.invalid_type,expected:Jo.array,received:n.parsedType}),ar;if(n.data.length<this._def.items.length)return rr(n,{code:Xo.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ar;!this._def.rest&&n.data.length>this._def.items.length&&(rr(n,{code:Xo.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const o=[...n.data].map(((e,t)=>{const o=this._def.items[t]||this._def.rest;return o?o._parse(new yr(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(o).then((e=>ir.mergeArray(t,e))):ir.mergeArray(t,o)}get items(){return this._def.items}rest(e){return new ri({...this._def,rest:e})}}ri.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ri({items:e,typeName:Ii.ZodTuple,rest:null,...br(t)})};class ii extends xr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Jo.object)return rr(n,{code:Xo.invalid_type,expected:Jo.object,received:n.parsedType}),ar;const o=[],r=this._def.keyType,i=this._def.valueType;for(const e in n.data)o.push({key:r._parse(new yr(n,e,n.path,e)),value:i._parse(new yr(n,n.data[e],n.path,e)),alwaysSet:e in n.data});return n.common.async?ir.mergeObjectAsync(t,o):ir.mergeObjectSync(t,o)}get element(){return this._def.valueType}static create(e,t,n){return new ii(t instanceof xr?{keyType:e,valueType:t,typeName:Ii.ZodRecord,...br(n)}:{keyType:Mr.create(),valueType:e,typeName:Ii.ZodRecord,...br(t)})}}class ai extends xr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Jo.map)return rr(n,{code:Xo.invalid_type,expected:Jo.map,received:n.parsedType}),ar;const o=this._def.keyType,r=this._def.valueType,i=[...n.data.entries()].map((([e,t],i)=>({key:o._parse(new yr(n,e,n.path,[i,"key"])),value:r._parse(new yr(n,t,n.path,[i,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of i){const o=await n.key,r=await n.value;if("aborted"===o.status||"aborted"===r.status)return ar;"dirty"!==o.status&&"dirty"!==r.status||t.dirty(),e.set(o.value,r.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of i){const o=n.key,r=n.value;if("aborted"===o.status||"aborted"===r.status)return ar;"dirty"!==o.status&&"dirty"!==r.status||t.dirty(),e.set(o.value,r.value)}return{status:t.value,value:e}}}}ai.create=(e,t,n)=>new ai({valueType:t,keyType:e,typeName:Ii.ZodMap,...br(n)});class si extends xr{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Jo.set)return rr(n,{code:Xo.invalid_type,expected:Jo.set,received:n.parsedType}),ar;const o=this._def;null!==o.minSize&&n.data.size<o.minSize.value&&(rr(n,{code:Xo.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),t.dirty()),null!==o.maxSize&&n.data.size>o.maxSize.value&&(rr(n,{code:Xo.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),t.dirty());const r=this._def.valueType;function i(e){const n=new Set;for(const o of e){if("aborted"===o.status)return ar;"dirty"===o.status&&t.dirty(),n.add(o.value)}return{status:t.value,value:n}}const a=[...n.data.values()].map(((e,t)=>r._parse(new yr(n,e,n.path,t))));return n.common.async?Promise.all(a).then((e=>i(e))):i(a)}min(e,t){return new si({...this._def,minSize:{value:e,message:hr.toString(t)}})}max(e,t){return new si({...this._def,maxSize:{value:e,message:hr.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}si.create=(e,t)=>new si({valueType:e,minSize:null,maxSize:null,typeName:Ii.ZodSet,...br(t)});class li extends xr{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Jo.function)return rr(t,{code:Xo.invalid_type,expected:Jo.function,received:t.parsedType}),ar;function n(e,n){return or({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,nr(),er].filter((e=>!!e)),issueData:{code:Xo.invalid_arguments,argumentsError:n}})}function o(e,n){return or({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,nr(),er].filter((e=>!!e)),issueData:{code:Xo.invalid_return_type,returnTypeError:n}})}const r={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof fi){const e=this;return lr((async function(...t){const a=new Qo([]),s=await e._def.args.parseAsync(t,r).catch((e=>{throw a.addIssue(n(t,e)),a})),l=await Reflect.apply(i,this,s);return await e._def.returns._def.type.parseAsync(l,r).catch((e=>{throw a.addIssue(o(l,e)),a}))}))}{const e=this;return lr((function(...t){const a=e._def.args.safeParse(t,r);if(!a.success)throw new Qo([n(t,a.error)]);const s=Reflect.apply(i,this,a.data),l=e._def.returns.safeParse(s,r);if(!l.success)throw new Qo([o(s,l.error)]);return l.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new li({...this._def,args:ri.create(e).rest(Wr.create())})}returns(e){return new li({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new li({args:e||ri.create([]).rest(Wr.create()),returns:t||Wr.create(),typeName:Ii.ZodFunction,...br(n)})}}class ui extends xr{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ui.create=(e,t)=>new ui({getter:e,typeName:Ii.ZodLazy,...br(t)});class ci extends xr{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return rr(t,{received:t.data,code:Xo.invalid_literal,expected:this._def.value}),ar}return{status:"valid",value:e.data}}get value(){return this._def.value}}function di(e,t){return new pi({values:e,typeName:Ii.ZodEnum,...br(t)})}ci.create=(e,t)=>new ci({value:e,typeName:Ii.ZodLiteral,...br(t)});class pi extends xr{constructor(){super(...arguments),vr.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return rr(t,{expected:mo.joinValues(n),received:t.parsedType,code:Xo.invalid_type}),ar}if(mr(this,vr,"f")||fr(this,vr,new Set(this._def.values),"f"),!mr(this,vr,"f").has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return rr(t,{received:t.data,code:Xo.invalid_enum_value,options:n}),ar}return lr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return pi.create(e,{...this._def,...t})}exclude(e,t=this._def){return pi.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}vr=new WeakMap,pi.create=di;class mi extends xr{constructor(){super(...arguments),gr.set(this,void 0)}_parse(e){const t=mo.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Jo.string&&n.parsedType!==Jo.number){const e=mo.objectValues(t);return rr(n,{expected:mo.joinValues(e),received:n.parsedType,code:Xo.invalid_type}),ar}if(mr(this,gr,"f")||fr(this,gr,new Set(mo.getValidEnumValues(this._def.values)),"f"),!mr(this,gr,"f").has(e.data)){const e=mo.objectValues(t);return rr(n,{received:n.data,code:Xo.invalid_enum_value,options:e}),ar}return lr(e.data)}get enum(){return this._def.values}}gr=new WeakMap,mi.create=(e,t)=>new mi({values:e,typeName:Ii.ZodNativeEnum,...br(t)});class fi extends xr{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Jo.promise&&!1===t.common.async)return rr(t,{code:Xo.invalid_type,expected:Jo.promise,received:t.parsedType}),ar;const n=t.parsedType===Jo.promise?t.data:Promise.resolve(t.data);return lr(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}fi.create=(e,t)=>new fi({type:e,typeName:Ii.ZodPromise,...br(t)});class hi extends xr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ii.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),o=this._def.effect||null,r={addIssue:e=>{rr(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(r.addIssue=r.addIssue.bind(r),"preprocess"===o.type){const e=o.transform(n.data,r);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return ar;const o=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===o.status?ar:"dirty"===o.status||"dirty"===t.value?sr(o.value):o}));{if("aborted"===t.value)return ar;const o=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===o.status?ar:"dirty"===o.status||"dirty"===t.value?sr(o.value):o}}if("refinement"===o.type){const e=e=>{const t=o.refinement(e,r);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===o.status?ar:("dirty"===o.status&&t.dirty(),e(o.value),{status:t.value,value:o.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?ar:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===o.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!dr(e))return e;const i=o.transform(e.value,r);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>dr(e)?Promise.resolve(o.transform(e.value,r)).then((e=>({status:t.value,value:e}))):e))}mo.assertNever(o)}}hi.create=(e,t,n)=>new hi({schema:e,typeName:Ii.ZodEffects,effect:t,...br(n)}),hi.createWithPreprocess=(e,t,n)=>new hi({schema:t,effect:{type:"preprocess",transform:e},typeName:Ii.ZodEffects,...br(n)});class vi extends xr{_parse(e){return this._getType(e)===Jo.undefined?lr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}vi.create=(e,t)=>new vi({innerType:e,typeName:Ii.ZodOptional,...br(t)});class gi extends xr{_parse(e){return this._getType(e)===Jo.null?lr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}gi.create=(e,t)=>new gi({innerType:e,typeName:Ii.ZodNullable,...br(t)});class yi extends xr{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===Jo.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}yi.create=(e,t)=>new yi({innerType:e,typeName:Ii.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...br(t)});class _i extends xr{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},o=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return pr(o)?o.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new Qo(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===o.status?o.value:this._def.catchValue({get error(){return new Qo(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}_i.create=(e,t)=>new _i({innerType:e,typeName:Ii.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...br(t)});class bi extends xr{_parse(e){if(this._getType(e)!==Jo.nan){const t=this._getOrReturnCtx(e);return rr(t,{code:Xo.invalid_type,expected:Jo.nan,received:t.parsedType}),ar}return{status:"valid",value:e.data}}}bi.create=e=>new bi({typeName:Ii.ZodNaN,...br(e)});const xi=Symbol("zod_brand");class Ei extends xr{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class ki extends xr{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?ar:"dirty"===e.status?(t.dirty(),sr(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})();{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?ar:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new ki({in:e,out:t,typeName:Ii.ZodPipeline})}}class wi extends xr{_parse(e){const t=this._def.innerType._parse(e),n=e=>(dr(e)&&(e.value=Object.freeze(e.value)),e);return pr(t)?t.then((e=>n(e))):n(t)}unwrap(){return this._def.innerType}}function Ti(e,t={},n){return e?zr.create().superRefine(((o,r)=>{var i,a;if(!e(o)){const e="function"==typeof t?t(o):"string"==typeof t?{message:t}:t,s=null===(a=null!==(i=e.fatal)&&void 0!==i?i:n)||void 0===a||a,l="string"==typeof e?{message:e}:e;r.addIssue({code:"custom",...l,fatal:s})}})):zr.create()}wi.create=(e,t)=>new wi({innerType:e,typeName:Ii.ZodReadonly,...br(t)});const Si={object:Xr.lazycreate};var Ii;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Ii||(Ii={}));const Ni=Mr.create,Ai=Ur.create,Ci=bi.create,Pi=Lr.create,Oi=Vr.create,Ri=qr.create,Zi=$r.create,Gi=Br.create,ji=Fr.create,Mi=zr.create,Di=Wr.create,Ui=Kr.create,Li=Hr.create,Vi=Jr.create,qi=Xr.create,$i=Xr.strictCreate,Bi=Qr.create,Fi=ti.create,zi=oi.create,Wi=ri.create,Ki=ii.create,Hi=ai.create,Ji=si.create,Yi=li.create,Xi=ui.create,Qi=ci.create,ea=pi.create,ta=mi.create,na=fi.create,oa=hi.create,ra=vi.create,ia=gi.create,aa=hi.createWithPreprocess,sa=ki.create,la={string:e=>Mr.create({...e,coerce:!0}),number:e=>Ur.create({...e,coerce:!0}),boolean:e=>Vr.create({...e,coerce:!0}),bigint:e=>Lr.create({...e,coerce:!0}),date:e=>qr.create({...e,coerce:!0})},ua=ar;var ca=Object.freeze({__proto__:null,defaultErrorMap:er,setErrorMap:function(e){tr=e},getErrorMap:nr,makeIssue:or,EMPTY_PATH:[],addIssueToContext:rr,ParseStatus:ir,INVALID:ar,DIRTY:sr,OK:lr,isAborted:ur,isDirty:cr,isValid:dr,isAsync:pr,get util(){return mo},get objectUtil(){return fo},ZodParsedType:Jo,getParsedType:Yo,ZodType:xr,datetimeRegex:jr,ZodString:Mr,ZodNumber:Ur,ZodBigInt:Lr,ZodBoolean:Vr,ZodDate:qr,ZodSymbol:$r,ZodUndefined:Br,ZodNull:Fr,ZodAny:zr,ZodUnknown:Wr,ZodNever:Kr,ZodVoid:Hr,ZodArray:Jr,ZodObject:Xr,ZodUnion:Qr,ZodDiscriminatedUnion:ti,ZodIntersection:oi,ZodTuple:ri,ZodRecord:ii,ZodMap:ai,ZodSet:si,ZodFunction:li,ZodLazy:ui,ZodLiteral:ci,ZodEnum:pi,ZodNativeEnum:mi,ZodPromise:fi,ZodEffects:hi,ZodTransformer:hi,ZodOptional:vi,ZodNullable:gi,ZodDefault:yi,ZodCatch:_i,ZodNaN:bi,BRAND:xi,ZodBranded:Ei,ZodPipeline:ki,ZodReadonly:wi,custom:Ti,Schema:xr,ZodSchema:xr,late:Si,get ZodFirstPartyTypeKind(){return Ii},coerce:la,any:Mi,array:Vi,bigint:Pi,boolean:Oi,date:Ri,discriminatedUnion:Fi,effect:oa,enum:ea,function:Yi,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Ti((t=>t instanceof e),t),intersection:zi,lazy:Xi,literal:Qi,map:Hi,nan:Ci,nativeEnum:ta,never:Ui,null:ji,nullable:ia,number:Ai,object:qi,oboolean:()=>Oi().optional(),onumber:()=>Ai().optional(),optional:ra,ostring:()=>Ni().optional(),pipeline:sa,preprocess:aa,promise:na,record:Ki,set:Ji,strictObject:$i,string:Ni,symbol:Zi,transformer:oa,tuple:Wi,undefined:Gi,union:Bi,unknown:Di,void:Li,NEVER:ua,ZodIssueCode:Xo,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:Qo}),da=function(){return da=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},da.apply(this,arguments)},pa=function(){var e=ma(),t=(0,d.useDispatch)(Pe),n=t.receiveAutomationGroupTemplates,o=t.closeTemplateImportExport,r=(0,s.useState)(""),i=r[0],a=r[1],l=fa(i);if((0,s.useEffect)((function(){"export"===(null==e?void 0:e.mode)?a(JSON.stringify(e.templates,null,2)):a("")}),[e]),!e)return null;var c=e.mode,p="export"===c?(0,u._x)("Export Templates","text","nelio-content"):(0,u._x)("Import Templates","text","nelio-content"),m="export"===c?(0,u._x)("Copy","command","nelio-content"):(0,u._x)("Import","command","nelio-content"),f="import"===c?function(){"import"===c&&l.length&&(n(e.templateType,l),o())}:function(){navigator.clipboard.writeText(i).then((function(){return o()}))},h="import"===c&&!l.length,v="export"!==c||"https:"===document.location.protocol;return s.createElement(Re.Modal,{className:"nelio-content-import-export-templates",title:p,onRequestClose:o,style:{minWidth:"30%"}},s.createElement(Re.TextareaControl,{placeholder:"import"===c?(0,u._x)("Paste social templates here…","user","nelio-content"):void 0,value:i,onChange:a,readOnly:"export"===c}),s.createElement("div",{className:"nelio-content-import-export-templates__actions"},s.createElement(Re.Button,{variant:"secondary",onClick:o},(0,u._x)("Close","command","nelio-content")),v&&s.createElement(Re.Button,{variant:"primary",onClick:f,disabled:h},m)))},ma=function(){return p((function(e){return e(Pe).getImportExportData()}))},fa=function(e){var t=ma(),n=p((function(e){return e(me.store).getCurrentUserId()})),o=p((function(e){var n,o=e(me.store).getSocialProfile;return"import"===(null==t?void 0:t.mode)?null===(n=o(t.profileId))||void 0===n?void 0:n.network:void 0}));if("import"!==(null==t?void 0:t.mode)||!o)return[];try{var r=t.groupId,i=t.profileId;return(0,m.castArray)(JSON.parse(e)).map((function(e){return ba.safeParse(e)})).map((function(e){return e.success?e.data:void 0})).filter(f.isDefined).map((function(e){var a;return da(da({groupId:r,id:wt(),creatorId:n,network:o},!e.isNetwork&&{profileId:i,targetName:e.targetName}),{taxonomies:null!==(a=e.taxonomies)&&void 0!==a?a:{},text:e.text,postType:"universal"===r?e.postType:void 0,author:e.author,availability:ha(t.templateType,e.availability)?e.availability:void 0})})).filter((function(e){return!!e.text.length}))}catch(e){return[]}},ha=function(e,t){return!!(null==t?void 0:t.type.includes(e))},va=ca.object({mon:ca.boolean(),tue:ca.boolean(),wed:ca.boolean(),thu:ca.boolean(),fri:ca.boolean(),sat:ca.boolean(),sun:ca.boolean()}),ga=ca.union([ca.literal("morning"),ca.literal("noon"),ca.literal("afternoon"),ca.literal("night"),ca.custom((function(e){return"string"==typeof e&&/^[0-2][0-9]:[0-5][0-9]$/.test(e)}))]),ya=ca.object({instanceCount:ca.number().nonnegative(),intervalInDays:ca.number().positive()}),_a=ca.discriminatedUnion("type",[ca.object({type:ca.literal("publication-day-offset"),hoursAfterPublication:ca.number().nonnegative(),randomize:ca.optional(ca.number().nonnegative()),recurrency:ca.optional(ya)}),ca.object({type:ca.literal("publication-day-period"),time:ga,randomize:ca.optional(ca.number().nonnegative()),recurrency:ca.optional(ya)}),ca.object({type:ca.literal("after-publication"),daysAfterPublication:ca.number().nonnegative(),time:ga,randomize:ca.optional(ca.number().nonnegative()),recurrency:ca.optional(ya)}),ca.object({type:ca.literal("reshare"),weekday:va,time:ga,randomize:ca.optional(ca.number().nonnegative())})]),ba=ca.object({text:ca.string().min(1),isNetwork:ca.boolean(),targetName:ca.optional(ca.string()).transform((function(e){return e})),author:ca.optional(ca.number().positive()).transform((function(e){return e})),postType:ca.optional(ca.string()).transform((function(e){return e})),taxonomies:ca.optional(ca.record(ca.number().positive())).transform((function(e){return e})),availability:ca.optional(_a)}),xa=function(){var e=function(){var e=p((function(e){return{groups:e(me.store).getAutomationGroups().map((function(t){return e(me.store).getAutomationGroup(t)})).filter(f.isDefined),isLoadingGroups:!e(me.store).hasFinishedResolution("getAutomationGroups")}})),t=e.groups,n=e.isLoadingGroups,o=lt("authors",n?[]:t),r=lt("terms",n?[]:t);return{data:t,isLoading:n||o||r}}(),t=e.isLoading,n=e.data,o=Ea(),r=o.isLoading,i=o.data,a=(0,d.useDispatch)(Pe).initAutomationGroups,l=ka(),u=l.notices,m=l.removeNotice,h=Me(),v=t||r;return(0,s.useEffect)((function(){v||a(n,i)}),[v]),(0,s.useEffect)((function(){if(!v)return h?window.addEventListener("beforeunload",wa,{capture:!0}):window.removeEventListener("beforeunload",wa,{capture:!0}),function(){window.removeEventListener("beforeunload",wa,{capture:!0})}}),[h,v]),v?s.createElement("div",{className:"nelio-content-automations-settings-layout"},s.createElement(c.LoadingAnimation,null)):s.createElement("div",{className:"nelio-content-automations-settings-layout"},s.createElement(s.StrictMode,null,s.createElement(Re.SlotFillProvider,null,s.createElement(Re.NoticeList,{notices:u,className:"components-editor-notices__pinned",onRemove:m}),s.createElement(En,null),s.createElement(Zo,null),s.createElement(pa,null),s.createElement(Pn,null),s.createElement(c.PremiumDialog,null),s.createElement(Re.Popover.Slot,null))))},Ea=function(){return p((function(e){var t=e(me.store).getSocialProfiles();return{isLoading:e(me.store).isResolving("getSocialProfiles"),data:t}}))},ka=function(){return{notices:p((function(e){return e(Ze.store).getNotices()})),removeNotice:(0,d.useDispatch)(Ze.store).removeNotice}},wa=function(e){return e.preventDefault(),e.returnValue=""};function Ta(e){var t=document.getElementById(e);l(s.createElement(xa,null),t);var n=document.getElementById("nelio-content-settings-title");n&&l(s.createElement(c.ContextualHelp,{context:"social-automations",walkthrough:Oe,autostart:!0,component:Sa}),n)}var Sa=function(e){var t=e.className,n=e.runWalkthrough;return s.createElement("button",{className:"".concat(t,"  page-title-action"),onClick:function(){Ia().then(n)}},(0,u._x)("Help","text","nelio-content"))},Ia=function(){return e=void 0,t=void 0,o=function(){var e,t,n,o;return function(e,t){var n,o,r,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(r){switch(r.label){case 0:return e=".nelio-content-automation-group",(t=document.querySelector("".concat(e,":first-child")))?t.querySelector("".concat(e,"__body"))?[3,2]:(null==(n=t.querySelector("".concat(e,"__header-content")))||n.click(),[4,Na()]):[2];case 1:r.sent(),r.label=2;case 2:return null==(o=t.querySelector("".concat(e,"__sidebar-item")))||o.click(),[4,Na()];case 3:return r.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((o=o.apply(e,t||[])).next())}));var e,t,n,o},Na=function(){return new Promise((function(e){return setTimeout(e,50)}))}},6942:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)o.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.m=t,e=[],o.O=(t,n,r,i)=>{if(!n){var a=1/0;for(c=0;c<e.length;c++){n=e[c][0],r=e[c][1],i=e[c][2];for(var s=!0,l=0;l<n.length;l++)(!1&i||a>=i)&&Object.keys(o.O).every((e=>o.O[e](n[l])))?n.splice(l--,1):(s=!1,i<a&&(a=i));if(s){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,r,i]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={9877:0,262:0,492:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,a=n[0],s=n[1],l=n[2],u=0;if(a.some((t=>0!==e[t]))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(l)var c=l(o)}for(t&&t(n);u<a.length;u++)i=a[u],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(c)},n=self.webpackChunkNelioContent=self.webpackChunkNelioContent||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=o.O(void 0,[262,492],(()=>o(9208)));r=o.O(r);var i=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var a in r)i[a]=r[a];r.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();