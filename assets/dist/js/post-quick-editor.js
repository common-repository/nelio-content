(()=>{var e,t={6615:(e,t,n)=>{"use strict";n.r(t),n.d(t,{postQuickEditor:()=>a});var r={};n.r(r),n.d(r,{arePremiumItemsDirty:()=>B,areReferencesDirty:()=>Y,areTasksDirty:()=>U,getAllAttributes:()=>I,getAuthorId:()=>R,getDateValue:()=>V,getExtraInfoTab:()=>Z,getId:()=>O,getNewComments:()=>K,getPostStatus:()=>q,getPostTerms:()=>A,getPostTermsByTaxonomy:()=>D,getPostType:()=>C,getPremiumItems:()=>M,getReferenceInput:()=>F,getReferences:()=>H,getTaskPresetSelection:()=>J,getTasks:()=>L,getTimeValue:()=>j,getTitle:()=>N,getValidationError:()=>$,isNewPost:()=>W,isPublished:()=>G,isSaving:()=>X,isTaskPresetLoaderOpen:()=>z,isVisible:()=>Q});var o={};n.r(o),n.d(o,{close:()=>ge,markAsSaving:()=>_e,openNewPostEditor:()=>ve,openPostEditor:()=>he,openTaskPresetLoader:()=>fe,selectTaskPresets:()=>me,setAuthorId:()=>oe,setDateValue:()=>ie,setExtraInfoTab:()=>ye,setNewComments:()=>de,setPostStatus:()=>ne,setPostTerms:()=>re,setPostType:()=>te,setPremiumItems:()=>se,setReferenceInput:()=>ce,setReferences:()=>le,setTasks:()=>ue,setTimeValue:()=>ae,setTitle:()=>ee,setValidationError:()=>Ee});var i={};n.r(i),n.d(i,{saveAndClose:()=>Oe});var a={};n.r(a),n.d(a,{PostQuickEditor:()=>hn,onSavePremiumItems:()=>vn,store:()=>je});const s=window.wp.element,u=window.wp.components,c=window.wp.data;function l(e,t){return(0,c.useSelect)(e,t)}function d(e){return(0,c.resolveSelect)(e)}const f=window.wp.i18n,m=window.lodash,p=window.NelioContent.data,v=window.NelioContent.components,h=window.NelioContent.utils,g=window.NelioContent.date;var y={error:"",extraInfoTab:"none",isPublished:!1,isSaving:!1,isVisible:!1},E={isOpen:!1,selection:[]},_=function(){return _=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_.apply(this,arguments)},T={title:"",type:void 0,taxonomies:{},authorId:void 0,status:void 0,dateValue:"",timeValue:"",referenceInput:"",references:[],tasks:[],newComments:[],premiumItemsByType:{}},b=function(e){return!("id"in e)||!e.id};function k(e){return void 0===e?"":"".concat(e)}var x=function(e){var t="";if("exact"===e.dateType)t+="0:"+e.dateValue;else{var n=Math.abs(Number.parseInt(e.dateValue)||0);t+="positive-days"===e.dateType||0===n?"2:"+(0,m.padStart)("".concat(n),5,"0"):"1:"+(0,m.padStart)("".concat(Math.abs(9999-n)),5,"0"),t+=":",t+=e.task}return t+=":".concat(e.task,":").concat(e.id),_(_({},e),{_sort:t})},P=function(){return P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},P.apply(this,arguments)},S=function(){return S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},S.apply(this,arguments)};const w=(0,c.combineReducers)({attributes:function(e,t){var n;return void 0===e&&(e=T),null!==(n=function(e,t){var n,r,o,i,a,s;switch(t.type){case"OPEN_EDITOR":return _(_({},T),{id:b(t.post)?void 0:t.post.id,title:null!==(o=t.post.title)&&void 0!==o?o:T.title,type:null!==(i=t.post.type)&&void 0!==i?i:T.type,taxonomies:b(t.post)?T.taxonomies:t.post.taxonomies,authorId:null!==(a=t.post.author)&&void 0!==a?a:T.authorId,status:b(t.post)?T.status:t.post.status,dateValue:!b(t.post)&&t.post.date?(0,g.date)("Y-m-d",t.post.date):k(b(t.post)?t.post.dateValue:""),timeValue:!b(t.post)&&t.post.date?(0,g.date)("H:i",t.post.date):k(b(t.post)?t.post.timeValue:"")});case"SET_TITLE":return _(_({},e),{title:t.title});case"SET_POST_TYPE":return _(_({},e),{type:t.postType});case"SET_POST_STATUS":return _(_({},e),{status:t.postStatus});case"SET_POST_TERMS":return _(_({},e),{taxonomies:_(_({},e.taxonomies),(n={},n[t.taxonomy]=t.terms,n))});case"SET_AUTHOR":return _(_({},e),{authorId:t.authorId});case"SET_DATE":return _(_({},e),{dateValue:k(t.dateValue)});case"SET_TIME":return _(_({},e),{timeValue:k(t.timeValue)});case"SET_PREMIUM_ITEMS":return _(_({},e),{premiumItemsByType:_(_({},e.premiumItemsByType),(r={},r[t.typeName]=t.items,r))});case"SET_TASKS":return _(_({},e),{tasks:(s=t.tasks,(0,m.orderBy)(s.map(x),"_sort"))});case"SET_REFERENCE_INPUT":return _(_({},e),{referenceInput:t.url});case"SET_REFERENCES":return _(_({},e),{references:t.references});case"SET_NEW_COMMENTS":return _(_({},e),{newComments:t.comments})}}(e,t))&&void 0!==n?n:e},presetLoader:function(e,t){var n;return void 0===e&&(e=E),null!==(n=function(e,t){switch(t.type){case"OPEN_TASK_PRESET_LOADER":return P(P({},E),{isOpen:t.isOpen});case"SELECT_TASK_PRESETS":return e.isOpen?P(P({},e),{selection:t.selection}):e}}(e,t))&&void 0!==n?n:e},status:function(e,t){var n;return void 0===e&&(e=y),null!==(n=function(e,t){switch(t.type){case"OPEN_EDITOR":return S(S({},y),{isPublished:"status"in t.post&&"publish"===t.post.status,isVisible:!0});case"CLOSE_EDITOR":return y;case"SET_EXTRA_INFO_TAB":return S(S({},e),{extraInfoTab:t.tab});case"SET_VALIDATION_ERROR":return S(S({},e),{error:t.error});case"MARK_AS_SAVING":return S(S({},e),{isSaving:!!t.isSaving})}}(e,t))&&void 0!==n?n:e}});function I(e){return e.attributes}function O(e){return e.attributes.id}function N(e){return e.attributes.title||""}function C(e){return e.attributes.type}function q(e){return e.attributes.status}function A(e,t){var n;return null!==(n=e.attributes.taxonomies[t])&&void 0!==n?n:[]}function D(e){return e.attributes.taxonomies}function R(e){return e.attributes.authorId}function V(e){return e.attributes.dateValue}function j(e){return e.attributes.timeValue}function L(e){return e.attributes.tasks}var M=function(e,t){var n;return null!==(n=e.attributes.premiumItemsByType[t])&&void 0!==n?n:[]},B=function(e,t,n){var r=M(e,t);return r.length!==n.length||(0,m.some)(r,(function(e){var t=(0,m.find)(n,{id:e.id});return!t||!(0,m.isEqual)((0,m.pick)(e,(0,m.keys)(t)),t)}))};function U(e,t){var n=e.attributes.tasks;return t=t.map((function(e){return(0,m.pick)(e,["id","task","dateType","dateValue","color","assigneeId"])})),n.length!==t.length||(0,m.some)(n,(function(e){var n=(0,m.find)(t,{id:e.id});return!n||!(0,m.isEqual)((0,m.pick)(e,(0,m.keys)(n)),n)}))}function F(e){return e.attributes.referenceInput}function H(e){return e.attributes.references}function K(e){return e.attributes.newComments}function Y(e,t){var n=t.map((function(e){return e.url})),r=e.attributes.references;return n.length!==r.length||(0,m.some)(r,(function(e){return!n.includes(e.url)}))}function z(e){return e.presetLoader.isOpen}function J(e){return e.presetLoader.selection}function W(e){return!e.attributes.id}function G(e){return!!e.status.isPublished}function Q(e){return!!e.status.isVisible}function X(e){return!!e.status.isSaving}function Z(e){return e.status.extraInfoTab||"none"}function $(e){return e.status.error}function ee(e){return{type:"SET_TITLE",title:e}}function te(e){return{type:"SET_POST_TYPE",postType:e}}function ne(e){return{type:"SET_POST_STATUS",postStatus:e}}function re(e,t){return{type:"SET_POST_TERMS",taxonomy:e,terms:t}}function oe(e){return{type:"SET_AUTHOR",authorId:e}}function ie(e){return{type:"SET_DATE",dateValue:e}}function ae(e){return{type:"SET_TIME",timeValue:e}}function se(e,t){return{type:"SET_PREMIUM_ITEMS",typeName:e,items:t}}function ue(e){return{type:"SET_TASKS",tasks:e}}function ce(e){return{type:"SET_REFERENCE_INPUT",url:e}}function le(e){return{type:"SET_REFERENCES",references:e}}function de(e){return{type:"SET_NEW_COMMENTS",comments:e}}function fe(e){return{type:"OPEN_TASK_PRESET_LOADER",isOpen:e}}function me(e){return{type:"SELECT_TASK_PRESETS",selection:e}}var pe=function(){return pe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pe.apply(this,arguments)};function ve(e,t){return void 0===t&&(t={}),{type:"OPEN_EDITOR",post:pe(pe({},(0,h.createPost)(e)),(0,m.omitBy)(t,m.isNil))}}function he(e){return{type:"OPEN_EDITOR",post:e}}function ge(){return{type:"CLOSE_EDITOR"}}function ye(e){return{type:"SET_EXTRA_INFO_TAB",tab:e}}function Ee(e){return{type:"SET_VALIDATION_ERROR",error:e}}function _e(e){return{type:"MARK_AS_SAVING",isSaving:e}}const Te=window.wp.apiFetch,be=n.n(Te)(),ke=window.wp.hooks;var xe=function(){return xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xe.apply(this,arguments)},Pe=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Se=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},we=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Ie=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};function Oe(){return Pe(this,void 0,Promise,(function(){var e,t,n,r,o,i,a,s,u;return Se(this,(function(l){switch(l.label){case 0:return(0,c.select)(je).isSaving()?[2]:[4,(0,c.dispatch)(je).markAsSaving(!0)];case 1:l.sent(),l.label=2;case 2:return l.trys.push([2,10,,11]),e=(0,c.select)(je).getAllAttributes(),t=e.tasks,n=e.premiumItemsByType,r=e.newComments,[4,Ne(o=we(e,["tasks","premiumItemsByType","newComments"]))];case 3:return i=l.sent(),a=i.post,s=i.references,[4,qe(!o.id,a,t)];case 4:return l.sent(),[4,Ae(!o.id,a,n)];case 5:return l.sent(),[4,Re(a,r)];case 6:return l.sent(),[4,(0,c.dispatch)(p.store).receivePosts(a)];case 7:return l.sent(),[4,(0,c.dispatch)(p.store).receiveSuggestedReferences(a.id,s)];case 8:return l.sent(),[4,(0,c.dispatch)(p.store).reloadPostRelatedItems(a.id)];case 9:return l.sent(),[3,11];case 10:return u=l.sent(),(0,h.logError)(u),[3,11];case 11:return[4,(0,c.dispatch)(je).markAsSaving(!1)];case 12:return l.sent(),[4,(0,c.dispatch)(je).close()];case 13:return l.sent(),[2]}}))}))}function Ne(e){return Pe(this,void 0,Promise,(function(){var t,n,r;return Se(this,(function(o){switch(o.label){case 0:return t=e.id?"PUT":"POST",n=e.id?"/nelio-content/v1/post/".concat(e.id):"/nelio-content/v1/post",r=be({path:n,method:t,data:xe(xe({},(0,m.omitBy)(e,h.isEmpty)),{references:e.references.map((function(e){return e.url}))})}),[4,Ce(e)];case 1:return o.sent(),[2,r]}}))}))}function Ce(e){return Pe(this,arguments,void 0,(function(e){var t=e.timeValue;return Se(this,(function(e){switch(e.label){case 0:return t?[4,(0,c.dispatch)(p.store).setDefaultTime("post",t)]:[2];case 1:return e.sent(),(0,h.setValue)("defaultPostTime",t),[2]}}))}))}function qe(e,t,n){return Pe(this,void 0,Promise,(function(){var r,o,i,a,s,u;return Se(this,(function(l){switch(l.label){case 0:return e?[3,2]:[4,d(p.store).getTasksRelatedToPost(t.id)];case 1:return o=l.sent(),[3,3];case 2:o=[],l.label=3;case 3:if(r=o,!(0,c.select)(je).areTasksDirty(r))return[2];l.label=4;case 4:return l.trys.push([4,6,,7]),i=(0,c.select)(p.store).getSiteId(),a=(0,c.select)(p.store).getApiRoot(),s=(0,c.select)(p.store).getAuthenticationToken(),[4,be({url:"".concat(a,"/site/").concat(i,"/task"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(s)},data:{mode:"replace",postId:t.id,tasks:n.map((function(e){return xe(xe({},e),{baseDatetime:t.date||"none",assigneeId:e.assigneeId||t.author,postId:t.id,postType:t.type,postAuthor:t.author})}))}})];case 5:return l.sent(),[3,7];case 6:return u=l.sent(),(0,h.logError)(u),[3,7];case 7:return r.forEach((function(e){var t=e.id;return(0,c.dispatch)(p.store).removeTask(t)})),[2]}}))}))}function Ae(e,t,n){return Pe(this,void 0,Promise,(function(){var r,o,i,a,s,u,l,f,v=this;return Se(this,(function(g){switch(g.label){case 0:return e?[3,2]:[4,d(p.store).getAllPremiumItemsRelatedToPost(t.id)];case 1:return o=g.sent(),[3,3];case 2:o={},g.label=3;case 3:return r=o,y=(0,m.uniq)(Ie(Ie([],Object.keys(n),!0),Object.keys(r),!0)).reduce((function(e,t){var o,i,a;return xe(xe({},e),((o={})[t]={old:null!==(i=r[t])&&void 0!==i?i:[],new:null!==(a=n[t])&&void 0!==a?a:[]},o))}),{}),i=(0,m.toPairs)(y).map((function(e){var t=e[0],n=e[1];return n?[t,n]:void 0})).filter(h.isDefined),a=i.filter((function(e){var t=e[0],n=e[1].old;return(0,c.select)(je).arePremiumItemsDirty(t,n)})),[4,Promise.all(a.map((function(e){return Pe(v,[e],Promise,(function(e){var n,r,o=e[0],i=e[1];return Se(this,(function(e){switch(e.label){case 0:return n=[o],r={old:i.old},[4,De(o,i.new,t.id)];case 1:return[2,n.concat([(r.new=e.sent(),r)])]}}))}))})))];case 4:return s=g.sent(),u=(0,c.dispatch)(p.store),l=u.receivePremiumItems,f=u.removePremiumItem,s.forEach((function(e){var t=e[0],n=e[1];n.old.forEach((function(e){return f(t,e.id)})),l(t,n.new)})),[2]}var y}))}))}function De(e,t,n){return t.length?(0,ke.applyFilters)("nelio-content_post-quick-editor_onSavePremiumItems",new Promise((function(e){return e([])})),e,t,n):new Promise((function(e){return e([])}))}function Re(e,t){return Pe(this,void 0,void 0,(function(){var n,r,o,i;return Se(this,(function(a){switch(a.label){case 0:if(!(t=t.map((function(t){return xe(xe({},t),{postId:e.id,postType:e.type,postAuthor:e.author})}))).length)return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),n=(0,c.select)(p.store).getSiteId(),r=(0,c.select)(p.store).getApiRoot(),o=(0,c.select)(p.store).getAuthenticationToken(),[4,be({url:"".concat(r,"/site/").concat(n,"/comment"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(o)},data:t})];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),(0,h.logError)(i),[3,4];case 4:return[2]}}))}))}var Ve=function(){return Ve=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ve.apply(this,arguments)},je=(0,c.createReduxStore)("nelio-content/post-quick-editor",{reducer:w,controls:c.controls,actions:Ve(Ve({},o),i),selectors:r});!function(e){(0,c.register)(e)}(je);var Le=[{title:(0,f._x)("Post Editor","text","nelio-content"),intro:(0,f._x)("Welcome to the post editor. This simple modal lets you quickly and efficiently create new posts or edit existing ones.","user","nelio-content")},{title:(0,f._x)("Title","text","nelio-content"),intro:(0,f._x)("Here you can set or change the post’s title.","user","nelio-content"),element:function(){return document.querySelector(".nelio-content-post-quick-editor__title")}},{title:(0,f._x)("Post Type","text","nelio-content"),intro:(0,f._x)("Use this selector to set its type to one of the post types enabled in Nelio Content’s advanced settings.","user","nelio-content"),active:function(){return!!document.querySelector(".nelio-content-post-quick-editor__type")},element:function(){return document.querySelector(".nelio-content-post-quick-editor__type")}},{title:(0,f._x)("Status","text","nelio-content"),intro:(0,f._x)("Use this selector to set the post’s status.","user","nelio-content"),active:function(){return!!document.querySelector(".nelio-content-post-quick-editor__status")},element:function(){return document.querySelector(".nelio-content-post-quick-editor__status")}},{title:(0,f._x)("Status","text","nelio-content"),intro:(0,f._x)("In multiauthor sites, you can select the author of any given post here.","user","nelio-content"),active:function(){return!!document.querySelector(".nelio-content-post-quick-editor__author")},element:function(){return document.querySelector(".nelio-content-post-quick-editor__author")}},{title:(0,f._x)("Date","text","nelio-content"),intro:(0,f._x)("You can also set the date in which the post is supposed to be published. If you don’t set a specific date, the post will show up in the “Unscheduled” section.","user","nelio-content"),active:function(){return!!document.querySelector(".nelio-content-post-quick-editor__date")},element:function(){return document.querySelector(".nelio-content-post-quick-editor__date")}},{title:(0,f._x)("Time","text","nelio-content"),intro:(0,f._x)("You can also set the publication time.","user","nelio-content"),active:function(){return!!document.querySelector(".nelio-content-post-quick-editor__time")},element:function(){return document.querySelector(".nelio-content-post-quick-editor__time")}},{title:(0,f._x)("More Options","text","nelio-content"),intro:(0,f._x)("Finally, you can click on this link to show some additional settings. For example, if you’re creating or editing a blog post, this will reveal a couple of settings to tweak its categories and tags.","user","nelio-content"),active:function(){return!!document.querySelector(".nelio-content-post-quick-editor__extra-action")},element:function(){return document.querySelector(".nelio-content-post-quick-editor__extra-action")}}],Me=function(){var e=Be(),t=e.authorId,n=e.dateValue,r=e.reference,o=e.timeValue,i=e.title,a=Ue(),u=a.setError,c=a.clearErrors;return(0,s.useEffect)(Fe((function(){return(0,h.isEmpty)((0,m.trim)(i))?u((0,f._x)("Please set post’s title","user","nelio-content")):(0,h.isEmpty)(t)?u((0,f._x)("Please set a post author","user","nelio-content")):(0,h.isEmpty)(n)&&!(0,h.isEmpty)(o)?u((0,f._x)("Please specify a valid date","user","nelio-content")):!(0,h.isEmpty)(n)&&(0,h.isEmpty)(o)?u((0,f._x)("Please specify a valid time","user","nelio-content")):r&&!(0,h.isUrl)(r)?u((0,f._x)("Please type in a valid reference URL","user","nelio-content")):c()})),[t,n,r,o,i]),null},Be=function(){return l((function(e){var t=e(je),n=t.getAuthorId,r=t.getDateValue,o=t.getReferenceInput,i=t.getTimeValue,a=t.getTitle;return{authorId:n(),dateValue:r(),reference:o(),timeValue:i(),title:a()}}))},Ue=function(){var e=(0,c.useDispatch)(je).setValidationError;return{setError:e,clearErrors:function(){return e("")}}},Fe=function(e){return function(){e()}};const He=window.wp.coreData;var Ke=function(){var e=ze(),t=We();return e||!t},Ye=function(){return l((function(e){return e(je).isPublished()}))},ze=function(){return l((function(e){return e(je).isSaving()}))},Je=function(){return l((function(e){return e(je).isNewPost()}))},We=function(){return l((function(e){var t=e(p.store),n=t.getPost,r=t.canCurrentUserEditPost,o=e(je),i=o.getId,a=o.isNewPost,s=i(),u=!!s&&n(s),c=!!u&&r(u);return a()||c}))},Ge=function(){return!!Qe().length},Qe=function(){var e=l((function(e){return e(je).getPostType()})),t=$e();return(0,m.filter)(t,(function(t){return!e||t.types.includes(e)}))},Xe=function(e){return l((function(t){var n=t(je).getPostType();return t(p.store).getPostTypes(e).some((function(e){return e.name===n}))}))},Ze=function(){return[Ge(),Xe("future-actions"),Xe("tasks"),Xe("comments"),Xe("references")].some((function(e){return e}))},$e=function(){return(0,m.filter)(l((function(e){return e(He.store).getEntityRecords("root","taxonomy",{per_page:-1})||[]})),(function(e){return e.visibility.public}))},et=function(){var e=We(),t=tt();return e?null:s.createElement("div",{className:"nelio-content-post-quick-editor__edit-warning"},s.createElement(u.Dashicon,{icon:"warning"}),t)},tt=function(){return l((function(e){switch((0,e(je).getPostType)()){case"page":return(0,f._x)("You’re not allowed to edit this page.","user","nelio-content");case"post":return(0,f._x)("You’re not allowed to edit this post.","user","nelio-content");default:return(0,f._x)("You’re not allowed to edit this content.","user","nelio-content")}}))},nt=function(){var e=(0,c.useDispatch)(je).setExtraInfoTab,t=rt(),n=Ze(),r=Ke(),o=Ge();return!n||t?null:s.createElement("div",{className:"nelio-content-post-quick-editor__extra-actions"},s.createElement(u.Button,{className:"nelio-content-post-quick-editor__extra-action",variant:"link",disabled:r,onClick:function(){return e(o?"taxonomies":"tasks")}},(0,f._x)("View Details","command","nelio-content")))},rt=function(){return l((function(e){return"none"!==e(je).getExtraInfoTab()}))},ot=function(){var e=(0,c.useDispatch)(je),t=e.close,n=e.saveAndClose,r=Ke(),o=it(),i=Je(),a=ze();return s.createElement("div",{className:"nelio-content-post-quick-editor__actions"},s.createElement(nt,null),s.createElement(u.Button,{variant:"secondary",disabled:r,onClick:t},(0,f._x)("Cancel","command","nelio-content")),s.createElement(v.SaveButton,{variant:"primary",error:o,isSaving:a,isUpdate:!i,onClick:n}))},it=function(){return l((function(e){return e(je).getValidationError()}))},at=function(){var e=(0,c.useDispatch)(je).close,t=st(),n=t.primary,r=t.secondary;return s.createElement("div",{className:"nelio-content-post-quick-editor__actions"},s.createElement(nt,null),s.createElement(u.Button,{variant:"secondary",onClick:e},(0,f._x)("Cancel","command","nelio-content")),!!r&&s.createElement(u.ExternalLink,{className:"components-button is-secondary",href:r.url,onClick:e},r.label),!!n&&s.createElement(u.ExternalLink,{className:"components-button is-primary",href:n.url,onClick:e},n.label))},st=function(){var e=ut(),t=We();if(!e)return{};var n=e.status,r=e.editLink,o="publish"===n,i={url:e.viewLink,label:o?(0,f._x)("View","command","nelio-content"):(0,f._x)("Preview","command","nelio-content")},a={url:r,label:(0,f._x)("Edit","command","nelio-content")};return t?{primary:o?i:a,secondary:o?a:i}:{secondary:i}},ut=function(){return l((function(e){return(0,e(p.store).getPost)((0,e(je).getId)())}))},ct=function(){return ct=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ct.apply(this,arguments)},lt=function(){var e=We(),t=dt();return e&&t?s.createElement(ot,null):s.createElement(at,null)},dt=function(){return l((function(e){var t,n,r,o;if(e(p.store),e(je),(0,e(je).isNewPost)())return!0;var i=e(je).getId(),a=e(p.store).getPost(i);if(!a)return!0;var s=e(p.store).getTasksRelatedToPost(i);if(e(je).areTasksDirty(s))return!0;var u=e(je).arePremiumItemsDirty,c=(0,m.toPairs)(e(p.store).getAllPremiumItemsRelatedToPost(i)).map((function(e){var t=e[0],n=e[1];return n?[t,n]:void 0})).filter(h.isDefined).map((function(e){var t=e[0],n=e[1];return u(t,n)})).some((function(e){return e}));if(c)return!0;var l=e(p.store).getSuggestedReferences(i);if(e(je).areReferencesDirty(l))return!0;if(e(je).getNewComments().length)return!0;var d=e(je),f=d.getTitle,v=d.getAuthorId,g=d.getDateValue,y=d.getTimeValue,E=d.getPostStatus,_=d.getPostTermsByTaxonomy,T=function(e){return JSON.stringify((0,m.mapValues)(e,(function(e){return(0,m.orderBy)(e,"id")})))},b={title:f(),status:E(),author:v(),dateValue:null!==(t=g())&&void 0!==t?t:"",timeValue:null!==(n=y())&&void 0!==n?n:"",taxonomies:T(_())},k=(0,h.extractDateTimeValues)(a.date),x=ct(ct({},(0,m.pick)(a,(0,m.keys)(b))),{taxonomies:T(a.taxonomies),dateValue:null!==(r=null==k?void 0:k.dateValue)&&void 0!==r?r:"",timeValue:null!==(o=null==k?void 0:k.timeValue)&&void 0!==o?o:""});return!(0,m.isEqual)(b,x)}))},ft=function(){var e=mt(),t=e[0],n=e[1],r=pt(),o=Ke();return r?s.createElement("div",{className:"nelio-content-post-quick-editor__author"},s.createElement(v.AuthorSearcher,{value:t,onChange:function(e){e&&n(e)},placeholder:(0,f._x)("Author…","text","nelio-content"),disabled:o})):null},mt=function(){return[l((function(e){return e(je).getAuthorId()})),(0,c.useDispatch)(je).setAuthorId]},pt=function(){return l((function(e){return e(p.store).isMultiAuthor()}))},vt=function(){var e=ht(),t=e[0],n=e[1],r=gt(),o=Ke(),i=Ye();return s.createElement("div",{className:"nelio-content-post-quick-editor__date"},s.createElement(v.DateInput,{disabled:o||i,value:t,onChange:function(e){return n(null!=e?e:"")},min:r}))},ht=function(){return[l((function(e){return e(je).getDateValue()})),(0,c.useDispatch)(je).setDateValue]},gt=function(){return l((function(e){var t=e(p.store),n=t.getToday,r=t.getPost,o=e(je),i=o.getId,a=o.isNewPost,s=n(),u=r(i()),c=(0,h.extractDateTimeValues)(null==u?void 0:u.date);return a()?s:yt(s,null==c?void 0:c.dateValue)}))},yt=function(e,t){return!t||e<t?e:t},Et=n(6942),_t=n.n(Et),Tt=function(){return Tt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Tt.apply(this,arguments)},bt=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},kt=function(){return s.createElement(xt,null)},xt=(0,p.withSubscriptionCheck)("raw/editorial-comments",(function(){return s.createElement("div",{className:"nelio-content-pqe-extra__comments"},s.createElement(Pt,null),s.createElement(St,null))})),Pt=function(){var e=(0,s.useRef)(null),t=It(),n=t.comments,r=t.newComments,o=Ot(),i=r.length,a=(0,s.useState)(-1),u=a[0],c=a[1];return(0,s.useEffect)((function(){var t;u!==i&&(u<i&&(null===(t=e.current)||void 0===t||t.scrollTo({top:999999,behavior:-1===u?void 0:"smooth"})),c(i))}),[u,i,c]),s.createElement("ul",{ref:e,className:"nelio-content-pqe-extra__comment-list"},n.map((function(e){return s.createElement(wt,{key:"nelio-content-comment-".concat(e.id),comment:e})})),r.map((function(e){return s.createElement(wt,{key:"nelio-content-comment-".concat(e.id),comment:e,onDelete:function(){return o(e.id)}})})))},St=function(){var e=(0,s.useState)(""),t=e[0],n=e[1],r=Nt();return s.createElement("div",{className:"nelio-content-pqe-extra__comment-form"},s.createElement(u.TextareaControl,{placeholder:(0,f._x)("Write a comment and press enter to send…","user","nelio-content"),value:t,onChange:n,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),r(t),n(""))}}))},wt=function(e){var t=e.comment,n=e.onDelete,r=l((function(e){return e(je).isSaving()})),o=Ct(null==t?void 0:t.authorId),i=(0,p.useAuthorName)(null==t?void 0:t.authorId);return s.createElement("li",{className:_t()("nelio-content-pqe-extra__comment",{"nelio-content-pqe-extra__comment--is-mine":o})},s.createElement("div",null,s.createElement("div",{className:_t()({"nelio-content-pqe-extra__comment-bubble":!0,"nelio-content-pqe-extra__comment-bubble--is-mine":o})},(null==t?void 0:t.comment)||""),n?s.createElement("div",{className:"nelio-content-pqe-extra__comment-actions"},s.createElement("span",null,r?(0,f._x)("Saving…","text","nelio-content"):(0,f._x)("New","text (editorial comment)","nelio-content"))," • ",s.createElement(v.DeleteButton,{disabled:r,onClick:n})):s.createElement("div",{className:_t()({"nelio-content-pqe-extra__comment-extra":!0,"nelio-content-pqe-extra__comment-extra--is-mine":o})},!o&&s.createElement("div",{className:"nelio-content-pqe-extra__comment-author"},i),s.createElement("div",{className:"nelio-content-pqe-extra__comment-date"},(0,g.dateI18n)((0,g.getSettings)().formats.datetime,null==t?void 0:t.date)))))},It=function(){return l((function(e){var t=e(je).getId();return{comments:e(p.store).getCommentsRelatedToPost(t),newComments:e(je).getNewComments()}}))},Ot=function(){var e=(0,c.useDispatch)(je).setNewComments;return l((function(t){var n=t(je).getNewComments();return function(t){e(n.filter((function(e){return e.id!==t})))}}))},Nt=function(){var e=(0,c.useDispatch)(je).setNewComments;return l((function(t){var n=t(je).getNewComments();return function(t){(t=(0,m.trim)(t))&&e(bt(bt([],n,!0),[Tt(Tt({},(0,h.createComment)(0,"post")),{comment:t})],!1))}}))},Ct=function(e){return l((function(t){return t(p.store).getCurrentUserId()===e}))},qt=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},At=function(){var e=l((function(e){return{referenceInput:e(je).getReferenceInput(),references:e(je).getReferences()}})),t=e.references,n=e.referenceInput,r=(0,c.useDispatch)(je),o=r.setReferenceInput,i=r.setReferences,a=(0,m.trim)(n),d=(0,h.isUrl)(a)&&!t.some((function(e){return e.url===a}));return s.createElement("div",{className:"nelio-content-pqe-extra__references"},s.createElement("ul",{className:"nelio-content-pqe-extra__reference-list"},t.map((function(e,t){return s.createElement("li",{key:"nelio-content-reference-".concat(t)},s.createElement(u.ExternalLink,{href:e.url},e.title||e.url))}))),s.createElement("div",{className:"nelio-content-pqe-extra__new-reference"},s.createElement(u.TextControl,{autoComplete:"off",placeholder:(0,f._x)("Suggest reference…","user","nelio-content"),value:n,onChange:o}),s.createElement(u.Button,{variant:"secondary",onClick:function(){(0,h.isUrl)(a)&&(i(qt(qt([],t,!0),[{url:a,title:""}],!1)),o(""))},disabled:!d},(0,f._x)("Add","command","nelio-content"))))};const Dt=window.NelioContent.taskEditor;var Rt=function(){return Rt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Rt.apply(this,arguments)},Vt=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},jt=function(){var e=Bt(),t=l((function(e){return!!e(je).getTasks().length})),n=(0,c.useDispatch)(je),r=n.openTaskPresetLoader,o=n.setTasks,i=l((function(e){return e(je).getTasks()})),a=Mt(i),u=Lt(),d=u[0],f=u[1];return s.createElement(v.TaskPresetLoader,{state:e,actions:t?"replace-or-merge":"add",selection:d,onUpdate:f,onCancel:function(){return r(!1)},onMerge:function(e){o(Vt(Vt([],i,!0),e.map(a("merge")).filter(h.isDefined),!0)),r(!1)},onReplace:function(e){o(e.map(a("replace")).filter(h.isDefined)),r(!1)}})},Lt=function(){return[l((function(e){return e(je).getTaskPresetSelection()})),(0,c.useDispatch)(je).selectTaskPresets]},Mt=function(e){var t=l((function(e){return{postAuthor:e(je).getAuthorId(),postId:e(je).getId(),postType:e(je).getPostType(),postDate:e(je).getDateValue()}})),n=t.postAuthor,r=t.postId,o=t.postType,i=t.postDate;return function(t){return function(a){var s,u,c=Rt(Rt({},(0,h.createTask)()),{assigneeId:null!==(u=null!==(s=a.assigneeId)&&void 0!==s?s:n)&&void 0!==u?u:0,task:a.task,color:a.color,dateType:a.dateType,dateValue:a.dateValue,postId:r,postType:o,dateDue:(0,h.getTaskDateDue)({baseDatetime:i||"now",dateType:a.dateType,dateValue:a.dateValue}),postAuthor:n}),l=(0,m.pick)(c,["assigneeId","task","dateType","dateValue"]);return"merge"===t&&(0,m.some)(e,(function(e){return(0,m.isEqual)(l,(0,m.pick)(e,(0,m.keys)(l)))}))?void 0:c}}},Bt=function(){return l((function(e){return e(je).isTaskPresetLoaderOpen()?"selection":void 0}))},Ut=function(){return Ut=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ut.apply(this,arguments)},Ft=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Ht=function(){return s.createElement(Kt,null)},Kt=(0,p.withSubscriptionCheck)("raw/editorial-tasks",(function(){return s.createElement("div",{className:"nelio-content-pqe-extra__tasks"},s.createElement(Yt,null),s.createElement(zt,null),s.createElement(jt,null),s.createElement(Dt.TaskEditor,null))})),Yt=function(){var e=l((function(e){return e(je).getTasks()}));return s.createElement("ul",{className:"nelio-content-pqe-extra__task-list"},e.map((function(e){return s.createElement(Jt,{key:"nelio-content-task-".concat(e.id),task:e})})))},zt=function(){var e=Wt(),t=(0,c.useDispatch)(je).openTaskPresetLoader,n=(0,c.useDispatch)(Dt.store).openNewTaskEditor,r=Gt().addTask,o=l((function(e){return{canEditSettings:e(p.store).canCurrentUserManagePlugin(),hasTaskPresets:!!e(p.store).getTaskPresets().length,settingsUrl:e(p.store).getAdminUrl("/admin.php?page=nelio-content-settings&subpage=tools--task-presets")}})),i=o.canEditSettings,a=o.hasTaskPresets,d=o.settingsUrl;return s.createElement(s.Fragment,null,s.createElement("div",{className:"nelio-content-pqe-extra__task-list-actions"},a&&s.createElement(u.Button,{size:"small",variant:"secondary",onClick:function(){return t(!0)}},(0,f._x)("Load Tasks","command","nelio-content")),s.createElement(u.Button,{size:"small",variant:"secondary",onClick:function(){return n(Ut(Ut({},(0,h.createTask)()),{dateType:"predefined-offset",dateValue:"0"}),{context:"post",post:e,onSave:r})}},(0,f._x)("Add Task","command","nelio-content"))),!a&&i&&s.createElement("div",{className:"nelio-content-pqe-extra__configure-task-presets"},s.createElement(u.ExternalLink,{href:d},(0,f._x)("Create reusable task presets now","user","nelio-content"))))},Jt=function(e){var t,n=e.task,r=(0,p.useAuthorName)(n.assigneeId,(0,f._x)("Unknown Assignee","text","nelio-content")),o=(0,h.getHumanDateDue)(void 0,n.dateType,n.dateValue),i=Wt(),a=Gt(),l=a.editTask,d=a.deleteTask,m=(0,c.useDispatch)(Dt.store).openExistingTaskEditor;return s.createElement("li",{className:_t()("nelio-content-pqe-extra__task",(t={"nelio-content-pqe-extra__task--completed":!!n.completed},t["nelio-content-pqe-extra__task--is-".concat(n.color)]=!!n.color,t))},s.createElement("div",{className:_t()("nelio-content-pqe-extra__task-desc",{"nelio-content-pqe-extra__task-desc--completed":!!n.completed})},n.task),s.createElement("div",{className:"nelio-content-pqe-extra__task-details"},"".concat(r," • ").concat(o)),s.createElement("div",{className:"nelio-content-pqe-extra__task-actions"},s.createElement(u.Button,{size:"small",variant:"link",onClick:function(){return m(n,{post:i,context:"post",onSave:l})}},(0,f._x)("Edit","command","nelio-content")),s.createElement(v.DeleteButton,{size:"small",onClick:function(){return d(n)}})))},Wt=function(){return l((function(e){return{id:0,title:e(je).getTitle(),type:e(je).getPostType()||"post",author:e(je).getAuthorId()||0,date:e(je).getDateValue(),status:e(je).getPostStatus()||e(je).getPostStatus()||"draft",viewLink:""}}))},Gt=function(){var e=l((function(e){return e(je).getTasks()})),t=(0,c.useDispatch)(je).setTasks;return{addTask:function(n){return t(Ft(Ft([],e,!0),[n],!1))},editTask:function(n){return t((0,m.values)((0,m.keyBy)(Ft(Ft([],e,!0),[n],!1),"id")))},deleteTask:function(n){return t((0,m.without)(e,n))}}},Qt=function(e){var t=e.showLabels,n=Qe(),r=Xt(),o=r[0],i=r[1];return s.createElement(s.Fragment,null,n.map((function(e){var n=e.slug,r=e.labels;return s.createElement(v.ItemSelectControl,{key:n,label:t?r.name:void 0,placeholder:r.search_items,kind:"taxonomy",name:n,value:(0,m.map)(o[n],"id"),onChange:i(n)})})))},Xt=function(){var e=Qe().map((function(e){return e.slug})),t=l((function(t){var n=t(je).getPostTerms;return(0,m.zipObject)(e,e.map(n))})),n=(0,c.useDispatch)(je).setPostTerms,r=(0,c.select)(He.store).getEntityRecord;return[t,function(e){return function(t){return n(e,(0,m.map)(t,(o=e,function(e){var t,n;return{id:e,name:(null===(t=r("taxonomy",o,e))||void 0===t?void 0:t.name)||"Term ".concat(e),slug:(null===(n=r("taxonomy",o,e))||void 0===n?void 0:n.slug)||"term-".concat(e)}})));var o}}]},Zt=function(){var e=tn();return Ze()?"none"===e?null:s.createElement($t,{tab:e}):null},$t=function(e){var t=e.tab,n=en(t),r=nn(),o=(0,c.useDispatch)(je).setExtraInfoTab;return s.createElement("div",{className:"nelio-content-pqe-extra"},s.createElement("div",{className:"nelio-content-pqe-extra__tabs"},r.map((function(e){var n=e.name,r=e.title;return s.createElement("button",{key:n,title:r,className:_t()("nelio-content-pqe-extra__tab",{"nelio-content-pqe-extra__tab--active":t===n}),onClick:function(){return o(n)}},r)}))),s.createElement("div",{className:"nelio-content-pqe-extra__content"},s.createElement(n,null)))},en=function(e){switch(e){case"tasks":return Ht;case"future-actions":return(0,v.getPremiumComponent)("pqe/future-actions","raw/future-actions");case"comments":return kt;case"references":return At;case"taxonomies":return function(){return s.createElement(Qt,{showLabels:!0})}}},tn=function(){return l((function(e){return e(je).getExtraInfoTab()}))},nn=function(){return[Ge()&&{name:"taxonomies",title:(0,f._x)("Taxonomies","text","nelio-content")},Xe("tasks")&&{name:"tasks",title:(0,f._x)("Tasks","text","nelio-content")},Xe("future-actions")&&{name:"future-actions",title:(0,f._x)("Future Actions","text","nelio-content")},Xe("comments")&&{name:"comments",title:(0,f._x)("Comments","text","nelio-content")},Xe("references")&&{name:"references",title:(0,f._x)("References","text","nelio-content")}].filter((function(e){return!!e}))},rn=function(){var e=on(),t=e[0],n=e[1],r=Ke();return s.createElement("div",{className:"nelio-content-post-quick-editor__title"},s.createElement(u.TextControl,{disabled:r,value:t,onChange:function(e){return n(e)},placeholder:(0,f._x)("Title…","text","nelio-content")}))},on=function(){return[l((function(e){return e(je).getTitle()})),(0,c.useDispatch)(je).setTitle]},an=function(){var e=sn(),t=e[0],n=e[1],r=Ke(),o=Ye();return s.createElement("div",{className:"nelio-content-post-quick-editor__time"},s.createElement(v.TimeInput,{disabled:r||o,value:t,onChange:function(e){return n(null!=e?e:"")}}))},sn=function(){return[l((function(e){return e(je).getTimeValue()})),(0,c.useDispatch)(je).setTimeValue]},un=function(e){var t=e.contexts,n=cn(),r=n[0],o=n[1],i=ln(t),a=Ke();return!Je()||i.length<2?null:s.createElement("div",{className:"nelio-content-post-quick-editor__type"},s.createElement(u.SelectControl,{disabled:a,value:r,onChange:o,options:i}))},cn=function(){return[l((function(e){return e(je).getPostType()})),(0,c.useDispatch)(je).setPostType]},ln=function(e){return l((function(t){var n=e.flatMap((function(e){return t(p.store).getPostTypes(e,"create")}));return(0,m.uniq)(n).map((function(e){var t=e.name;return{label:e.labels.singular,value:t}}))}))},dn=function(){var e=fn(),t=e[0],n=e[1],r=mn(),o=Ke(),i=pn();return s.createElement("div",{className:"nelio-content-post-quick-editor__status"},s.createElement(u.SelectControl,{disabled:o||i,value:t,onChange:n,options:r}))},fn=function(){var e=(0,m.map)(mn(),"value"),t=l((function(e){return e(je).getPostStatus()})),n=(0,c.useDispatch)(je).setPostStatus;return(0,s.useEffect)((function(){(0,h.hasHead)(e)&&(t&&e.includes(t)||n(e[0]))}),[e.join(","),t]),[t,n]},mn=function(){var e,t=pn(),n=l((function(e){var t=e(p.store),n=t.canCurrentUserPublishPost,r=t.getPost,o=t.getPostStatuses,i=e(je),a=i.getId,s=(0,i.getPostType)(),u=(0,m.filter)(s?o(s):[],(function(e){return"nelio-content-unscheduled"!==e.slug})),c=r(a());return(0,m.map)(u,(function(e){var t=e.slug,r=e.name,o=e.available,i=e.flags;return{value:t,label:r,disabled:!o||(void 0===i?[]:i).includes("disabled-in-editor")||"future"===t&&!n(c)}}))}));return t?[null!==(e=(0,m.find)(n,{value:h.PUBLISHED}))&&void 0!==e?e:{value:h.PUBLISHED,label:(0,f._x)("Published","text","nelio-content"),disabled:!0}]:(0,m.filter)(n,(function(e){var t=e.value;return"publish"!==t&&"trash"!==t}))},pn=function(){return l((function(e){var t=(0,e(p.store).getPost)((0,e(je).getId)());return"publish"===(null==t?void 0:t.status)}))};function vn(e,t){(0,ke.addFilter)("nelio-content_post-quick-editor_onSavePremiumItems","save".concat((0,h.pascalCase)(e),"s"),(function(n,r,o,i){return e===r?t(o,i):n}))}var hn=function(e){var t=e.className,n=void 0===t?"":t,r=e.context,o=yn(),i=Tn(),a=s.createElement(gn,null),c=(0,m.isArray)(r)?r:[r];return o?i?s.createElement(u.Modal,{className:"nelio-content-post-quick-editor ".concat(n),title:(0,f._x)("Loading…","text","nelio-content"),isDismissible:!1,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,onRequestClose:function(){}},s.createElement("div",{style:{display:"flex",justifyContent:"center"}},s.createElement(u.Spinner,null))):s.createElement(u.Modal,{className:"nelio-content-post-quick-editor ".concat(n),title:a,isDismissible:!1,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,onRequestClose:function(){}},s.createElement("div",{className:"nelio-content-post-quick-editor__title-type-and-status"},s.createElement(rn,null),s.createElement(un,{contexts:c}),s.createElement(dn,null)),s.createElement("div",{className:"nelio-content-post-quick-editor__author-and-datetime"},s.createElement(ft,null),s.createElement(vt,null),s.createElement(an,null)),s.createElement(Zt,null),s.createElement(Me,null),s.createElement(et,null),s.createElement(lt,null)):null},gn=function(){var e=En();return s.createElement("div",{className:"nelio-content-post-quick-editor__header"},s.createElement("div",{className:"nelio-content-post-quick-editor__header-text"},e),s.createElement("div",{className:"nelio-content-post-quick-editor__header-help"},s.createElement(v.ContextualHelp,{context:"post-quick-editor",walkthrough:Le,autostart:!0})))},yn=function(){return l((function(e){return e(je).isVisible()}))},En=function(){return l((function(e){e(p.store),e(je);var t=e(je).isNewPost(),n=e(je).getPostType(),r=n&&e(p.store).getPostType(n);return r?t?r.labels.new:r.labels.edit:t?(0,f._x)("New post","text","nelio-content"):(0,f._x)("Edit post","text","nelio-content")}))},Tn=function(){var e=l((function(e){return e(je).isNewPost()})),t=kn(),n=xn(),r=bn();return!e&&(t||n||r)},bn=function(){var e=(0,c.useDispatch)(je).setReferences,t=l((function(e){var t=e(je).getId();return{references:e(p.store).getSuggestedReferences(t),isLoading:!e(p.store).hasFinishedResolution("getSuggestedReferences",[t])&&!e(p.store).hasResolutionFailed("getSuggestedReferences",[t]),isVisible:e(je).isVisible()}})),n=t.references,r=t.isLoading,o=t.isVisible;return(0,s.useEffect)((function(){o&&!r&&e(n)}),[o,e,JSON.stringify(n),r]),r},kn=function(){var e=(0,c.useDispatch)(je).setTasks,t=l((function(e){var t=e(je).getId();return{tasks:e(p.store).getTasksRelatedToPost(t),isLoading:!e(p.store).hasFinishedResolution("getTasksRelatedToPost",[t])&&!e(p.store).hasResolutionFailed("getTasksRelatedToPost",[t]),isVisible:e(je).isVisible()}})),n=t.tasks,r=t.isLoading,o=t.isVisible;return(0,s.useEffect)((function(){o&&!r&&e(n)}),[o,e,JSON.stringify(n),r]),r},xn=function(){var e=(0,c.useDispatch)(je).setPremiumItems,t=l((function(e){var t=e(je).getId();return{premiumItems:e(p.store).getAllPremiumItemsRelatedToPost(t),isLoading:!e(p.store).hasFinishedResolution("getAllPremiumItemsRelatedToPost",[t])&&!e(p.store).hasResolutionFailed("getAllPremiumItemsRelatedToPost",[t]),isVisible:e(je).isVisible()}})),n=t.premiumItems,r=t.isLoading,o=t.isVisible;return(0,s.useEffect)((function(){o&&!r&&(0,m.toPairs)(n).map((function(e){var t=e[0],n=e[1];return n?[t,n]:void 0})).filter(h.isDefined).forEach((function(t){var n=t[0],r=t[1];return e(n,r)}))}),[o,e,JSON.stringify(n),r]),r}},6942:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.m=t,e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){n=e[l][0],o=e[l][1],i=e[l][2];for(var s=!0,u=0;u<n.length;u++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[u])))?n.splice(u--,1):(s=!1,i<a&&(a=i));if(s){e.splice(l--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={9303:0,7760:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,a=n[0],s=n[1],u=n[2],c=0;if(a.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(u)var l=u(r)}for(t&&t(n);c<a.length;c++)i=a[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(l)},n=self.webpackChunkNelioContent=self.webpackChunkNelioContent||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[7760],(()=>r(6615)));o=r.O(o);var i=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var a in o)i[a]=o[a];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();