(()=>{var e,t={1084:(e,t,n)=>{"use strict";n.r(t),n.d(t,{initField:()=>q});var r={};n.r(r),n.d(r,{getAttributes:()=>f,getValue:()=>d});var o={};n.r(o),n.d(o,{setAttributes:()=>p,setValue:()=>m});const a=window.wp.element,i=window.wp.data;function s(e,t){return(0,i.subscribe)(e,t)}function l(e,t){return(0,i.useSelect)(e,t)}var c={values:{},attributes:{}},u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},u.apply(this,arguments)},d=function(e,t){return e.values[t]},f=function(e,t){return e.attributes[t]};function m(e,t){return{type:"SET_FIELD_VALUE",field:e,value:t}}function p(e,t){return{type:"SET_FIELD_ATTRIBUTES",field:e,attributes:t}}var v=(0,i.createReduxStore)("nelio-content/individual-settings",{reducer:function(e,t){var n;return void 0===e&&(e=c),null!==(n=function(e,t){var n,r;switch(t.type){case"SET_FIELD_VALUE":return u(u({},e),{values:u(u({},e.values),(n={},n[t.field]=t.value,n))});case"SET_FIELD_ATTRIBUTES":return u(u({},e),{attributes:u(u({},e.attributes),(r={},r[t.field]=u(u({},e.attributes[t.field]),t.attributes),r))})}}(e,t))&&void 0!==n?n:e},controls:i.controls,actions:o,selectors:r});!function(e){(0,i.register)(e)}(v);var h=[],g=(0,i.select)(v).getValue("nelio-content_settings[analytics_post_types]")||h;function y(e,t){(0,(0,i.dispatch)(v).setAttributes)("nelio-content_settings[ga4_property_id]",{disabled:!e.length,refreshDisabled:t})}s((function(){var e=(0,i.select)(v).getValue("nelio-content_settings[analytics_post_types]")||h;e!==g&&(g=e,y(e,!0))}),v),y(g,!1);var b=(0,i.select)(v).getValue("nelio-content_settings[efi_post_types]")||h;function _(e){var t=!e.length,n=document.getElementById("efi-mode");n&&(n.disabled=t);var r=document.getElementById("auto-feat-image");r&&(r.disabled=t)}s((function(){var e=(0,i.select)(v).getValue("nelio-content_settings[efi_post_types]")||h;e!==b&&_(b=e)}),v),_(b);const E=window.wp.i18n,x=window.NelioContent.components,w=window.lodash,P=window.NelioContent.data;var R={postTypes:[],isMandatory:!1,help:""},C=function(){return C=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},C.apply(this,arguments)};function N(e,t){var n=l((function(t){return t(v).getAttributes(e)})),r=(0,i.useDispatch)(v).setAttributes;return[C(C({},t),n),function(t){return r(e,t)}]}function O(e){var t=l((function(t){return t(v).getValue(e)})),n=(0,i.useDispatch)(v).setValue;return[t,function(t){return n(e,t)}]}const S=window.wp.apiFetch,I=n.n(S)(),A=window.wp.components;var k={status:"loading"};const T=window.wp.url,D=window.NelioContent.utils;function B(e,t){t({error:!1,isRefreshing:!0,isStartingRefresh:!0,isRefreshingOver:!1,refreshPostCount:0,refreshPostIndex:0}),j(e,1,t)}function j(e,t,n){t<1?M(0,n):I({path:(0,T.addQueryArgs)("/nelio-content/v1/analytics/post",{period:e,page:t})}).then((function(r){var o=r.ids,a=r.more,i=r.total,s=r.ppp;if((0,D.isEmpty)(o))M(i,n);else{var l=s*(t-1);n({isStartingRefresh:!1,refreshPostCount:i,refreshPostIndex:Math.min(i,l)});var c=(0,w.map)(o,(function(e){return I({path:"/nelio-content/v1/analytics/post/".concat(e,"/update"),method:"PUT"}).then((function(){++l,n({refreshPostIndex:Math.min(i,l)})}))}));Promise.all(c).then((function(){return a?j(e,t+1,n):M(i,n)})).catch((function(e){var t=function(e){var t="".concat((0,E._x)("Unknown Error","text","nelio-content"),". ").concat((0,E._x)("Unable to refresh analytics.","text","nelio-content"));return e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message&&e.message||t}(e);n({error:t,isRefreshing:!1,isStartingRefresh:!1,isRefreshingOver:!0,refreshPostCount:0})}))}}))}function M(e,t){t({isRefreshing:!1,isStartingRefresh:!1,isRefreshingOver:!0,refreshPostCount:e,refreshPostIndex:e})}var V={disabled:!1,refreshDisabled:!1,isRefreshDialogOpen:!1,isRefreshing:!1,isRefreshingOver:!1,isStartingRefresh:!1,isValidating:!1,refreshPeriod:"month",refreshPostCount:0,refreshPostIndex:0,mode:"init",error:!1},U=function(e){var t=e.className,n=e.name,r=e.disabled,o=N(n,V),i=o[0],s=o[1],l=i.error,c=i.refreshDisabled,u=i.isRefreshDialogOpen,d=i.isRefreshing,f=i.isStartingRefresh,m=i.isRefreshingOver,p=i.refreshPeriod,v=i.refreshPostCount,h=i.refreshPostIndex;return a.createElement(a.Fragment,null,a.createElement(A.Button,{variant:"secondary",size:"small",disabled:r||c,onClick:function(){return s({error:!1,isRefreshDialogOpen:!0,isRefreshing:!1,refreshPeriod:"month"})}},(0,E._x)("Refresh Analytics","command","nelio-content")),u&&a.createElement(A.Modal,{isDismissible:!1,title:(0,E._x)("Refresh Analytics","text","nelio-content"),onRequestClose:function(){}},a.createElement("div",{className:"".concat(t,"__dialog-content")},!d&&!m&&a.createElement(A.SelectControl,{disabled:d,value:p,onChange:function(e){return s({refreshPeriod:e})},options:F}),f&&a.createElement(x.ProgressBar,{label:(0,E._x)("Retrieving posts…","text","nelio-content")}),d&&!f&&a.createElement(x.ProgressBar,{current:h,total:v,label:"".concat(h," / ").concat(v)}),m&&a.createElement(x.ProgressBar,{current:h,total:v,label:(0,E.sprintf)(/* translators: number of posts */ /* translators: number of posts */
(0,E._nx)("%d post updated!","%d posts updated!",v,"text","nelio-content"),v)}),!!l&&a.createElement("p",{className:"".concat(t,"__error-message")},l)),a.createElement("div",{className:"".concat(t,"__dialog-actions")},a.createElement(A.Button,{variant:"secondary",disabled:d,onClick:function(){return s({error:!1,isRefreshDialogOpen:!1,isRefreshing:!1,isStartingRefresh:!1,isRefreshingOver:!1,refreshPeriod:"month",refreshPostCount:0,refreshPostIndex:0})}},(0,E._x)("Close","command","nelio-content")),!m&&a.createElement(A.Button,{variant:"primary",isBusy:d,disabled:d,onClick:function(){return B(p,(function(e){return s(e)}))}},d?(0,E._x)("Refreshing…","text","nelio-content"):(0,E._x)("Refresh Analytics","command","nelio-content")))))},F=[{value:"month",label:(0,E._x)("Posts from last month","text","nelio-content")},{value:"year",label:(0,E._x)("Posts from last year","text","nelio-content")},{value:"all",label:(0,E._x)("All posts","text","nelio-content")}],G=function(e){var t=e.className,n=void 0===t?"":t,r=e.disabled,o=e.mode,i=e.name,s=e.selectProfile,l=void 0===s?function(){}:s;return a.createElement("div",{className:n},a.createElement("div",{className:"".concat(n,"__connection-actions")},a.createElement(A.Button,{variant:"secondary",size:"small",disabled:r,onClick:l},(0,E._x)("Connect Google Analytics","command","nelio-content")),a.createElement(U,{name:i,className:n,disabled:r})),"awaiting-profile-selection"===o&&a.createElement("div",{className:"".concat(n,"__overlay")},a.createElement("div",{className:"".concat(n,"__overlay-content")},(0,E._x)("Please select a Google account…","user","nelio-content"))),"checking-google-analytics"===o&&a.createElement("div",{className:"".concat(n,"__overlay")},a.createElement("div",{className:"".concat(n,"__overlay-content")},(0,E._x)("Please wait a moment…","user","nelio-content"))))},L=function(e){var t=e.className,n=e.disabled,r=e.name,o=O(r),i=o[0],s=void 0===i?"":i,l=o[1],c=N(r,V),u=(c[0],c[1]),d=function(e){u({refreshDisabled:!0}),l(e)};return a.createElement("div",{className:t},a.createElement("div",{className:"".concat(t,"__property-control")},a.createElement("input",{type:"hidden",name:r,value:s}),a.createElement(A.TextControl,{placeholder:(0,E._x)("GA4 Property Identifier","text","nelio-content"),disabled:n,value:s,onChange:d,help:(0,a.createInterpolateElement)((0,E.sprintf)("<span>%s</span>",(0,E._x)("To determine your GA4 Property Id, please <a>follow these instructions</a>","user","nelio-content")),{a:a.createElement(A.ExternalLink,{href:"https://developers.google.com/analytics/devguides/reporting/data/v1/property-id#google_analytics"}),span:a.createElement("span",{className:"description"})})})),a.createElement("div",{className:"".concat(t,"__property-control-actions")},a.createElement(A.Button,{variant:"secondary",size:"small",disabled:n,onClick:function(){u({mode:"init",refreshDisabled:!0}),d("")}},(0,E._x)("Remove Google Analytics","command","nelio-content")),a.createElement(U,{name:r,className:t,disabled:n})))},z={PostTypeSetting:function(e){var t=e.name,n=l((function(e){return e(P.store).getPluginUrl("/includes/lib/settings/assets/images/help.png")})),r=O(t),o=r[0],i=void 0===o?[]:o,s=r[1],c=(0,a.useState)(!1),u=c[0],d=c[1],f=N(t,R)[0],m=f.postTypes,p=m.filter((function(e){var t=e.value;return i.includes(t)}));return a.createElement(a.Fragment,null,a.createElement("div",{className:"nelio-content-post-type-setting"},a.createElement("input",{type:"hidden",name:t,value:i}),!!f.help&&a.createElement("img",{alt:(0,E._x)("Help","command","nelio-content"),className:"nelio-content-post-type-setting--help",src:n,onClick:function(){return d(!u)},height:"16",width:"16"}),a.createElement(x.StylizedSelectControl,{className:"nelio-content-post-type-setting--select",isMulti:!0,isMandatory:f.isMandatory,options:m,value:p,onChange:function(e){return s((0,w.map)(e,"value"))}})),u&&a.createElement("p",{className:"description"},f.help))},CloudNotificationEmailsSetting:function(e){var t=e.name,n=N(t,k),r=n[0],o=n[1],i=O(t),s=i[0],c=void 0===s?[]:s,u=i[1],d=l((function(e){return e(P.store).getSiteId()})),f=l((function(e){return e(P.store).getApiRoot()})),m=l((function(e){return e(P.store).getAuthenticationToken()})),p=r.status;return(0,a.useEffect)((function(){var e,t,n,r;e=void 0,t=void 0,r=function(){var e,t;return function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(n){switch(n.label){case 0:if(!d||!m)return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,I({url:"".concat(f,"/site/").concat(d),method:"GET",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(m)}})];case 2:return e=n.sent(),t=e.notificationEmails,u(void 0===t?[]:t),o({status:"ready"}),[3,4];case 3:return n.sent(),u([]),o({status:"error"}),[3,4];case 4:return[2]}}))},new((n=void 0)||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))}),[d,m]),a.createElement("div",{className:"nelio-content-cloud-notification-emails-setting"},"loading"===p&&a.createElement(A.Spinner,null),"error"===p&&a.createElement("p",{className:"nelio-content-cloud-notification-emails-setting__error-message"},(0,E._x)("Unable to retrieve cloud notification emails. Please try again later.","user","nelio-content")),"ready"===p&&a.createElement(a.Fragment,null,a.createElement("input",{type:"hidden",name:t,value:c.map((function(e){return e.replace(/\s/g,"")})).filter(Boolean).join(",")}),a.createElement("p",null,(0,E._x)("Please write one email address per line:","user","nelio-content")),a.createElement("textarea",{className:"nelio-content-cloud-notification-emails-setting__input",placeholder:(0,E._x)("user@example.com","text","nelio-content"),value:c.join("\n"),onChange:function(e){return u(e.target.value.split("\n"))}}),a.createElement("p",null,a.createElement("span",{className:"description"},(0,E._x)("Send email notifications to the addresses above when a social profile expires and requires re-authentication.","text","nelio-content")))))},GoogleAnalyticsSetting:function(e){var t=e.name,n=N(t,V),r=n[0],o=n[1],s=function(e){return o({mode:e,refreshDisabled:!0})},l=r.disabled,c=r.mode;return"ga4-property-id"===c?a.createElement(L,{className:"nelio-content-google-analytics-setting",disabled:l,name:t}):a.createElement(G,{className:"nelio-content-google-analytics-setting",name:t,disabled:l,mode:c,selectProfile:function(){return function(e){var t=e.onOpen,n=e.onClose,r=void 0===n?function(){}:n;(void 0===t?function(){}:t)();var o=(0,i.select)(P.store).getSiteId(),a=(0,i.select)(P.store).getRestUrl("/nelio-content/v1/analytics/connect"),s=(0,i.select)(P.store).getApiRoot(),l=window.open((0,T.addQueryArgs)("".concat(s,"/connect/ga"),{siteId:o,redirect:a}),"","width=640,height=480"),c=setInterval((function(){(null==l?void 0:l.closed)&&(clearInterval(c),r())}),500)}({onOpen:function(){return s("awaiting-profile-selection")},onClose:function(){s("checking-google-analytics"),I({path:"/nelio-content/v1/analytics/check"}).then((function(e){return s(e?"ga4-property-id":"init")}))}})}})}};function q(e,t){var n=t.component,r=z[n];if(r){var o=document.getElementById(e);if(o){var s,l,c=t.name,u=t.value,d=t.attributes,f=(0,i.dispatch)(v),m=f.setValue,p=f.setAttributes;m(c,u),p(c,d),s=a.createElement(r,{name:c}),(l=o)&&(a.createRoot?(0,a.createRoot)(l).render(s):(0,a.render)(s,l))}}}var Q=document.getElementById("nelio-content-settings-form");null==Q||Q.addEventListener("keypress",(function(e){if(e){var t=e.target||e.srcElement;t&&"submit"!==t.id&&(/textarea/i.test(t.tagName)||13===(e.keyCode||e.which||e.charCode||0)&&e.preventDefault())}}))}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,n,o,a)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],a=e[u][2];for(var s=!0,l=0;l<n.length;l++)(!1&a||i>=a)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(s=!1,a<i&&(i=a));if(s){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,o,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={8284:0,7491:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,i=n[0],s=n[1],l=n[2],c=0;if(i.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(l)var u=l(r)}for(t&&t(n);c<i.length;c++)a=i[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(u)},n=self.webpackChunkNelioContent=self.webpackChunkNelioContent||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[7491],(()=>r(1084)));o=r.O(o);var a=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var i in o)a[i]=o[i];o.__esModule&&Object.defineProperty(a,"__esModule",{value:!0})})();