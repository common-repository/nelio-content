(()=>{var e,t={3219:(e,t,n)=>{"use strict";n.r(t),n.d(t,{editPost:()=>s});var r={};n.r(r),n.d(r,{getAuthorId:()=>W,getAutoShareEndMode:()=>se,getAutoShareEndModeDuration:()=>Pe,getAutoShareEndModes:()=>Ce,getAutomationSources:()=>ce,getContent:()=>z,getDate:()=>X,getDeletingMessageIds:()=>Me,getEditingReference:()=>Se,getEditorialCommentInputValue:()=>D,getExcerpt:()=>H,getExternalFeaturedImageAlt:()=>G,getExternalFeaturedImageAltField:()=>j,getExternalFeaturedImageUrl:()=>U,getExternalFeaturedImageUrlField:()=>B,getExternalFeaturedImageView:()=>F,getFeaturedImageId:()=>ee,getFeaturedImageSrc:()=>te,getFollowers:()=>Z,getImages:()=>re,getOverallPostQualityStatus:()=>me,getPanelStatuses:()=>Ie,getPermalink:()=>$,getPermalinkTemplate:()=>J,getPost:()=>K,getPostId:()=>V,getPostQualitySettings:()=>ue,getPostType:()=>q,getQualityCheckRationale:()=>pe,getQualityCheckStatus:()=>fe,getQualityCheckType:()=>he,getQualityCheckTypes:()=>Ee,getQueryArgs:()=>ie,getReferenceByUrl:()=>ve,getStatus:()=>ne,getSuggestedReferenceUrl:()=>Ae,getSuggestedReferences:()=>ye,getTaskPresetLoaderState:()=>Qe,getTaskPresetSelection:()=>je,getTerms:()=>oe,getTitle:()=>Y,isAutoShareEnabled:()=>ae,isClassicEditor:()=>xe,isClearingTimeline:()=>Oe,isDeletingEditorialComment:()=>O,isEditorialTaskBeingDeleted:()=>Ue,isEditorialTaskBeingSynched:()=>Ge,isElementorEditor:()=>ke,isGeneratingTimeline:()=>De,isPanelOpen:()=>we,isPostReady:()=>Q,isPremiumItemBeingDeleted:()=>ge,isQualityAnalysisFullyIntegrated:()=>de,isReferenceEditorVisible:()=>be,isReferenceLoading:()=>_e,isReferenceSaving:()=>Te,isRetrievingEditorialComments:()=>M,isRetrievingEditorialTasks:()=>Be,isRetrievingSocialMessages:()=>Fe,isSocialMessageBeingDeleted:()=>Le,isSynchingEditorialComment:()=>L,isTimelineBusy:()=>Ne,shouldAuthorBeFollower:()=>Re});var o={};n.r(o),n.d(o,{addQualityCheckType:()=>bt,cancelEditionOfExternalFeaturedImage:()=>He,closeReferenceEditor:()=>Pt,discardReference:()=>Rt,doOpenReferenceEditor:()=>Ot,editExternalFeaturedImage:()=>Ye,enableAutoShare:()=>ft,includeAuthorInFollowers:()=>Gt,markAsLoadingPostItems:()=>ht,markEditorialCommentAsDeleting:()=>qe,markEditorialCommentAsSynching:()=>Ve,markEditorialTaskAsDeleting:()=>qt,markEditorialTaskAsSynching:()=>Vt,markPremiumItemAsDeleting:()=>Tt,markQualityAnalysisAsFullyIntegrated:()=>vt,markReferenceAsLoading:()=>Nt,markReferenceAsSaving:()=>Dt,markSocialMessageAsDeleting:()=>jt,markTimelineAsClearing:()=>Kt,markTimelineAsGenerating:()=>Qt,openTaskPresetLoader:()=>Yt,receiveReferences:()=>xt,removeCustomField:()=>Ze,removeExternalFeaturedImage:()=>Xe,removeFeaturedImage:()=>ut,removeQualityCheckType:()=>St,selectTaskPresets:()=>Ht,setAuthor:()=>at,setAutoShareEndMode:()=>pt,setAutoShareEndModes:()=>Bt,setAutomationSources:()=>gt,setContent:()=>ot,setCustomField:()=>Je,setDate:()=>it,setEditorToClassic:()=>Ft,setEditorToElementor:()=>Ut,setEditorialCommentInputValue:()=>Ke,setExcerpt:()=>rt,setExternalFeaturedImage:()=>ze,setExternalFeaturedImageAltField:()=>$e,setExternalFeaturedImageUrlField:()=>We,setFeaturedImage:()=>lt,setFollowers:()=>ct,setPanelSettings:()=>Lt,setPermalink:()=>st,setPost:()=>et,setPostId:()=>tt,setPostQualitySettings:()=>yt,setQueryArgs:()=>Et,setStatus:()=>dt,setSuggestedReferenceUrl:()=>kt,setTaskPresetsState:()=>zt,setTerms:()=>mt,setTitle:()=>nt,suggestReference:()=>It,suggestReferences:()=>wt,togglePanel:()=>Mt,updateEditingReference:()=>Ct,updateQualityCheckItem:()=>_t,updateQualityCheckSettings:()=>At});var i={};n.r(i),n.d(i,{clearTimeline:()=>Gn,createEditorialComment:()=>en,deleteEditorialComment:()=>tn,deleteEditorialTask:()=>Jn,deletePremiumItem:()=>dn,deleteSocialMessage:()=>Bn,generateTimeline:()=>Un,instantiatePresets:()=>$n,isElementor:()=>Yn,loadPostItems:()=>an,markTaskAsCompleted:()=>Wn,openReferenceEditor:()=>pn,saveAndCloseEditingReference:()=>gn,savePostAndGenerateTimeline:()=>Fn,saveReference:()=>En,updateDatesInPostRelatedItems:()=>sn});var a={};n.r(a),n.d(a,{getReferenceByUrl:()=>ir});var s={};n.r(s),n.d(s,{EditorialComments:()=>Pr,EditorialTasks:()=>Wr,ExternalFeaturedImage:()=>ro,Notifications:()=>ao,QualityAnalysis:()=>No,QualityAnalysisSummary:()=>Co,ReferenceEditor:()=>uo,References:()=>Ro,SocialMediaMetabox:()=>gi,SocialMediaSidebar:()=>Si,SocialMediaSummary:()=>Ei,SocialMediaTools:()=>Ai,deregisterQualityCheck:()=>wi,getDisabledProfiles:()=>An,onDeletePremiumItem:()=>Li,processHtml:()=>xn,registerQualityCheck:()=>Ii,store:()=>lr,updatePostQualitySettings:()=>ki,updateQualityCheckSettings:()=>Ri,useDisabledProfiles:()=>Oi,usePanelToggling:()=>Di,withLoadingCheck:()=>Cr,withPostReadyCheck:()=>Rr});const c=window.wp.data;function l(e,t){return(0,c.subscribe)(e,t)}function u(e,t){return(0,c.useSelect)(e,t)}function d(e){return(0,c.resolveSelect)(e)}const m=window.NelioContent.utils,f=window.lodash;var p=n(4396),g={comments:{synching:[],deleting:[],input:"",isRetrievingComments:!1},externalFeaturedImage:{view:"no-image",fields:{url:"",alt:""},imageUrl:void 0,imageAlt:""},post:{id:(0,p.L8)()(0),author:(0,p.L8)()(0),authorName:"",content:"",customFields:{},customPlaceholders:{},date:"",editLink:(0,p.L8)()(""),excerpt:"",followers:[],imageId:0,imageSrc:!1,images:[],isAutoShareEnabled:!1,permalink:(0,p.L8)()(""),permalinks:{},permalinkQueryArgs:[],permalinkTemplate:"",statistics:{engagement:{},pageviews:void 0},status:m.AUTO_DRAFT,taxonomies:{},thumbnailSrc:!1,title:"",type:m.POST,typeName:"",viewLink:(0,p.L8)()(""),autoShareEndMode:"never",automationSources:{useCustomSentences:!1,customSentences:[]}},postQuality:{checks:{},isFullyIntegrated:!1,settings:{allowedBads:1,allowedImprovables:2,unacceptableImprovables:4}},qualityCheckTypes:{},references:{byUrl:{},byType:{suggested:[]},status:{loading:[],saving:[]},editor:{isActive:!1},suggestedUrl:""},settings:{isClassicEditor:!1,isElementorEditor:!1,panels:{},shouldAuthorBeFollower:!1,autoShareEndModes:[]},social:{deleting:[],timelineStatus:"ready",isRetrievingSocialMessages:!1},tasks:{preset:void 0,synching:[],deleting:[],isRetrievingTasks:!1},premiumByType:{}},E=function(){return E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},E.apply(this,arguments)},h=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},v=function(){return v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},v.apply(this,arguments)},y=function(){return y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},y.apply(this,arguments)};function _(e){void 0===e&&(e="");var t=e.match(/img[^>]*src="[^"]+"|img[^>]*src='[^']+'/gi)||[];return(0,f.uniq)(t.map((function(e){return e.replace(/.*src=.(.*)./,"$1")})).filter(m.isUrl))}var T=function(){return T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},T.apply(this,arguments)},b=function(){return b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},b.apply(this,arguments)},S=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},A=function(){return A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},A.apply(this,arguments)},x=function(){return x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},x.apply(this,arguments)},k=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},I=function(){return I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},I.apply(this,arguments)},w=function(){return w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},w.apply(this,arguments)},R=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},C=function(){return C=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},C.apply(this,arguments)},P=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const N=(0,c.combineReducers)({comments:function(e,t){var n;return void 0===e&&(e=g.comments),null!==(n=function(e,t){switch(t.type){case"SET_EDITORIAL_COMMENT_INPUT_VALUE":return E(E({},e),{input:t.value});case"MARK_EDITORIAL_COMMENT_AS_SYNCHING":return E(E({},e),{synching:t.isSynching?h(h([],e.synching,!0),[t.commentId],!1):(0,f.without)(e.synching,t.commentId)});case"MARK_EDITORIAL_COMMENT_AS_DELETING":return E(E({},e),{deleting:t.isDeleting?h(h([],e.deleting,!0),[t.commentId],!1):(0,f.without)(e.deleting,t.commentId)});case"MARK_AS_LOADING_POST_ITEMS":return E(E({},e),{isRetrievingComments:t.isLoading})}}(e,t))&&void 0!==n?n:e},externalFeaturedImage:function(e,t){var n;return void 0===e&&(e=g.externalFeaturedImage),null!==(n=function(e,t){var n;switch(t.type){case"SET_EXTERNAL_FEATURED_IMAGE":return{view:"image",fields:{url:t.url,alt:t.altText},imageUrl:t.url,imageAlt:t.altText};case"REMOVE_EXTERNAL_FEATURED_IMAGE":return{view:"no-image",fields:{url:"",alt:""},imageUrl:void 0,imageAlt:""};case"SET_EXTERNAL_FEATURED_IMAGE_URL_FIELD":return v(v({},e),{fields:v(v({},e.fields),{url:t.url})});case"SET_EXTERNAL_FEATURED_IMAGE_ALT_FIELD":return v(v({},e),{fields:v(v({},e.fields),{alt:t.altText})});case"EDIT_EXTERNAL_FEATURED_IMAGE":return v(v({},e),{view:"edit-image"});case"CANCEL_EDITION_OF_EXTERNAL_FEATURED_IMAGE":return v(v({},e),{view:e.imageUrl?"image":"no-image",fields:{url:null!==(n=e.imageUrl)&&void 0!==n?n:"",alt:e.imageAlt}})}}(e,t))&&void 0!==n?n:e},post:function(e,t){var n;return void 0===e&&(e=g.post),null!==(n=function(e,t){var n,r,o,i;switch(t.type){case"SET_POST_ID":return e.id?e:y(y({},e),{id:e.id});case"SET_POST":var a=t.post,s=a.imageSrc,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(a,["imageSrc"]);return y(y(y({},g.post),c),{imageSrc:s||!1,images:_(null==c?void 0:c.content),automationSources:y(y({},g.post.automationSources),null==c?void 0:c.automationSources)});case"SET_QUERY_ARGS":return y(y({},e),{permalinkQueryArgs:t.args});case"SET_CUSTOM_FIELD":return y(y({},e),{customFields:(0,f.has)(e.customFields,t.key)?y(y({},e.customFields),(n={},n[t.key]=y(y({},e.customFields[t.key]),{value:t.value}),n)):e.customFields});case"REMOVE_CUSTOM_FIELD":return y(y({},e),{customFields:(0,f.has)(e.customFields,t.key)?y(y({},e.customFields),(r={},r[t.key]=y(y({},e.customFields[t.key]),{value:""}),r)):e.customFields});case"SET_TITLE":return y(y({},e),{title:t.title});case"SET_EXCERPT":return y(y({},e),{excerpt:t.excerpt});case"SET_CONTENT":return y(y({},e),{content:t.content,images:_(t.content)});case"SET_DATE":return y(y({},e),{date:null!==(i=t.date)&&void 0!==i&&i});case"SET_AUTHOR":return y(y({},e),{author:t.authorId,authorName:t.authorName});case"SET_PERMALINK":return y(y({},e),{permalink:t.permalink});case"SET_FEATURED_IMAGE":return y(y({},e),{imageId:t.imageId,imageSrc:t.imageSrc,thumbnailSrc:t.thumbnailSrc});case"REMOVE_FEATURED_IMAGE":return y(y({},e),{imageId:0,imageSrc:!1,thumbnailSrc:!1});case"SET_FOLLOWERS":return y(y({},e),{followers:t.followers});case"SET_STATUS":return y(y({},e),{status:t.status});case"SET_TERMS":return y(y({},e),{taxonomies:y(y({},e.taxonomies),(o={},o[t.taxonomy]=t.terms,o))});case"ENABLE_AUTO_SHARE":return y(y({},e),{isAutoShareEnabled:t.isAutoShareEnabled});case"SET_AUTO_SHARE_END_MODE":return y(y({},e),{autoShareEndMode:t.autoShareEndMode});case"SET_AUTOMATION_SOURCES":return y(y({},e),{automationSources:y(y({},e.automationSources),t.sources)});case"MARK_AS_LOADING_POST_ITEMS":return e}}(e,t))&&void 0!==n?n:e},postQuality:function(e,t){var n;return void 0===e&&(e=g.postQuality),null!==(n=function(e,t){var n;switch(t.type){case"ADD_QUALITY_CHECK_TYPE":case"UPDATE_QUALITY_CHECK_SETTINGS":return e;case"REMOVE_QUALITY_CHECK_TYPE":return T(T({},e),{checks:(0,f.omit)(e.checks,t.name)});case"MARK_QUALITY_ANALYSIS_AS_FULLY_INTEGRATED":return T(T({},e),{isFullyIntegrated:t.isFullyIntegrated});case"UPDATE_QUALITY_CHECK_ITEM":return T(T({},e),{checks:T(T({},e.checks),(n={},n[t.name]={status:t.status,text:t.text},n))});case"SET_POST_QUALITY_SETTINGS":var r=T({allowedBads:e.settings.allowedBads,allowedImprovables:e.settings.allowedImprovables,unacceptableImprovables:e.settings.unacceptableImprovables},t.settings);return T(T({},e),{settings:{allowedBads:r.allowedBads,allowedImprovables:r.allowedImprovables,unacceptableImprovables:r.unacceptableImprovables}})}}(e,t))&&void 0!==n?n:e},premiumByType:function(e,t){var n;return void 0===e&&(e=g.premiumByType),null!==(n=function(e,t){var n,r,o;if("MARK_PREMIUM_ITEM_AS_DELETING"===t.type){var i=null!==(o=null===(r=e[t.typeName])||void 0===r?void 0:r.deleting)&&void 0!==o?o:[];return b(b({},e),((n={})[t.typeName]=b(b({},e[t.typeName]),{deleting:t.isDeleting?S(S([],i,!0),[t.itemId],!1):(0,f.without)(i,t.itemId)}),n))}}(e,t))&&void 0!==n?n:e},qualityCheckTypes:function(e,t){var n;return void 0===e&&(e=g.qualityCheckTypes),null!==(n=function(e,t){var n,r;switch(t.type){case"ADD_QUALITY_CHECK_TYPE":return A(A({},e),((n={})[t.definition.name]=t.definition,n));case"REMOVE_QUALITY_CHECK_TYPE":return e[t.name]?(0,f.omit)(e,t.name):e;case"UPDATE_QUALITY_CHECK_SETTINGS":var o=e[t.name];return o?A(A({},e),((r={})[t.name]=A(A({},o),{settings:A(A({},o.settings),t.settings)}),r)):e}}(e,t))&&void 0!==n?n:e},references:function(e,t){var n;return void 0===e&&(e=g.references),null!==(n=function(e,t){switch(t.type){case"RECEIVE_REFERENCES":return x(x({},e),{byUrl:t.references.reduce((function(e,t){var n;return x(x({},e),((n={})[t.url]=x(x({},e[t.url]),t),n))}),e.byUrl)});case"SET_SUGGESTED_REFERENCE_URL":return x(x({},e),{suggestedUrl:t.url});case"SUGGEST_REFERENCE":var n=e.byType.suggested;return x(x({},e),{byType:x(x({},e.byType),{suggested:n.includes(t.url)?n:k(k([],n,!0),[t.url],!1)})});case"SUGGEST_REFERENCES":return x(x({},e),{byType:x(x({},e.byType),{suggested:(0,f.uniq)(k(k([],e.byType.suggested,!0),t.urls,!0))})});case"DISCARD_REFERENCE":return x(x({},e),{byType:x(x({},e.byType),{suggested:(0,f.without)(e.byType.suggested,t.url)})});case"OPEN_REFERENCE_EDITOR":return x(x({},e),{editor:{isActive:!0,reference:t.reference}});case"UPDATE_EDITING_REFERENCE":return e.editor.isActive?x(x({},e),{editor:x(x({},e.editor),{reference:x(x({},e.editor.reference),t.attributes)})}):e;case"CLOSE_REFERENCE_EDITOR":return x(x({},e),{editor:{isActive:!1}});case"MARK_REFERENCE_AS_LOADING":return x(x({},e),{status:x(x({},e.status),{loading:t.isLoading?k(k([],e.status.loading,!0),[t.referenceUrl],!1):(0,f.without)(e.status.loading,t.referenceUrl)})});case"MARK_REFERENCE_AS_SAVING":return x(x({},e),{status:x(x({},e.status),{saving:t.isSaving?k(k([],e.status.saving,!0),[t.referenceUrl],!1):(0,f.without)(e.status.saving,t.referenceUrl)})})}}(e,t))&&void 0!==n?n:e},settings:function(e,t){var n;return void 0===e&&(e=g.settings),null!==(n=function(e,t){var n;switch(t.type){case"SET_EDITOR_TO_CLASSIC":return I(I({},e),{isClassicEditor:t.isClassicEditor});case"SET_EDITOR_TO_ELEMENTOR":return I(I({},e),{isElementorEditor:t.isElementorEditor});case"PANEL_SETTINGS":return I(I({},e),{panels:t.settings});case"TOGGLE_PANEL":return e.panels[t.panelName]===t.isOpen?e:I(I({},e),{panels:I(I({},e.panels),(n={},n[t.panelName]=t.isOpen,n))});case"INCLUDE_AUTHOR_IN_FOLLOWERS":return I(I({},e),{shouldAuthorBeFollower:t.shouldAuthorBeFollower});case"SET_AUTO_SHARE_END_MODES":return I(I({},e),{autoShareEndModes:t.autoShareEndModes})}}(e,t))&&void 0!==n?n:e},social:function(e,t){var n;return void 0===e&&(e=g.social),null!==(n=function(e,t){switch(t.type){case"MARK_SOCIAL_MESSAGE_AS_DELETING":return w(w({},e),{deleting:t.isDeleting?R(R([],e.deleting,!0),[t.messageId],!1):(0,f.without)(e.deleting,t.messageId)});case"MARK_TIMELINE_AS_GENERATING":return w(w({},e),{timelineStatus:t.isGenerating?"generating":"ready"});case"MARK_TIMELINE_AS_CLEARING":return w(w({},e),{timelineStatus:t.isClearing?"clearing":"ready"});case"MARK_AS_LOADING_POST_ITEMS":return w(w({},e),{isRetrievingSocialMessages:t.isLoading})}}(e,t))&&void 0!==n?n:e},tasks:function(e,t){var n;return void 0===e&&(e=g.tasks),null!==(n=function(e,t){switch(t.type){case"MARK_EDITORIAL_TASK_AS_SYNCHING":return C(C({},e),{synching:t.isSynching?P(P([],e.synching,!0),[t.taskId],!1):(0,f.without)(e.synching,t.taskId)});case"MARK_EDITORIAL_TASK_AS_DELETING":return C(C({},e),{deleting:t.isDeleting?P(P([],e.deleting,!0),[t.taskId],!1):(0,f.without)(e.deleting,t.taskId)});case"MARK_AS_LOADING_POST_ITEMS":return C(C({},e),{isRetrievingTasks:t.isLoading});case"OPEN_TASK_PRESET_LOADER":return C(C({},e),{preset:t.isOpen?{selection:[],state:"selection"}:void 0});case"SELECT_TASK_PRESETS":return C(C({},e),{preset:e.preset?C(C({},e.preset),{selection:t.selection}):void 0});case"SET_TASK_PRESETS_STATE":return C(C({},e),{preset:e.preset?C(C({},e.preset),{state:t.state}):void 0})}}(e,t))&&void 0!==n?n:e}});function D(e){return e.comments.input}function O(e,t){return e.comments.deleting.includes(t)}function L(e,t){return e.comments.synching.includes(t)}function M(e){return e.comments.isRetrievingComments}function F(e){return e.externalFeaturedImage.view}function U(e){return e.externalFeaturedImage.imageUrl}function G(e){return e.externalFeaturedImage.imageAlt}function B(e){return e.externalFeaturedImage.fields.url}function j(e){return e.externalFeaturedImage.fields.alt}function Q(e){return"auto-draft"!==e.post.status&&!!e.post.id}function K(e){return e.post}function V(e){return e.post.id||void 0}function q(e){return e.post.type||void 0}function Y(e){return e.post.title||""}function H(e){return e.post.excerpt||""}function z(e){return e.post.content||""}function X(e){return e.post.date||void 0}function W(e){return e.post.author||void 0}function $(e){return e.post.permalink||void 0}function J(e){return e.post.permalinkTemplate}function Z(e){return e.post.followers||[]}function ee(e){return e.post.imageId||void 0}function te(e){return e.post.imageSrc||void 0}function ne(e){return e.post.status}function re(e){return e.post.images||[]}function oe(e,t){var n;return null!==(n=e.post.taxonomies[t])&&void 0!==n?n:[]}function ie(e){return e.post.permalinkQueryArgs}function ae(e){return!!e.post.isAutoShareEnabled}function se(e){return e.post.autoShareEndMode}function ce(e){return e.post.automationSources}const le=window.wp.i18n;function ue(e){return e.postQuality.settings}function de(e){return!!e.postQuality.isFullyIntegrated}function me(e){var t=e.postQuality.checks,n=(0,f.size)((0,f.filter)(t,{status:"good"})),r=(0,f.size)((0,f.filter)(t,{status:"improvable"})),o=(0,f.size)((0,f.filter)(t,{status:"bad"}));if(!n&&!r&&!o)return"unknown";if(e.postQuality.settings.allowedBads<o)return"bad";var i=o+r;if(e.postQuality.settings.unacceptableImprovables<i)return"bad";var a=e.postQuality.settings.allowedImprovables;return o||a<i?"improvable":i?"good":"perfect"}function fe(e,t){var n=e.postQuality.checks[t];return(null==n?void 0:n.status)||"unknown"}function pe(e,t){var n=e.postQuality.checks[t];return(null==n?void 0:n.text)||(0,le._x)("Unknown status","text","nelio-content")}function ge(e,t,n){var r;return!!(null===(r=e.premiumByType[t])||void 0===r?void 0:r.deleting.includes(n))}function Ee(e){return(0,f.values)(e.qualityCheckTypes)}function he(e,t){return e.qualityCheckTypes[t]}function ve(e,t){return e.references.byUrl[t]}function ye(e){return e.references.byType.suggested}function _e(e,t){return!e.references.byUrl[t]||e.references.status.loading.includes(t)}function Te(e,t){return e.references.status.saving.includes(t)}function be(e){return e.references.editor.isActive}function Se(e){var t=e.references.editor;return t.isActive?t.reference:void 0}function Ae(e){return e.references.suggestedUrl}function xe(e){return e.settings.isClassicEditor}function ke(e){return e.settings.isElementorEditor}function Ie(e){return e.settings.panels}function we(e,t){var n=e.settings.panels[t];return void 0===n||n}function Re(e){return e.settings.shouldAuthorBeFollower}function Ce(e){return e.settings.autoShareEndModes}function Pe(e,t){var n=(0,f.find)(e.settings.autoShareEndModes,{value:t});return(null==n?void 0:n.months)||0}function Ne(e){return"ready"!==e.social.timelineStatus}function De(e){return"generating"===e.social.timelineStatus}function Oe(e){return"clearing"===e.social.timelineStatus}function Le(e,t){return e.social.deleting.includes(t)}function Me(e){return e.social.deleting}function Fe(e){return!!e.social.isRetrievingSocialMessages}function Ue(e,t){return e.tasks.deleting.includes(t)}function Ge(e,t){return e.tasks.synching.includes(t)}function Be(e){return!!e.tasks.isRetrievingTasks}function je(e){var t,n;return null!==(n=null===(t=e.tasks.preset)||void 0===t?void 0:t.selection)&&void 0!==n?n:[]}function Qe(e){var t;return null===(t=e.tasks.preset)||void 0===t?void 0:t.state}function Ke(e){return{type:"SET_EDITORIAL_COMMENT_INPUT_VALUE",value:e}}function Ve(e,t){return{type:"MARK_EDITORIAL_COMMENT_AS_SYNCHING",commentId:e,isSynching:t}}function qe(e,t){return{type:"MARK_EDITORIAL_COMMENT_AS_DELETING",commentId:e,isDeleting:t}}function Ye(){return{type:"EDIT_EXTERNAL_FEATURED_IMAGE"}}function He(){return{type:"CANCEL_EDITION_OF_EXTERNAL_FEATURED_IMAGE"}}function ze(e,t){return{type:"SET_EXTERNAL_FEATURED_IMAGE",url:e,altText:t}}function Xe(){return{type:"REMOVE_EXTERNAL_FEATURED_IMAGE"}}function We(e){return{type:"SET_EXTERNAL_FEATURED_IMAGE_URL_FIELD",url:e}}function $e(e){return{type:"SET_EXTERNAL_FEATURED_IMAGE_ALT_FIELD",altText:e}}function Je(e,t){return{type:"SET_CUSTOM_FIELD",key:e,value:t}}function Ze(e){return{type:"REMOVE_CUSTOM_FIELD",key:e}}function et(e){return{type:"SET_POST",post:e}}function tt(e){return{type:"SET_POST_ID",id:e}}function nt(e){return{type:"SET_TITLE",title:e}}function rt(e){return{type:"SET_EXCERPT",excerpt:e}}function ot(e){return{type:"SET_CONTENT",content:e}}function it(e){return{type:"SET_DATE",date:e}}function at(e,t){return{type:"SET_AUTHOR",authorId:e,authorName:t}}function st(e){return{type:"SET_PERMALINK",permalink:e}}function ct(e){return{type:"SET_FOLLOWERS",followers:e}}function lt(e,t){return{type:"SET_FEATURED_IMAGE",imageId:e,imageSrc:t||!1,thumbnailSrc:t||!1}}function ut(){return{type:"REMOVE_FEATURED_IMAGE"}}function dt(e){return{type:"SET_STATUS",status:e}}function mt(e,t){return{type:"SET_TERMS",taxonomy:e,terms:t}}function ft(e){return{type:"ENABLE_AUTO_SHARE",isAutoShareEnabled:e}}function pt(e){return{type:"SET_AUTO_SHARE_END_MODE",autoShareEndMode:e}}function gt(e){return{type:"SET_AUTOMATION_SOURCES",sources:e}}function Et(e){return{type:"SET_QUERY_ARGS",args:e}}function ht(e){return{type:"MARK_AS_LOADING_POST_ITEMS",isLoading:e}}function vt(e){return{type:"MARK_QUALITY_ANALYSIS_AS_FULLY_INTEGRATED",isFullyIntegrated:e}}function yt(e){return{type:"SET_POST_QUALITY_SETTINGS",settings:e}}function _t(e,t,n){return{type:"UPDATE_QUALITY_CHECK_ITEM",name:e,status:t,text:n}}function Tt(e,t,n){return{type:"MARK_PREMIUM_ITEM_AS_DELETING",typeName:e,itemId:t,isDeleting:n}}function bt(e){return{type:"ADD_QUALITY_CHECK_TYPE",definition:e}}function St(e){return{type:"REMOVE_QUALITY_CHECK_TYPE",name:e}}function At(e,t){return{type:"UPDATE_QUALITY_CHECK_SETTINGS",name:e,settings:t}}function xt(e){return{type:"RECEIVE_REFERENCES",references:(0,f.castArray)(e)}}function kt(e){return{type:"SET_SUGGESTED_REFERENCE_URL",url:e}}function It(e){return{type:"SUGGEST_REFERENCE",url:e}}function wt(e){return{type:"SUGGEST_REFERENCES",urls:(0,f.castArray)(e)}}function Rt(e){return{type:"DISCARD_REFERENCE",url:e}}function Ct(e){return{type:"UPDATE_EDITING_REFERENCE",attributes:e}}function Pt(){return{type:"CLOSE_REFERENCE_EDITOR"}}function Nt(e,t){return{type:"MARK_REFERENCE_AS_LOADING",referenceUrl:e,isLoading:t}}function Dt(e,t){return{type:"MARK_REFERENCE_AS_SAVING",referenceUrl:e,isSaving:t}}function Ot(e){return{type:"OPEN_REFERENCE_EDITOR",reference:e}}function Lt(e){return{type:"PANEL_SETTINGS",settings:e}}function Mt(e,t){return{type:"TOGGLE_PANEL",panelName:e,isOpen:t}}function Ft(e){return{type:"SET_EDITOR_TO_CLASSIC",isClassicEditor:e}}function Ut(e){return{type:"SET_EDITOR_TO_ELEMENTOR",isElementorEditor:e}}function Gt(e){return{type:"INCLUDE_AUTHOR_IN_FOLLOWERS",shouldAuthorBeFollower:e}}function Bt(e){return{type:"SET_AUTO_SHARE_END_MODES",autoShareEndModes:e}}function jt(e,t){return{type:"MARK_SOCIAL_MESSAGE_AS_DELETING",messageId:e,isDeleting:t}}function Qt(e){return{type:"MARK_TIMELINE_AS_GENERATING",isGenerating:e}}function Kt(e){return{type:"MARK_TIMELINE_AS_CLEARING",isClearing:e}}function Vt(e,t){return{type:"MARK_EDITORIAL_TASK_AS_SYNCHING",taskId:e,isSynching:t}}function qt(e,t){return{type:"MARK_EDITORIAL_TASK_AS_DELETING",taskId:e,isDeleting:t}}function Yt(e){return{type:"OPEN_TASK_PRESET_LOADER",isOpen:e}}function Ht(e){return{type:"SELECT_TASK_PRESETS",selection:e}}function zt(e){return{type:"SET_TASK_PRESETS_STATE",state:e}}const Xt=window.wp.apiFetch,Wt=n.n(Xt)(),$t=window.NelioContent.data;var Jt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Zt=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function en(e){return Jt(this,void 0,Promise,(function(){var t,n,r,o,i;return Zt(this,(function(a){switch(a.label){case 0:return[4,(0,c.dispatch)($t.store).receiveComments(e)];case 1:return a.sent(),[4,(0,c.dispatch)(lr).markEditorialCommentAsSynching(e.id,!0)];case 2:a.sent(),a.label=3;case 3:return a.trys.push([3,10,,13]),t=(0,c.select)($t.store).getApiRoot(),n=(0,c.select)($t.store).getSiteId(),r=(0,c.select)($t.store).getAuthenticationToken(),[4,Wt({url:"".concat(t,"/site/").concat(n,"/comment"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)},data:e})];case 4:return o=a.sent(),[4,(0,c.dispatch)($t.store).receiveComments(o)];case 5:a.sent(),a.label=6;case 6:return a.trys.push([6,8,,9]),[4,Wt({path:"/nelio-content/v1/notifications/comment",method:"POST",data:o})];case 7:case 8:return a.sent(),[3,9];case 9:return[3,13];case 10:return i=a.sent(),[4,(0,m.showErrorNotice)(i)];case 11:return a.sent(),[4,(0,c.dispatch)($t.store).removeComment(e.id)];case 12:return a.sent(),[3,13];case 13:return[4,(0,c.dispatch)(lr).markEditorialCommentAsSynching(e.id,!1)];case 14:return a.sent(),[2]}}))}))}function tn(e){return Jt(this,void 0,Promise,(function(){var t,n,r,o;return Zt(this,(function(i){switch(i.label){case 0:return(0,c.select)($t.store).getComment(e)?[4,(0,c.dispatch)(lr).markEditorialCommentAsDeleting(e,!0)]:[2];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,5,,7]),t=(0,c.select)($t.store).getSiteId(),n=(0,c.select)($t.store).getApiRoot(),r=(0,c.select)($t.store).getAuthenticationToken(),[4,Wt({url:"".concat(n,"/site/").concat(t,"/comment/").concat(e),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)}})];case 3:return i.sent(),[4,(0,c.dispatch)($t.store).removeComment(e)];case 4:return i.sent(),[3,7];case 5:return o=i.sent(),[4,(0,m.showErrorNotice)(o)];case 6:return i.sent(),[3,7];case 7:return[4,(0,c.dispatch)(lr).markEditorialCommentAsDeleting(e,!1)];case 8:return i.sent(),[2]}}))}))}var nn=function(){return nn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},nn.apply(this,arguments)},rn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},on=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function an(){return rn(this,void 0,Promise,(function(){var e;return on(this,(function(t){switch(t.label){case 0:return(0,c.select)(lr).isPostReady()&&(e=(0,c.select)(lr).getPostId())?[4,(0,c.dispatch)(lr).markAsLoadingPostItems(!0)]:[2];case 1:return t.sent(),[4,d($t.store).getPostRelatedItems(e)];case 2:return t.sent(),[4,(0,c.dispatch)(lr).updateDatesInPostRelatedItems()];case 3:return t.sent(),[4,(0,c.dispatch)(lr).markAsLoadingPostItems(!1)];case 4:return t.sent(),[2]}}))}))}function sn(){return rn(this,void 0,Promise,(function(){var e,t,n,r,o,i,a,s;return on(this,(function(l){switch(l.label){case 0:return e=(0,c.select)(lr).getPost(),t=e.status,n=e.date,r=e.id,"publish"!==t&&n?[4,d($t.store).getSocialMessagesRelatedToPost(r)]:[2];case 1:return o=l.sent(),i=(0,f.map)(o,(function(e){return nn(nn({},e),{schedule:(0,m.getSocialMessageSchedule)({baseDatetime:n,dateValue:e.dateValue,timeType:e.timeType,timeValue:e.timeValue})})})),[4,d($t.store).getTasksRelatedToPost(r)];case 2:return a=l.sent(),s=(0,f.map)(a,(function(e){return nn(nn({},e),{dateDue:(0,m.getTaskDateDue)({baseDatetime:n,dateType:e.dateType,dateValue:e.dateValue})})})),(0,m.isEmpty)(i)?[3,4]:[4,(0,c.dispatch)($t.store).receiveSocialMessages(i)];case 3:l.sent(),l.label=4;case 4:return(0,m.isEmpty)(s)?[3,6]:[4,(0,c.dispatch)($t.store).receiveTasks(s)];case 5:l.sent(),l.label=6;case 6:return[2]}}))}))}const cn=window.wp.hooks;var ln=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},un=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function dn(e,t){return ln(this,void 0,Promise,(function(){var n;return un(this,(function(r){switch(r.label){case 0:return(n=(0,c.select)($t.store).getPremiumItem(e,t))?[4,(0,c.dispatch)(lr).markPremiumItemAsDeleting(e,t,!0)]:[2];case 1:return r.sent(),[4,(0,cn.applyFilters)("nelio-content_edit-post_onDeletePremiumItem",new Promise((function(e){return e()})),e,n)];case 2:return r.sent(),[4,(0,c.dispatch)(lr).markPremiumItemAsDeleting(e,t,!1)];case 3:return r.sent(),[2]}}))}))}var mn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},fn=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function pn(e){return mn(this,void 0,Promise,(function(){var t;return fn(this,(function(n){switch(n.label){case 0:return[4,d(lr).getReferenceByUrl(e)];case 1:return(t=n.sent())?[4,(0,c.dispatch)(lr).doOpenReferenceEditor(t)]:[2];case 2:return n.sent(),[2]}}))}))}function gn(){return mn(this,void 0,Promise,(function(){var e;return fn(this,(function(t){switch(t.label){case 0:return(e=(0,c.select)(lr).getEditingReference())?[4,(0,c.dispatch)(lr).saveReference(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[4,(0,c.dispatch)(lr).closeReferenceEditor()];case 3:return t.sent(),[2]}}))}))}function En(e){return mn(this,void 0,Promise,(function(){var t,n;return fn(this,(function(r){switch(r.label){case 0:return[4,(0,c.dispatch)(lr).markReferenceAsSaving(e.url,!0)];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,5,,7]),[4,Wt({path:"/nelio-content/v1/reference/".concat(e.id),method:"PUT",data:(0,f.omitBy)(e,m.isEmpty)})];case 3:return t=r.sent(),[4,(0,c.dispatch)(lr).receiveReferences(t)];case 4:return r.sent(),[3,7];case 5:return n=r.sent(),[4,(0,m.showErrorNotice)(n)];case 6:return r.sent(),[3,7];case 7:return[4,(0,c.dispatch)(lr).markReferenceAsSaving(e.url,!1)];case 8:return r.sent(),[2]}}))}))}const hn=window.wp.notices,vn=window.wp.richText;var yn=function(){return yn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},yn.apply(this,arguments)},Tn=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},bn=["p","h1","h2","h3","h4","li"],Sn=bn.reduce((function(e,t){return Tn(Tn([],e,!0),bn.map((function(e){return"".concat(t," ").concat(e)})),!0)}),[]).join(", ");function An(){var e=(0,c.select)($t.store),t=e.isSubscribed,n=e.getProfilesWithMessagesRelatedToPost;return t()?[]:n((0,(0,c.select)(lr).getPost)().id)}function xn(e){void 0===e&&(e="");var t,n,r=function(e){var t=document.createElement("div");t.innerHTML=e;var n,r="".concat(Sn,", ncshare ncshare");do{kn(n=t.querySelector(r))}while(n);return t}(e),o=Array.from(r.querySelectorAll(bn.join(",")));return{clean:(0,f.map)(o,In).join("\n\n"),highlights:(t=o,n=f.union.apply(void 0,(0,f.map)(t,(function(e){var t,n,r,o=(0,vn.create)({element:e});return(t=o,n=function(e,t){return Cn(e)&&Cn(t)||!Cn(e)&&!Cn(t)},r=(0,f.uniq)(wn(t.formats.reduce((function(e,t,r,o){return n(o[r-1],t)||(e=wn(e,r)),n(t,o[r+1])||(e=wn(e,r+1)),e}),[0]),t.formats.length)),(0,f.zip)((0,f.dropRight)(r,1),(0,f.drop)(r,1)).map((function(e){var n=e[0],r=e[1];return(0,vn.slice)(t,n,r)})).filter((function(e){return e.formats.some(Cn)}))).map(Rn)}))),(0,f.map)(n,(function(e){return{html:e,text:e.replace(/<[^>]*>/g,"")}}))),top:(0,f.union)((0,f.map)(r.getElementsByTagName("h1"),In),(0,f.map)(r.getElementsByTagName("h2"),In),(0,f.map)(r.getElementsByTagName("h3"),In),(0,f.map)(r.getElementsByTagName("strong"),In))}}function kn(e){var t,n;if(e){for(;e.firstChild;)null===(t=e.parentElement)||void 0===t||t.insertBefore(e.firstChild,e);null===(n=e.parentElement)||void 0===n||n.removeChild(e)}}function In(e){var t;return(null===(t=null==e?void 0:e.textContent)||void 0===t?void 0:t.replace(/\s+/g," "))||""}function wn(e,t){return e.push(t),e}function Rn(e){var t=e.formats.reduce((function(e,t){var n=Nn(t);return n&&(e[n]=[{type:"a",attributes:{href:n}}]),e}),{"":[]});return e=yn(yn({},e),{formats:e.formats.map((function(e){return t[Nn(e)]||[]}))}),(0,vn.toHTMLString)({value:e})}var Cn=function(e){return!!(null==e?void 0:e.some((function(e){var t=e.type;return"ncshare"===t||"nelio-content/highlight"===t})))},Pn=function(e){var t,n;return"a"===e.type&&!!(null===(t=e.attributes)||void 0===t?void 0:t.href)||"core/link"===e.type&&!!(null===(n=e.attributes)||void 0===n?void 0:n.url)},Nn=function(e){var t,n,r,o=null===(t=null==e?void 0:e.find(Pn))||void 0===t?void 0:t.attributes;return null!==(r=null!==(n=null==o?void 0:o.href)&&void 0!==n?n:null==o?void 0:o.url)&&void 0!==r?r:""},Dn=function(){return Dn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Dn.apply(this,arguments)},On=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Ln=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Mn="core/editor";function Fn(){return On(this,void 0,Promise,(function(){var e;return Ln(this,(function(t){switch(t.label){case 0:return(0,c.select)(lr).isClassicEditor()?[4,Qn()]:[3,2];case 1:return t.sent(),[2];case 2:return(0,c.select)(lr).isElementorEditor()?[4,Kn()]:[3,4];case 3:return t.sent(),[2];case 4:return(0,c.select)(lr).isGeneratingTimeline()?[2]:[4,(0,c.dispatch)(lr).markTimelineAsGenerating(!0)];case 5:t.sent(),t.label=6;case 6:return t.trys.push([6,9,,11]),[4,(0,c.dispatch)(Mn).savePost()];case 7:return t.sent(),[4,Vn()];case 8:return t.sent(),[3,11];case 9:return e=t.sent(),[4,(0,m.showErrorNotice)(e)];case 10:return t.sent(),[3,11];case 11:return[4,(0,c.dispatch)(lr).markTimelineAsGenerating(!1)];case 12:return t.sent(),[2]}}))}))}function Un(){return On(this,void 0,Promise,(function(){return Ln(this,(function(e){switch(e.label){case 0:return(0,c.select)(lr).isGeneratingTimeline()?[2]:[4,(0,c.dispatch)(lr).markTimelineAsGenerating(!0)];case 1:return e.sent(),[4,Vn()];case 2:return e.sent(),[4,(0,c.dispatch)(lr).markTimelineAsGenerating(!1)];case 3:return e.sent(),[2]}}))}))}function Gn(){return On(this,void 0,Promise,(function(){var e,t,n;return Ln(this,(function(r){switch(r.label){case 0:return(e=(0,c.select)(lr).getPostId())?(0,c.select)(lr).isClearingTimeline()?[2]:[4,(0,c.dispatch)(lr).markTimelineAsClearing(!0)]:[2];case 1:return r.sent(),[4,d($t.store).getSocialMessagesRelatedToPost(e)];case 2:return t=r.sent(),n=t.filter((function(e){return"publish"!==e.status})).map((function(e){return e.id})),[4,Promise.all(n.map(jn))];case 3:return r.sent(),n.forEach((function(e){return(0,c.dispatch)($t.store).removeSocialMessage(e)})),[4,(0,c.dispatch)(lr).markTimelineAsClearing(!1)];case 4:return r.sent(),[2]}}))}))}function Bn(e){return On(this,void 0,Promise,(function(){var t;return Ln(this,(function(n){switch(n.label){case 0:return(0,c.select)(lr).isSocialMessageBeingDeleted(e)?[2]:[4,(0,c.dispatch)(lr).markSocialMessageAsDeleting(e,!0)];case 1:return n.sent(),[4,jn(e)];case 2:return n.sent(),t=(0,c.select)($t.store).getSocialMessage(e),[4,(0,c.dispatch)($t.store).removeRecurringMessages(null==t?void 0:t.recurrenceGroup)];case 3:return n.sent(),[4,(0,c.dispatch)($t.store).removeSocialMessage(e)];case 4:return n.sent(),[4,(0,c.dispatch)(lr).markSocialMessageAsDeleting(e,!1)];case 5:return n.sent(),[2]}}))}))}function jn(e){return On(this,void 0,Promise,(function(){var t,n,r;return Ln(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t=(0,c.select)($t.store).getSiteId(),n=(0,c.select)($t.store).getApiRoot(),r=(0,c.select)($t.store).getAuthenticationToken(),[4,Wt({url:"".concat(n,"/site/").concat(t,"/social/").concat(e,"/following"),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)}})];case 1:case 2:return o.sent(),[3,3];case 3:return[2]}}))}))}function Qn(){return On(this,void 0,void 0,(function(){var e,t;return Ln(this,(function(n){switch(n.label){case 0:return(0,c.select)(lr).isGeneratingTimeline()?[2]:[4,(0,c.dispatch)(lr).markTimelineAsGenerating(!0)];case 1:return n.sent(),(e=document.getElementById("post"))?((t=document.createElement("input")).setAttribute("type","hidden"),t.setAttribute("name","_nc_auto_messages"),t.setAttribute("value","true"),e.appendChild(t),e.submit(),[2]):[2]}}))}))}function Kn(){return On(this,void 0,void 0,(function(){var e,t,n=this;return Ln(this,(function(r){switch(r.label){case 0:return(0,c.select)(lr).isGeneratingTimeline()?[2]:(e=window.elementor,Yn(e)?[4,(0,c.dispatch)(lr).markTimelineAsGenerating(!0)]:[2]);case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,3,,5]),e.saver.saveEditor({onSuccess:function(){return On(n,void 0,void 0,(function(){return Ln(this,(function(e){switch(e.label){case 0:return[4,Vn()];case 1:return e.sent(),[4,(0,c.dispatch)(lr).markTimelineAsGenerating(!1)];case 2:return e.sent(),[2]}}))}))}}),[3,5];case 3:return t=r.sent(),(0,m.logError)(t),[4,(0,c.dispatch)(lr).markTimelineAsGenerating(!1)];case 4:return r.sent(),[3,5];case 5:return[2]}}))}))}function Vn(){return On(this,void 0,Promise,(function(){var e,t,n,r,o,i,a,s,l;return Ln(this,(function(u){switch(u.label){case 0:if(e=[],!(t=(0,c.select)(lr).getPostId()))return[2];u.label=1;case 1:return u.trys.push([1,7,,9]),[4,Wt({path:"/nelio-content/v1/post/".concat(t,"?aws")})];case 2:return n=u.sent(),r=(0,c.select)($t.store).getSiteId(),o=(0,c.select)($t.store).getApiRoot(),i=(0,c.select)($t.store).getAuthenticationToken(),[4,Wt({url:"".concat(o,"/site/").concat(r,"/post/").concat(t,"/social/auto"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(i)},data:Dn(Dn({},n),xn(n.content))})];case 3:return a=u.sent(),[4,d($t.store).getSocialMessageIdsRelatedToPost(t)];case 4:return(s=u.sent()).forEach((function(e){return(0,c.dispatch)($t.store).removeSocialMessage(e)})),e=a.filter((function(e){return!s.includes(e.id)})),[4,(0,c.dispatch)($t.store).receiveSocialMessages(a)];case 5:return u.sent(),[4,qn(e)];case 6:return u.sent(),[3,9];case 7:return l=u.sent(),(0,m.logError)(l),[4,(0,m.showErrorNotice)(l,(0,le._x)("Unknown error creating automatic messages.","text","nelio-content"),{type:"snackbar"})];case 8:return u.sent(),[3,9];case 9:return[4,(0,c.dispatch)(lr).updateDatesInPostRelatedItems()];case 10:return u.sent(),[2]}}))}))}function qn(e){return On(this,void 0,void 0,(function(){var t,n,r,o;return Ln(this,(function(i){switch(i.label){case 0:return t=e.length?(0,le.sprintf)(/* translators: %d: amount of messages created. */ /* translators: %d: amount of messages created. */
(0,le._x)("%d messages created","text","nelio-content"),e.length):(0,le._x)("No messages were created. Check your content and your settings.","user","nelio-content"),(0,c.select)(lr).isClassicEditor()?(null==(n=document.getElementById("message"))||n.insertAdjacentHTML("afterend",'<div id="nc-message" class="notice notice-success is-dismissible"><p>'.concat(t,'</p><button type="button" class="notice-dismiss" onclick="document.getElementById(\'nc-message\').remove()"><span class="screen-reader-text">').concat((0,le._x)("Dismiss this notice.","command","nelio-content"),"</span></button></div>")),[2]):(r=(0,c.select)(lr).isElementorEditor(),o=window.elementor,r&&Yn(o)?(o.notifications.showToast({message:t}),[2]):e.length?[4,(0,c.dispatch)(hn.store).createSuccessNotice(t,{type:"snackbar"})]:[3,2]);case 1:return i.sent(),[3,4];case 2:return[4,(0,c.dispatch)(hn.store).createErrorNotice(t,{type:"snackbar"})];case 3:i.sent(),i.label=4;case 4:return[2]}}))}))}var Yn=function(e){return!!e&&"object"==typeof e&&"saver"in e},Hn=function(){return Hn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Hn.apply(this,arguments)},zn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Xn=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function Wn(e,t){return zn(this,void 0,Promise,(function(){var n,r,o,i,a,s,l;return Xn(this,(function(u){switch(u.label){case 0:return(n=(0,c.select)($t.store).getTask(e))?[4,(0,c.dispatch)(lr).markEditorialTaskAsSynching(e,!0)]:[2];case 1:u.sent(),u.label=2;case 2:return u.trys.push([2,10,,13]),r=Hn(Hn({},n),{completed:t}),[4,(0,c.dispatch)($t.store).receiveTasks(r)];case 3:return u.sent(),o=(0,c.select)($t.store).getSiteId(),i=(0,c.select)($t.store).getApiRoot(),a=(0,c.select)($t.store).getAuthenticationToken(),[4,Wt({url:"".concat(i,"/site/").concat(o,"/task/").concat(e),method:"PUT",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(a)},data:r})];case 4:return s=u.sent(),[4,(0,c.dispatch)($t.store).receiveTasks(s)];case 5:if(u.sent(),!s.completed)return[3,9];u.label=6;case 6:return u.trys.push([6,8,,9]),[4,Wt({path:"/nelio-content/v1/notifications/task",method:"POST",data:Hn({isNewTask:!1},s)})];case 7:case 8:return u.sent(),[3,9];case 9:return[3,13];case 10:return l=u.sent(),[4,(0,m.showErrorNotice)(l)];case 11:return u.sent(),[4,(0,c.dispatch)($t.store).receiveTasks(n)];case 12:return u.sent(),[3,13];case 13:return[4,(0,c.dispatch)(lr).markEditorialTaskAsSynching(e,!1)];case 14:return u.sent(),[2]}}))}))}function $n(e,t){return zn(this,void 0,Promise,(function(){var n,r,o,i,a,s,l,u,p,g,E,h,v;return Xn(this,(function(y){switch(y.label){case 0:return(n=(0,c.select)(lr).getPost())?(r="replace"===e?"replacing":"merging",[4,(0,c.dispatch)(lr).setTaskPresetsState(r)]):[2];case 1:return y.sent(),o=d($t.store).getTaskIdsRelatedToPost,i=(0,c.select)($t.store).getTask,[4,o(n.id)];case 2:if(a=y.sent(),s=a.map(i).filter(m.isDefined),l="replace"===e?[]:s,!(u=(0,f.orderBy)(t.map(er),"_sort").map(Zn(n,l)).filter(m.isDefined)).length)return[3,9];y.label=3;case 3:return y.trys.push([3,7,,9]),p=(0,c.select)($t.store).getSiteId(),g=(0,c.select)($t.store).getApiRoot(),E=(0,c.select)($t.store).getAuthenticationToken(),[4,new Promise((function(e){return setTimeout(e,1e3)}))];case 4:return y.sent(),[4,Wt({url:"".concat(g,"/site/").concat(p,"/task"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(E)},data:{mode:e,postId:n.id,tasks:u}})];case 5:return h=y.sent(),"replace"===e&&a.forEach((0,c.dispatch)($t.store).removeTask),[4,(0,c.dispatch)($t.store).receiveTasks(h)];case 6:return y.sent(),[3,9];case 7:return v=y.sent(),[4,(0,m.showErrorNotice)(v)];case 8:return y.sent(),[3,9];case 9:return[4,(0,c.dispatch)(lr).openTaskPresetLoader(!1)];case 10:return y.sent(),[2]}}))}))}function Jn(e){return zn(this,void 0,Promise,(function(){var t,n,r,o;return Xn(this,(function(i){switch(i.label){case 0:return(0,c.select)($t.store).getTask(e)?[4,(0,c.dispatch)(lr).markEditorialTaskAsDeleting(e,!0)]:[2];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,5,,7]),t=(0,c.select)($t.store).getSiteId(),n=(0,c.select)($t.store).getApiRoot(),r=(0,c.select)($t.store).getAuthenticationToken(),[4,Wt({url:"".concat(n,"/site/").concat(t,"/task/").concat(e),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)}})];case 3:return i.sent(),[4,(0,c.dispatch)($t.store).removeTask(e)];case 4:return i.sent(),[3,7];case 5:return o=i.sent(),[4,(0,m.showErrorNotice)(o)];case 6:return i.sent(),[3,7];case 7:return[4,(0,c.dispatch)(lr).markEditorialTaskAsDeleting(e,!1)];case 8:return i.sent(),[2]}}))}))}var Zn=function(e,t){return function(n){var r;if(n.assigneeId||e.author){var o=Hn(Hn({},(0,m.createTask)()),{assigneeId:null!==(r=n.assigneeId)&&void 0!==r?r:e.author,task:n.task,color:n.color,dateType:n.dateType,dateValue:n.dateValue,postId:e.id,postType:e.type,dateDue:(0,m.getTaskDateDue)({baseDatetime:e.date||"now",dateType:n.dateType,dateValue:n.dateValue}),postAuthor:e.author,baseDatetime:(0,m.getBaseDatetime)(e,n.dateType)}),i=(0,f.pick)(o,["assigneeId","task","dateType","dateValue"]);return(0,f.some)(t,(function(e){return(0,f.isEqual)(i,(0,f.pick)(e,(0,f.keys)(i)))}))?void 0:o}}},er=function(e){var t=Math.abs(Number.parseInt(e.dateValue)||0),n="";return n+="positive-days"===e.dateType||0===t?"1:"+(0,f.padStart)("".concat(t),5,"0"):"0:"+(0,f.padStart)("".concat(Math.abs(9999-t)),5,"0"),n+=":",n+=e.task,Hn(Hn({},e),{_sort:n})};const tr=window.wp.url;var nr=function(){return nr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},nr.apply(this,arguments)},rr=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},or=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function ir(e){return rr(this,void 0,Promise,(function(){var t,n,r,o;return or(this,(function(i){switch(i.label){case 0:return e?[4,(0,c.dispatch)(lr).markReferenceAsLoading(e,!0)]:[2];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,7,,8]),[4,Wt({path:(0,tr.addQueryArgs)("/nelio-content/v1/reference/search",{url:e})})];case 3:return t=i.sent(),[4,(0,c.dispatch)(lr).receiveReferences(t)];case 4:return i.sent(),n=t.status,r=t.isExternal,"pending"===n&&r?[4,ar(t)]:[3,6];case 5:i.sent(),i.label=6;case 6:return[3,8];case 7:return o=i.sent(),(0,m.logError)(o),[3,8];case 8:return[4,(0,c.dispatch)(lr).markReferenceAsLoading(e,!1)];case 9:return i.sent(),[2]}}))}))}function ar(e){return rr(this,void 0,Promise,(function(){var t,n,r,o,i,a;return or(this,(function(s){switch(s.label){case 0:return[4,(0,c.dispatch)($t.store).loadLink(e.url)];case 1:return s.sent(),(t=(0,c.select)($t.store).getSharedLinkData(e.url))?(n=t.author,r=t.date,o=t.title,i=t.twitter,a=nr(nr({},e),{author:n,date:r,title:o,twitter:i}),[4,(0,c.dispatch)(lr).saveReference(a)]):[2];case 2:return s.sent(),[2]}}))}))}var sr=function(){return sr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sr.apply(this,arguments)},cr=sr(sr({},o),i),lr=(0,c.createReduxStore)("nelio-content/edit-post",{reducer:N,controls:c.controls,actions:cr,selectors:r,resolvers:a});!function(e){(0,c.register)(e)}(lr),function(){(0,(0,c.dispatch)(lr).setPanelSettings)((0,m.getValue)("panelSettings",{})||{});var e=(0,c.select)(lr).getPanelStatuses();l((function(){var t=(0,c.select)(lr).getPanelStatuses();e!==t&&(e=t,(0,m.setValue)("panelSettings",t))}),lr)}();const ur=window.wp.element,dr=window.wp.compose,mr=window.wp.components;var fr=function(){return fr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fr.apply(this,arguments)},pr=function(){var e=gr(),t=e[0],n=e[1],r=Er();return ur.createElement("div",{className:"nelio-content-editorial-comments-input"},ur.createElement(mr.TextareaControl,{placeholder:(0,le._x)("Write a comment and press enter to send","user","nelio-content"),className:"nelio-content-editorial-comments-input__textarea",value:t,onChange:n,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),r())}}))},gr=function(){return[u((function(e){return e(lr).getEditorialCommentInputValue()})),(0,c.useDispatch)(lr).setEditorialCommentInputValue]},Er=function(){var e=gr(),t=e[0],n=e[1],r=(0,c.useDispatch)(lr).createEditorialComment,o=u((function(e){return e(lr).getPostId()})),i=u((function(e){return e(lr).getPostType()}));return o&&i?function(){var e=(0,f.trim)(t);(0,m.isEmpty)(e)||(n(""),r(fr(fr({},(0,m.createComment)(o,i)),{comment:e})))}:function(){}},hr=n(6942),vr=n.n(hr);const yr=window.moment;var _r=n.n(yr);const Tr=window.NelioContent.components,br=window.NelioContent.date;var Sr=function(e){var t=e.commentId,n=Ar(t),r=(0,$t.useAuthorName)(null==n?void 0:n.authorId),o=u((function(e){return e(lr).isDeletingEditorialComment(t)})),i=u((function(e){return e(lr).isSynchingEditorialComment(t)})),a=xr(t),s=kr(t),l=(0,c.useDispatch)(lr).deleteEditorialComment;return ur.createElement("div",{className:vr()({"nelio-content-editorial-comments-comment":!0,"nelio-content-editorial-comments-comment--is-mine":a,"nelio-content-editorial-comments-comment--is-being-deleted":o})},!a&&ur.createElement("div",{className:"nelio-content-editorial-comments-comment__author-icon"},ur.createElement(Tr.AuthorIcon,{authorId:null==n?void 0:n.authorId})),ur.createElement("div",null,ur.createElement("div",{className:vr()({"nelio-content-editorial-comments-comment__bubble":!0,"nelio-content-editorial-comments-comment__bubble--is-mine":a})},(null==n?void 0:n.comment)||""),ur.createElement("div",{className:vr()({"nelio-content-editorial-comments-comment__extra":!0,"nelio-content-editorial-comments-comment__extra--is-mine":a})},i&&(0,le._x)("Sending","text","nelio-content"),!i&&!a&&ur.createElement("div",{className:"nelio-content-editorial-comments-comment__author"},r),!i&&ur.createElement("div",{className:"nelio-content-editorial-comments-comment__date"},(0,br.dateI18n)((0,br.getSettings)().formats.datetime,null==n?void 0:n.date))),(o||s)&&!i&&ur.createElement("div",{className:"nelio-content-editorial-comments-comment__actions"},ur.createElement(Tr.DeleteButton,{isDeleting:o,onClick:function(){l(t)}}))))},Ar=function(e){return u((function(t){return t($t.store).getComment(e)}))},xr=function(e){var t=Ar(e);return u((function(e){return e($t.store).getCurrentUserId()===(null==t?void 0:t.authorId)}))},kr=function(e){var t,n=null===(t=Ar(e))||void 0===t?void 0:t.date,r=xr(e),o=n?_r()().diff(n,"minutes"):0,i=Math.abs(o)<5,a=(0,ur.useState)(0),s=a[0],c=a[1];return(0,ur.useEffect)((function(){i&&setTimeout((function(){return c(s+1)}),3e4)}),[s,i]),r&&i},Ir=function(){var e=(0,ur.useRef)(null),t=(0,ur.useState)(-1),n=t[0],r=t[1],o=u((function(e){return e($t.store).getCommentIdsRelatedToPost(e(lr).getPostId())})),i=o.length;return(0,ur.useEffect)((function(){var t;n!==i&&(n<i&&(null===(t=e.current)||void 0===t||t.scrollTo({top:999999,behavior:-1===n?void 0:"smooth"})),r(i))}),[n,i,r]),ur.createElement("div",{ref:e,className:"nelio-content-editorial-comment-list"},o.map((function(e){return ur.createElement(Sr,{key:e,commentId:e})})))},wr=function(){return wr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},wr.apply(this,arguments)},Rr=(0,dr.createHigherOrderComponent)((function(e){return function(t){return u((function(e){return e(lr).isPostReady()}))?ur.createElement(e,wr({},t)):ur.createElement(ur.Fragment,null,(0,le._x)("Please save post first to access this feature.","user","nelio-content"))}}),"withPostReadyCheck"),Cr=function(e){return function(t){return(0,dr.createHigherOrderComponent)((function(t){return function(n){return u((function(t){return!!t(lr)[e]()}))?ur.createElement(Tr.LoadingAnimation,{text:(0,le._x)("Loading","text","nelio-content"),isSmall:!0}):ur.createElement(t,wr({},n))}}),"withLoadingCheck")(t)}},Pr=(0,dr.compose)((function(e){return(0,$t.withSubscriptionCheck)("raw/editorial-comments",e)}),Rr,Cr("isRetrievingEditorialComments"))((function(){return ur.createElement(ur.Fragment,null,ur.createElement(Ir,null),ur.createElement(pr,null))})),Nr=function(){var e=Dr(),t=e.completed,n=e.total;return n?ur.createElement("div",{className:"nelio-content-tasks-progress"},ur.createElement("div",{className:"nelio-content-tasks-progress__bar-background"},ur.createElement("div",{className:vr()({"nelio-content-tasks-progress__bar":!0,"nelio-content-tasks-progress__bar--is-completed":t===n}),style:{width:"".concat(Math.round(100*t/n),"%")}})),ur.createElement("div",{className:"nelio-content-tasks-progress__percentage"},Math.round(100*t/n),"%")):null},Dr=function(){return u((function(e){var t=e(lr).getPostId,n=(0,e($t.store).getTasksRelatedToPost)(t());return{completed:(0,f.filter)(n,{completed:!0}).length,total:n.length}}))};const Or=window.NelioContent.taskEditor;var Lr=function(e){var t,n=e.taskId,r=Mr(n),o=Fr(n),i=o.canCompleteTask,a=o.canDeleteTask,s=o.canEditTask,c=Ur(n),l=c.isDeleting,d=c.isSynching,f=c.isPastDateDue,p=r||{},g=p.completed,E=p.color,h=void 0===E?"":E,v=p.task,y=Gr(r),_=Br(n),T=jr(n),b=(0,$t.useAuthorName)(null==r?void 0:r.assigneeId,(0,le._x)("Unknown Assignee","text","nelio-content")),S=u((function(e){return e(lr).getPost()})),A=r?(0,m.getHumanDateDue)(S,r.dateType,r.dateValue):"";return ur.createElement("div",{className:vr()((t={"nelio-content-editorial-task":!0},t["nelio-content-editorial-task--is-".concat(h)]=!!h,t["nelio-content-editorial-task--is-task-".concat(n)]=!0,t["nelio-content-editorial-task--is-due"]=f,t))},ur.createElement(mr.CheckboxControl,{className:vr()({"nelio-content-editorial-task__control":!0,"nelio-content-editorial-task__control--is-completed":g}),label:v,onChange:T,checked:g,disabled:!i||l||d}),ur.createElement("div",{className:vr()({"nelio-content-editorial-task__extra":!0,"nelio-content-editorial-task__extra--is-completed":g,"nelio-content-editorial-task__extra--is-deleting":l,"nelio-content-editorial-task__extra--is-due":f,"nelio-content-editorial-task__extra--is-synching":d})},d&&(0,le._x)("Saving","text","nelio-content"),!d&&"".concat(b,"  ").concat(A),f&&ur.createElement(mr.Dashicon,{icon:"warning"})),ur.createElement("div",{className:vr()({"nelio-content-editorial-task__actions":!0,"nelio-content-editorial-task__actions--is-deleting":l,"nelio-content-editorial-task__actions--is-synching":d})},ur.createElement(mr.Button,{variant:"link",disabled:!s||l||d,onClick:y},(0,le._x)("Edit","command","nelio-content")),ur.createElement(Tr.DeleteButton,{disabled:!a||d,isDeleting:l,onClick:_})))},Mr=function(e){return u((function(t){return t($t.store).getTask(e)}))},Fr=function(e){var t=Mr(e);return u((function(e){var n=e($t.store).canCurrentUserEditTask(t),r=e($t.store).canCurrentUserDeleteTask(t);return{canCompleteTask:!!t&&n,canDeleteTask:!!t&&r,canEditTask:!!t&&n}}))},Ur=function(e){var t=Mr(e);return u((function(n){if(!t)return{isDeleting:!1,isSynching:!1,isPastDateDue:!1};var r=n(lr),o=r.isEditorialTaskBeingDeleted,i=r.isEditorialTaskBeingSynched,a=n(lr).getPost(),s=n($t.store).getToday(),c=o(e),l=i(e);return{isDeleting:c,isSynching:l,isPastDateDue:!t.completed&&!l&&(0,m.getTaskDateDue)({baseDatetime:(null==a?void 0:a.date)||void 0,dateType:t.dateType,dateValue:t.dateValue})<s}}))},Gr=function(e){var t=u((function(e){return e(lr).getPost()})),n=(0,c.useDispatch)(Or.store).openExistingTaskEditor;return function(){return!!t&&!!e&&n(e,{context:"post",post:t})}},Br=function(e){var t=(0,c.useDispatch)(lr).deleteEditorialTask;return function(){return t(e)}},jr=function(e){var t=Mr(e),n=(0,c.useDispatch)(lr).markTaskAsCompleted;return function(){return n(e,!(null==t?void 0:t.completed))}},Qr=function(){var e=Kr();return(0,m.isEmpty)(e)?ur.createElement("div",{className:"nelio-content-task-list nelio-content-task-list--is-empty"},(0,le._x)("Keep track of the things that need to get done with tasks.","user","nelio-content")):ur.createElement("div",{className:"nelio-content-task-list"},e.map((function(e){return ur.createElement(Lr,{key:e,taskId:e})})))},Kr=function(){return u((function(e){var t=e(lr).getPostId;return(0,e($t.store).getTaskIdsRelatedToPost)(t())}))},Vr=function(){var e=Hr(),t=Yr(),n=(0,c.useDispatch)(lr).openTaskPresetLoader,r=zr();return ur.createElement("div",{className:"nelio-content-task-actions"},e&&ur.createElement(mr.Button,{variant:"secondary",disabled:!t,onClick:function(){return n(!0)}},(0,le._x)("Load Tasks","command","nelio-content")),ur.createElement(mr.Button,{variant:"secondary",disabled:!t,onClick:r},(0,le._x)("Add Task","command","nelio-content")))},qr=function(){return u((function(e){return e(lr).getPost()}))},Yr=function(){var e=qr();return u((function(t){return t($t.store).canCurrentUserCreateTasksRelatedToPost(e)}))},Hr=function(){return u((function(e){return!!e($t.store).getTaskPresets().length}))},zr=function(){var e=qr(),t=(0,c.useDispatch)(Or.store).openNewTaskEditor;return function(){return t({dateType:"publish"!==e.status?"predefined-offset":void 0,dateValue:"publish"!==e.status?"0":void 0},{post:e,context:"post"})}},Xr=function(){var e=u((function(e){return e(lr).getPostId()})),t=u((function(t){return!!t($t.store).getTaskIdsRelatedToPost(e).length})),n=u((function(e){return e(lr).getTaskPresetLoaderState()})),r=u((function(e){return e(lr).getTaskPresetSelection()})),o=(0,c.useDispatch)(lr),i=o.instantiatePresets,a=o.openTaskPresetLoader,s=o.selectTaskPresets;return ur.createElement(Tr.TaskPresetLoader,{state:n,actions:t?"replace-or-merge":"add",selection:r,onUpdate:s,onCancel:function(){return a(!1)},onMerge:function(e){return i("merge",e)},onReplace:function(e){return i("replace",e)}})},Wr=(0,dr.compose)((function(e){return(0,$t.withSubscriptionCheck)("raw/editorial-tasks",e)}),Rr,Cr("isRetrievingEditorialTasks"))((function(){return ur.createElement(ur.Fragment,null,ur.createElement(Nr,null),ur.createElement(Qr,null),ur.createElement(Vr,null),ur.createElement(Xr,null))})),$r=function(){var e=(0,c.useDispatch)(lr).editExternalFeaturedImage;return ur.createElement("div",{className:"nelio-content-efi-no-image"},ur.createElement(mr.Button,{variant:"link",onClick:e},(0,le._x)("Set external featured image","command","nelio-content")))},Jr=function(){var e=eo(),t=e[0],n=e[1],r=Zr(),o=r[0],i=r[1],a=to(),s=a.save,c=a.cancel,l=function(e){e&&"Enter"===e.key&&(e.preventDefault(),s())};return ur.createElement("div",{className:"nelio-content-efi-edit-image"},ur.createElement(mr.TextControl,{label:(0,le._x)("Image URL","text","nelio-content"),placeholder:"https://",value:t,onChange:function(e){n(e)},onKeyDown:l}),ur.createElement(mr.TextControl,{label:(0,le._x)("Alt Text","text","nelio-content"),value:o,onChange:i,onKeyDown:l}),ur.createElement("div",{className:"nelio-content-efi-edit-image__action"},ur.createElement(mr.Button,{variant:"secondary",onClick:c},(0,le._x)("Cancel","command","nelio-content"))," ",ur.createElement(mr.Button,{variant:"secondary",onClick:s,disabled:!(0,m.isUrl)(t)},(0,le._x)("Set Image","command","nelio-content"))))},Zr=function(){return[u((function(e){return e(lr).getExternalFeaturedImageAltField()})),(0,c.useDispatch)(lr).setExternalFeaturedImageAltField]},eo=function(){return[u((function(e){return e(lr).getExternalFeaturedImageUrlField()})),(0,c.useDispatch)(lr).setExternalFeaturedImageUrlField]},to=function(){var e=Zr()[0],t=eo()[0],n=(0,c.useDispatch)(lr),r=n.cancelEditionOfExternalFeaturedImage,o=n.setExternalFeaturedImage;return{save:function(){return(0,m.isUrl)(t)?o(t,e):void 0},cancel:function(){return r()}}},no=function(){var e=u((function(e){return e(lr).getExternalFeaturedImageAlt()})),t=u((function(e){return e(lr).getExternalFeaturedImageUrl()})),n=(0,c.useDispatch)(lr).editExternalFeaturedImage,r=(0,c.useDispatch)(lr).removeExternalFeaturedImage;return ur.createElement("div",{className:"nelio-content-efi-image"},ur.createElement(mr.Button,{className:"nelio-content-efi-image__image-button",onClick:n},ur.createElement("img",{className:"nelio-content-efi-image__actual-image",src:t,alt:e})),ur.createElement("div",{className:"nelio-content-efi-image__replace-button"},ur.createElement(mr.Button,{variant:"secondary",onClick:n},(0,le._x)("Replace Image","command","nelio-content"))),ur.createElement("div",null,ur.createElement(mr.Button,{variant:"link",isDestructive:!0,onClick:r},(0,le._x)("Remove external featured image","command","nelio-content"))))},ro=function(){switch(u((function(e){return e(lr).getExternalFeaturedImageView()}))){case"no-image":return ur.createElement($r,null);case"edit-image":return ur.createElement(Jr,null);case"image":return ur.createElement(no,null);default:return null}},oo=function(e){var t=e.isAuthor,n=e.remove,r=e.userId,o=(0,$t.useAuthorName)(r);return ur.createElement("div",{className:"nelio-content-notification-user"},ur.createElement("div",{className:"nelio-content-notification-user__icon"},ur.createElement(Tr.AuthorIcon,{authorId:r})),ur.createElement("div",{className:"nelio-content-notification-user__info"},ur.createElement("div",{className:"nelio-content-notification-user__name"},o||(0,le._x)("Unknown User","text","nelio-content")),ur.createElement("div",{className:"nelio-content-notification-user__extra"},t&&ur.createElement("span",{className:n?"nelio-content-notification-user__author nelio-content-notification-user__author--has-pipe":"nelio-content-notification-user__author"},(0,le._x)("Author","text","nelio-content")),!!n&&ur.createElement(mr.Button,{className:"nelio-content-notification-user__remove-action",isDestructive:!0,variant:"link",onClick:n},(0,le._x)("Remove","command","nelio-content")))))},io=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},ao=function(){var e=lo(),t=e[0],n=e[1],r=so(),o=co();return ur.createElement("div",{className:"nelio-content-notifications"},ur.createElement("div",{className:"nelio-content-notifications__user-searcher"},ur.createElement(Tr.AuthorSearcher,{placeholder:(0,le._x)("Select a user","user","nelio-content"),onChange:function(e){var r;e&&(r=e,n((0,f.uniq)(io(io([],t,!0),[r],!1))))}})),ur.createElement("div",{className:"nelio-content-notifications__followers"},t.map((function(e){return ur.createElement(oo,{key:e,userId:e,isAuthor:e===r,remove:e===r&&o?void 0:function(){return r=e,n((0,f.without)(t,r));var r}})}))))},so=function(){return u((function(e){return e(lr).getAuthorId()}))},co=function(){return u((function(e){return e(lr).getAuthorId()}))},lo=function(){var e=so(),t=u((function(e){return e(lr).getFollowers()})),n=(0,c.useDispatch)(lr).setFollowers;return[co()&&e?(0,f.uniq)(io([e],t,!0)):t,n]},uo=function(){var e=mo(),t=e[0],n=e[1],r=u((function(e){return e(lr).isReferenceEditorVisible()})),o=u((function(e){var n=e(lr).isReferenceSaving;return!(null==t?void 0:t.url)||n(t.url)})),i=fo(),a=i.close,s=i.saveAndClose;if(!r||!t)return null;var c=t.title,l=t.author,d=t.email,m=t.twitter,f=t.url,p=po(t);return ur.createElement(mr.Modal,{className:"nelio-content-reference-editor",title:(0,le._x)("Edit Reference","text","nelio-content"),isDismissible:!1,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,onRequestClose:function(){}},ur.createElement(mr.TextControl,{value:c,onChange:function(e){return n({title:e})},placeholder:(0,le._x)("Enter the title","user","nelio-content")}),ur.createElement("div",{className:"nelio-content-reference-editor__url"},ur.createElement("strong",null,"URL:")," ",ur.createElement(mr.ExternalLink,{href:f},f)),ur.createElement("h3",{className:"nelio-content-reference-editor__section-title"},(0,le._x)("Author Information","text","nelio-content")),ur.createElement(mr.TextControl,{label:(0,le._x)("Name","text","nelio-content"),value:l,onChange:function(e){return n({author:e})},placeholder:(0,le._x)("First and Last Names","text","nelio-content")}),ur.createElement(mr.TextControl,{label:(0,le._x)("Email","text","nelio-content"),value:d,onChange:function(e){return n({email:e})},placeholder:(0,le._x)("author@example.com","text","nelio-content")}),ur.createElement(mr.TextControl,{label:(0,le._x)("X","text","nelio-content"),value:m,onChange:function(e){return n({twitter:e})},placeholder:(0,le._x)("@username","text","nelio-content")}),ur.createElement("div",{className:"nelio-content-reference-editor__actions"},ur.createElement(mr.Button,{variant:"secondary",disabled:o,onClick:a},(0,le._x)("Cancel","command","nelio-content")),ur.createElement(Tr.SaveButton,{variant:"primary",error:p,isSaving:o,onClick:function(){s()}})))},mo=function(){return[u((function(e){return e(lr).getEditingReference()})),(0,c.useDispatch)(lr).updateEditingReference]},fo=function(){var e=(0,c.useDispatch)(lr);return{close:e.closeReferenceEditor,saveAndClose:e.saveAndCloseEditingReference}},po=function(e){var t=e.email,n=e.twitter;return(0,m.isEmpty)(t)||(0,tr.isEmail)(t)?(0,m.isValidTwitterHandler)(n)?"":(0,le._x)("Please write a valid twitter handle","user","nelio-content"):(0,le._x)("Please write a valid email address","user","nelio-content")},go=function(e){var t=e.onClick;return ur.createElement(Tr.DeleteButton,{labels:{delete:(0,le._x)("Discard","command","nelio-content"),deleting:(0,le._x)("Discarding","text","nelio-content")},confirmationLabels:{title:(0,le._x)("Discard Reference","text","nelio-content"),text:(0,le._x)("Are you sure you want to discard this reference? This operation cant be undone.","user","nelio-content")},onClick:t})},Eo=function(){return Eo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Eo.apply(this,arguments)},ho=function(e){var t=e.link;return ur.createElement("div",{className:"nelio-content-link-reference"},ur.createElement(vo,{link:t}),ur.createElement(yo,{link:t}),ur.createElement(_o,{link:t}),ur.createElement(To,{link:t}))},vo=function(e){var t=e.link,n=bo(t),r=n.title,o=n.url;return r?ur.createElement(ur.Fragment,null,ur.createElement("div",{className:"nelio-content-link-reference__title"},r),ur.createElement("div",{className:"nelio-content-link-reference__link"},ur.createElement(mr.ExternalLink,{href:o},o))):ur.createElement("div",{className:"nelio-content-link-reference__title"},ur.createElement(mr.ExternalLink,{href:o},o))},yo=function(e){var t=e.link,n=So(t),r=bo(t),o=r.author,i=r.email,a=r.twitter;return n?ur.createElement("div",{className:"nelio-content-link-reference__extra"},(0,le._x)("Loading","text","nelio-content")):a||i?ur.createElement("div",{className:"nelio-content-link-reference__extra"},ur.createElement("div",{className:"nelio-content-link-reference__author"},o||(0,le._x)("Unknown Author","text","nelio-content")),ur.createElement("div",{className:"nelio-content-link-reference__contact"},!!a&&ur.createElement(mr.ExternalLink,{href:"https://twitter.com/".concat(a)},ur.createElement(mr.Dashicon,{className:"nelio-content-link-reference__contact-icon",icon:"twitter"}))," ",!!i&&ur.createElement(mr.ExternalLink,{href:"mailto:".concat(i)},ur.createElement(mr.Dashicon,{className:"nelio-content-link-reference__contact-icon",icon:"email"})))):ur.createElement("div",{className:"nelio-content-link-reference__extra"},ur.createElement("div",{className:"nelio-content-link-reference__author"},o||(0,le._x)("Unknown Author","text","nelio-content")))},_o=function(e){var t=e.link,n=bo(t),r=(0,$t.useIsUserYou)(null==n?void 0:n.suggestionAdvisorId),o=(0,$t.useAuthorName)(null==n?void 0:n.suggestionAdvisorId);return n?!n.suggestionAdvisorId||r?ur.createElement("div",{className:"nelio-content-link-reference__advisor"},(0,le._x)("Suggested by you","text","nelio-content")):ur.createElement("div",{className:"nelio-content-link-reference__advisor"},o?(0,le.sprintf)(/* translators: author name */ /* translators: author name */
(0,le._x)("Suggested by %s","text","nelio-content"),o):(0,le._x)("Suggested by someone","text","nelio-content")):ur.createElement("div",{className:"nelio-content-link-reference__advisor"},(0,le._x)("Suggested by someone","text","nelio-content"))},To=function(e){var t=e.link,n=So(t),r=(0,c.useDispatch)(lr).openReferenceEditor,o=(0,c.useDispatch)(lr).discardReference;return n?ur.createElement("div",{className:"nelio-content-link-reference__actions"},(0,le.sprintf)("%1$s | %2$s",(0,le._x)("Discard","command","nelio-content"),(0,le._x)("Edit","command","nelio-content"))):ur.createElement("div",{className:"nelio-content-link-reference__actions"},ur.createElement(go,{onClick:function(){return o(t)}})," | ",ur.createElement(mr.Button,{variant:"link",onClick:function(){return r(t)}},(0,le._x)("Edit","command","nelio-content")))},bo=function(e){return u((function(t){var n=Eo(Eo({author:"",date:"",email:"",isExternal:!0,isSuggestion:!0,status:"pending",title:"",twitter:""},t(lr).getReferenceByUrl(e)),{url:e}),r=n.twitter,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(n,["twitter"]);return Eo(Eo({},o),{twitter:/^@/.test(r)?r.substring(1):r})}))},So=function(e){return u((function(t){return t(lr).isReferenceLoading(e)}))},Ao=function(){var e=u((function(e){return e(lr).getSuggestedReferences()}));return(0,m.isEmpty)(e)?ur.createElement("div",null,(0,le._x)("Do you have an interesting or helpful link for the author? Save it here!","user","nelio-content")):ur.createElement("div",null,e.map((function(e){return ur.createElement(ho,{key:e,link:e})})))},xo=function(){var e=ko(),t=e[0],n=e[1],r=Io(),o=wo(),i=!(0,m.isEmpty)(t)&&(0,tr.isURL)(t);return ur.createElement("div",{className:"nelio-content-reference-creator"},ur.createElement(mr.TextControl,{autoComplete:"off",placeholder:(0,le._x)("Enter a URL","user","nelio-content"),value:t,onChange:n,onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),i&&r())}}),ur.createElement(mr.Button,{variant:"secondary",disabled:!i,onClick:r},o?(0,le._x)("Add","command","nelio-content"):(0,le._x)("Suggest","command","nelio-content")))},ko=function(){return[u((function(e){return e(lr).getSuggestedReferenceUrl()})),(0,c.useDispatch)(lr).setSuggestedReferenceUrl]},Io=function(){var e=ko(),t=e[0],n=e[1],r=(0,c.useDispatch)(lr).suggestReference;return function(){(0,m.isUrl)(t)&&r(t),n("")}},wo=function(){return u((function(e){return e($t.store).getCurrentUserId()===e(lr).getAuthorId()}))},Ro=function(){return ur.createElement(ur.Fragment,null,ur.createElement(Ao,null),ur.createElement(xo,null))},Co=function(e){var t=e.onClick,n=e.label,r=u((function(e){return e(lr).getOverallPostQualityStatus()})),o=n||function(e){switch(e){case"perfect":return(0,ur.createInterpolateElement)((0,le._x)("The post looks <strong>awesome</strong>!","text","nelio-content"),{strong:ur.createElement("strong",null)});case"good":return(0,ur.createInterpolateElement)((0,le._x)("The post looks <strong>good</strong>!","text","nelio-content"),{strong:ur.createElement("strong",null)});case"improvable":return(0,ur.createInterpolateElement)((0,le._x)("The post is <strong>improvable</strong>","text","nelio-content"),{strong:ur.createElement("strong",null)});case"bad":return(0,ur.createInterpolateElement)((0,le._x)("The post is <strong>poor</strong>","text","nelio-content"),{strong:ur.createElement("strong",null)});default:return(0,le._x)("Post cant be evaluated","text","nelio-content")}}(r);return ur.createElement("div",{className:"nelio-content-quality-analysis-summary"},ur.createElement("div",{className:"nelio-content-quality-analysis-summary__icon-wrapper"},ur.createElement("div",{className:"nelio-content-quality-analysis-summary__icon nelio-content-quality-analysis-summary__icon--is-".concat(r)},"perfect"===r&&ur.createElement(mr.Dashicon,{icon:"awards"}),"good"===r&&ur.createElement(mr.Dashicon,{icon:"thumbs-up"}),"improvable"===r&&ur.createElement(mr.Dashicon,{icon:"admin-tools"}),"bad"===r&&ur.createElement(mr.Dashicon,{icon:"thumbs-down"}))),ur.createElement("div",{className:"nelio-content-quality-analysis-summary__explanation"},t?ur.createElement(mr.Button,{variant:"link",onClick:t},ur.createElement("span",null,o)):ur.createElement("span",null,o)))},Po=function(e){var t=e.icon,n=e.name,r=u((function(e){return e(lr).getQualityCheckStatus(n)})),o=u((function(e){return e(lr).getQualityCheckRationale(n)}));return"invisible"===r?null:ur.createElement("div",{className:"nelio-content-quality-analysis__quality-check"},ur.createElement("div",{className:"nelio-content-quality-analysis__quality-check-icon-wrapper"},ur.createElement("div",{className:"nelio-content-quality-analysis__quality-check-icon nelio-content-quality-analysis__quality-check-icon--is-".concat(r)},ur.createElement(mr.Dashicon,{icon:t}))),ur.createElement("div",{className:"nelio-content-quality-analysis__quality-check-rationale nelio-content-quality-analysis__quality-check-rationale--is-".concat(r)},o))},No=function(e){var t=e.isMetabox,n=Mo()[0],r=Lo();return ur.createElement("div",{className:"nelio-content-quality-analysis"},ur.createElement(Do,{enabled:!!t}),n&&ur.createElement("div",{className:"nelio-content-quality-analysis__details"},r.map((function(e){var t=e.name,n=e.icon;return ur.createElement(Po,{key:t,name:t,icon:n})}))))},Do=function(e){var t=e.enabled,n=Oo(),r=Mo(),o=r[0],i=r[1];return t?ur.createElement("div",{className:"nelio-content-quality-analysis__summary"},ur.createElement("div",{className:"nelio-content-quality-analysis__actual-summary"},ur.createElement(Co,null)),n&&ur.createElement(mr.Button,{className:"nelio-content-quality-analysis__details-toggler",size:"small",onClick:function(){return i(!o)}},ur.createElement(mr.Dashicon,{icon:o?"arrow-up":"arrow-down"}))):null},Oo=function(){return u((function(e){return e(lr).isQualityAnalysisFullyIntegrated()}))},Lo=function(){return u((function(e){return e(lr).getQualityCheckTypes()}))},Mo=function(){var e="post-quality-analysis",t=Oo(),n=u((function(t){return t(lr).isPanelOpen(e)})),r=!t||n,o=(0,c.useDispatch)(lr).togglePanel;return[r,function(t){return o(e,t)}]},Fo=function(e){var t=e.children,n=e.icon,r=e.title,o=e.titleActions,i=e.type;return ur.createElement("div",{className:"nelio-content-social-media-metabox__section"},ur.createElement("div",{className:"nelio-content-social-media-metabox__section-title"},ur.createElement(mr.Dashicon,{icon:n}),r,!!o&&o),ur.createElement("div",{className:"nelio-content-social-media-metabox__section-content nelio-content-social-media-metabox__section-content--is-".concat(i)},t))},Uo=function(){var e=u((function(e){return e(lr).getPost()})),t="publish"===(null==e?void 0:e.status),n=u((function(t){return t($t.store).getPostTypes("analytics").some((function(t){return t.name===e.type}))}));return e&&n&&t?ur.createElement(Fo,{icon:"chart-bar",title:(0,le._x)("Analytics","text","nelio-content"),type:"analytics"},ur.createElement(Tr.PostPageviewsAnalytics,{postId:e.id}),ur.createElement(Tr.PostEngagementAnalytics,{postId:e.id})):null},Go=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Bo=function(){var e=Qo(),t=e.items,n=e.add,r=e.replace,o=e.set;return(0,ur.useEffect)((function(){o(t.filter((function(e){var t=e[0];return!!(0,f.trim)(t)})))}),[]),ur.createElement("div",{className:"nelio-content-permalink-settings"},ur.createElement("div",{className:"nelio-content-permalink-settings__query-args"},t.length?ur.createElement("p",null,(0,le._x)("URL Parameters:","text","nelio-content")):ur.createElement("p",null,(0,le._x)("Add custom URL parameters when sharing this post on social media:","user","nelio-content")),t.map((function(e,t){return ur.createElement(jo,{key:t,name:e[0],value:e[1],showLabel:!t,onNameChange:function(t){return r(e,[t,e[1]])},onValueChange:function(t){return r(e,[e[0],t])}})})),ur.createElement("div",{className:"nelio-content-permalink-settings__query-args-actions"},ur.createElement(mr.Button,{variant:"secondary",onClick:n},(0,le._x)("Add New","command (URL parameter)","nelio-content")))))},jo=function(e){var t=e.name,n=e.value,r=e.showLabel,o=e.onNameChange,i=e.onValueChange;return ur.createElement("div",{className:"nelio-content-permalink-settings__query-arg"},ur.createElement(mr.TextControl,{label:r?(0,le._x)("Name","text","nelio-content"):void 0,placeholder:(0,le._x)("Name","text","nelio-content"),value:t,onChange:o}),ur.createElement(mr.TextControl,{label:r?(0,le._x)("Value (optional)","text","nelio-content"):void 0,placeholder:(0,le._x)("Value (optional)","text","nelio-content"),value:n,onChange:i}))},Qo=function(){var e=u((function(e){return e(lr).getQueryArgs()})),t=(0,c.useDispatch)(lr).setQueryArgs;return{items:e,add:function(){return t(Go(Go([],e,!0),[["",""]],!1))},replace:function(n,r){return t(e.map((function(e){return e===n?r:e})))},set:t}},Ko=function(){return ur.createElement(Fo,{icon:"admin-links",title:(0,le._x)("Permalink Settings","text","nelio-content"),type:"permalink-settings"},ur.createElement(Bo,null))},Vo=function(){return u((function(e){var t=e(lr).getPost();return e($t.store).getPostAutomationGroups(t).some((function(e){return!!e.priority&&(0,f.values)(e.profileSettings).some((function(e){return e.enabled&&(e.publication.enabled||e.reshare.enabled)}))}))}))},qo=function(){return u((function(e){var t=e(lr),n=t.getPost,r=t.isTimelineBusy,o=e($t.store).canCurrentUserUseAutomationsInPost;return!r()&&o(n())}))},Yo=function(){return u((function(e){return e(lr).getDeletingMessageIds()}))},Ho=function(){return u((function(e){return e(lr).getPost()}))},zo=function(){return u((function(e){return e(lr).isTimelineBusy()}))},Xo=function(){var e=qo(),t=Jo(),n=t[0],r=t[1],o=ni(),i=o[0],a=o[1],s=oi();return ur.createElement("div",{className:"nelio-content-automation-settings"},ur.createElement(mr.CheckboxControl,{label:(0,le._x)("Auto share on social media","command","nelio-content"),disabled:!e,checked:n,onChange:r}),n&&ur.createElement(ur.Fragment,null,ur.createElement(mr.SelectControl,{disabled:!e,value:i,onChange:a,options:s}),ur.createElement($o,null),ur.createElement(Wo,null)))},Wo=function(){var e=qo(),t=Zo(),n=t[0],r=t[1],o=ei(),i=o[0],a=o[1];return ur.createElement("div",{className:"nelio-content-automation-settings__automation-sources"},ur.createElement(mr.CheckboxControl,{label:(0,le._x)("Custom highlights","text","nelio-content"),disabled:!e,checked:n,onChange:function(e){return r(e)}}),n&&ur.createElement(mr.TextareaControl,{help:(0,le._x)("Please write one highlight per line.","user","nelio-content"),disabled:!e,value:i.join("\n"),onChange:a}))},$o=function(){var e=Vo(),t=ri(),n=(0,$t.useAdminUrl)("admin.php",{page:"nelio-content-settings",subpage:"social--automations"});return t?ur.createElement("div",{className:"nelio-content-automation-settings__warning"},(0,le.sprintf)(/* translators: date */ /* translators: date */
(0,le._x)("Warning! Nelio Content will not share any more social messages automatically, because auto sharing was set to end on %s.","text","nelio-content"),t)):e?null:ur.createElement("div",{className:"nelio-content-automation-settings__warning"},(0,ur.createInterpolateElement)((0,le._x)("Warning! None of your automation groups can share this content. Nelio Content will not be able to automatically create any social messages until you <a>update your settings</a> and refresh.","user","nelio-content"),{a:ur.createElement(mr.ExternalLink,{href:n})}))},Jo=function(){return[u((function(e){return e(lr).isAutoShareEnabled()})),(0,c.useDispatch)(lr).enableAutoShare]},Zo=function(){return ti("useCustomSentences")},ei=function(){var e=u((function(e){return e(lr).getAutomationSources().customSentences})),t=(0,c.useDispatch)(lr).setAutomationSources;return[e,function(e){return t({customSentences:e.split("\n")})}]},ti=function(e){var t=u((function(t){return t(lr).getAutomationSources()[e]})),n=(0,c.useDispatch)(lr).setAutomationSources;return[t,function(t){var r;return n(((r={})[e]=t,r))}]},ni=function(){return[u((function(e){return e(lr).getAutoShareEndMode()})),(0,c.useDispatch)(lr).setAutoShareEndMode]},ri=function(){var e,t=Jo()[0],n=ni()[0],r=u((function(e){return e($t.store).getToday()})),o=u((function(e){return e(lr).getAutoShareEndModeDuration(n)})),i=u((function(e){return e(lr).getPost()}));if(!t)return!1;if(!o)return!1;if("publish"!==i.status)return!1;var a=_r()((null==i?void 0:i.date)||void 0).add(o,"months");return(0,br.dateI18n)("Y-m-d",a)<r&&(0,br.dateI18n)((null===(e=(0,br.getSettings)().formats)||void 0===e?void 0:e.date)||"Y-m-d",a)},oi=function(){return u((function(e){return e(lr).getAutoShareEndModes()}))},ii=function(){return ur.createElement(Fo,{icon:"admin-settings",title:(0,le._x)("Automation Settings","text","nelio-content"),type:"settings"},ur.createElement(Xo,null))};const ai=window.NelioContent.socialTimeline;var si=function(e){var t=e.isSmall,n=zo(),r=qo(),o=(0,c.useDispatch)(lr).clearTimeline;return ur.createElement(Tr.DeleteButton,{size:t?"small":void 0,disabled:!r,onClick:o,isDeleting:n,labels:{delete:(0,le._x)("Clear Timeline","command","nelio-content"),deleting:(0,le._x)("Clearing Timeline","text","nelio-content")},confirmationLabels:{title:(0,le._x)("Clear Timeline","text","nelio-content"),text:(0,le._x)("Are you sure you want to clear your timeline? This operation cant be undone and youll lose any manual messages you might have created.","user","nelio-content")}})},ci=function(e){var t=e.enabled,n=Vo(),r=qo(),o=u((function(e){return e(lr).isGeneratingTimeline()})),i=(0,c.useDispatch)(lr).savePostAndGenerateTimeline;return t?ur.createElement(ur.Fragment,null,n&&ur.createElement(mr.Button,{size:"small",variant:"secondary",isBusy:o,disabled:!r,onClick:i},o?(0,le._x)("Generating Timeline","text","nelio-content"):(0,le._x)("Regenerate Timeline","command","nelio-content")),ur.createElement(si,{isSmall:!0})):null};const li=window.NelioContent.socialMessageEditor;var ui=(0,$t.withProfileCheck)((function(){var e=di(),t=mi(),n=Vo(),r=qo(),o=(0,c.useDispatch)(lr).savePostAndGenerateTimeline,i=u((function(e){return e(lr).getPost()})),a=(0,c.useDispatch)(li.store).openNewSocialMessageEditor,s=u((function(e){var t=e(lr).getPost(),n=e(lr).isTimelineBusy,r=e($t.store).canCurrentUserCreateMessagesRelatedToPost;return!n()&&r(t)})),l=u((function(e){var t=e(lr).getPost(),n=e(lr).isTimelineBusy,r=e($t.store).couldSubscriberCreateMessagesRelatedToPost;return!n()&&r(t)})),d=(0,$t.useFeatureGuard)("edit-post/create-more-messages",l&&!s)((function(){return a({},{context:"post",post:i,disabledProfileIds:An()})}));return ur.createElement("div",{className:"nelio-content-generate-timeline-button"},ur.createElement(Tr.SubscribeAction,{className:"nelio-content-generate-timeline-button__promo-button"}),n&&ur.createElement("div",{className:"nelio-content-generate-timeline-button__timeline-button"},ur.createElement(mr.Button,{variant:"primary",isBusy:e,disabled:!r,onClick:o},t)),ur.createElement("div",{className:"nelio-content-generate-timeline-button__single-button"},ur.createElement(mr.Button,{variant:n?"tertiary":"primary",disabled:!l,onClick:d,icon:!s&&l?"lock":void 0},(0,le._x)("Add Social Message","command","nelio-content"))))})),di=function(){return u((function(e){return e(lr).isGeneratingTimeline()}))},mi=function(){return u((function(e){e($t.store);var t=e(lr).getPost();if(!t)return"";var n=t.status,r=t.id,o=e($t.store).getSocialMessagesRelatedToPost(r).filter((function(e){return"publish"!==e.status})),i=e(lr).isGeneratingTimeline;return(0,m.isEmpty)(o)?"publish"===n?i()?(0,le._x)("Filling Timeline","text","nelio-content"):(0,le._x)("Fill Timeline","command","nelio-content"):(0,e(lr).isAutoShareEnabled)()?i()?(0,le._x)("Loading Timeline","text","nelio-content"):(0,le._x)("Customize Timeline","command","nelio-content"):i()?(0,le._x)("Generating Timeline","text","nelio-content"):(0,le._x)("Generate Timeline","command","nelio-content"):i()?(0,le._x)("Generating Timeline","text","nelio-content"):(0,le._x)("Regenerate Timeline","command","nelio-content")}))},fi=function(){var e=u((function(e){return!!e($t.store).getSocialProfileCount()})),t=pi(),n=(0,c.useDispatch)(lr).deleteSocialMessage,r=Yo(),o=zo(),i=Ho();return ur.createElement(Fo,{icon:"share",title:(0,le._x)("Timeline","text","nelio-content"),titleActions:ur.createElement(ci,{enabled:e&&t}),type:"timeline"},t?ur.createElement(ai.SocialTimeline,{deleteMessage:n,deletingMessageIds:r,isTimelineBusy:o,post:i}):ur.createElement(ui,null))},pi=function(){return u((function(e){var t=e(lr).getPostId,n=(0,e($t.store).getSocialMessagesRelatedToPost)(t());return!!(0,f.find)(n,(function(e){return"publish"!==e.status}))}))},gi=(0,dr.compose)(Rr,Cr("isRetrievingSocialMessages"))((function(){return ur.createElement(mr.SlotFillProvider,null,ur.createElement("div",{className:"nelio-content-social-media-metabox"},ur.createElement(Uo,null),ur.createElement(fi,null),ur.createElement(ii,null),ur.createElement(Ko,null)),ur.createElement(mr.Popover.Slot,null))})),Ei=function(){var e=hi(),t=(0,c.useDispatch)("core/edit-post").openGeneralSidebar;return ur.createElement("div",{className:"nelio-content-social-media-publish-summary"},ur.createElement("div",{className:"nelio-content-social-media-publish-summary__icon"},ur.createElement(mr.Dashicon,{icon:"share"})),ur.createElement("div",{className:"nelio-content-social-media-publish-summary__button"},ur.createElement(mr.Button,{variant:"link",onClick:function(){t("nelio-content/nelio-content-social-sidebar")}},e)))},hi=function(){return u((function(e){var t=e(lr).getPost,n=e($t.store).getSocialMessagesRelatedToPost,r=t()||{},o=r.status,i=n(r.id);if("publish"===o&&(0,m.isEmpty)(i))return(0,le._x)("Share on social media","command","nelio-content");if((0,m.isEmpty)(i))return(0,e(lr).isAutoShareEnabled)()?(0,le._x)("Customize social messages","command","nelio-content"):(0,le._x)("Share on social media","command","nelio-content");var a=i.filter((function(e){return"publish"!==e.status})),s=a.length;return(0,le.sprintf)(/* translators: number of social messages */ /* translators: number of social messages */
(0,le._nx)("%d social message ready","%d social messages ready",s,"text","nelio-content"),s)}))},vi=function(){return ur.createElement(mr.PanelBody,{className:"nelio-content-social-media-sidebar-main-panel"},ur.createElement(mr.PanelRow,{className:"nelio-content-social-media-sidebar-main-panel__buttons"},ur.createElement(ui,null)))},yi=function(){var e=(0,c.useDispatch)(lr).deleteSocialMessage,t=Yo(),n=zo(),r=Ho();return _i()?ur.createElement(mr.PanelBody,{className:"nelio-content-sidebar-timeline",title:(0,le._x)("Social Timeline","text","nelio-content")},ur.createElement(ai.SocialTimeline,{deleteMessage:e,deletingMessageIds:t,isTimelineBusy:n,post:r}),ur.createElement("div",{className:"nelio-content-sidebar-timeline__clear-button"},ur.createElement(si,null))):null},_i=function(){return u((function(e){var t=e(lr).getPostId,n=(0,e($t.store).getSocialMessagesRelatedToPost)(t());return!!(0,f.find)(n,(function(e){return"publish"!==e.status}))}))},Ti=function(){return ur.createElement(mr.PanelBody,{title:(0,le._x)("Automation Settings","text","nelio-content")},ur.createElement(Xo,null))},bi=function(){return ur.createElement(mr.PanelBody,{title:(0,le._x)("Permalink Settings","text","nelio-content")},ur.createElement(Bo,null))},Si=function(){var e=u((function(e){return e(lr).isPostReady()})),t=u((function(e){return e(lr).isRetrievingSocialMessages()}));return e?t?ur.createElement(mr.PanelBody,null,(0,le._x)("Loading","text","nelio-content")):ur.createElement(ur.Fragment,null,ur.createElement(vi,null),ur.createElement(yi,null),ur.createElement(Ti,null),ur.createElement(bi,null)):ur.createElement(mr.PanelBody,null,(0,le._x)("Please save post first to access this feature.","user","nelio-content"))},Ai=(0,dr.compose)($t.withProfileCheck,Rr)((function(){var e=(0,c.useDispatch)("core/edit-post").openGeneralSidebar;return ur.createElement("div",{className:"nelio-content-social-media-tools"},ur.createElement("p",null,(0,le._x)("Nelio Content helps you share WordPress content on social media, so that you can reach a broader audience and engage with more people.","text","nelio-content")),ur.createElement(mr.Button,{variant:"secondary",onClick:function(){e("nelio-content/nelio-content-social-sidebar")}},(0,le._x)("View Social Timeline","command","nelio-content")))})),xi={};function ki(e){var t,n,r;void 0===e&&(e={});var o=(0,c.select)(lr).getPostQualitySettings(),i={allowedBads:null!==(t=e.allowedBads)&&void 0!==t?t:o.allowedBads,allowedImprovables:null!==(n=e.allowedImprovables)&&void 0!==n?n:o.allowedImprovables,unacceptableImprovables:null!==(r=e.unacceptableImprovables)&&void 0!==r?r:o.unacceptableImprovables};(0,c.dispatch)(lr).setPostQualitySettings(i)}function Ii(e,t){var n=t.icon,r=t.interval,o=void 0===r?500:r,i=t.settings,a=void 0===i?{}:i,s=t.attributes,u=t.validate;if("string"==typeof e)if(/^[a-z][a-z0-9-]*\/[a-z][a-z0-9-]*$/.test(e))if((0,c.select)(lr).getQualityCheckType(e))console.error("Quality check ".concat(e," is already registered."));else if(n)if((0,f.isFunction)(s))if((0,f.isFunction)(u)){if(void 0!==o&&a){var d={name:e,icon:n,interval:o,settings:a,attributes:s,validate:u};return(0,c.dispatch)(lr).addQualityCheckType(d),function(e,t){t=Math.max(t,500);var n=(0,f.throttle)((function(){var t=(0,(0,c.select)(lr).getQualityCheckType)(e);if(t){var n=xi[e];if(n){var r,o=n.prevAttributes,i=n.prevSettings,a=t.settings;try{r=t.attributes(c.select)}catch(e){return void console.error(e)}if(n.prevAttributes=r,n.prevSettings=a,!(0,f.isEqual)(o,r)||i!==a)try{var s=t.validate(r,a)||{},l=s.status,u=void 0===l?"unknown":l,d=s.text,m=void 0===d?(0,le._x)("Unknown status","text","nelio-content"):d;(0,(0,c.dispatch)(lr).updateQualityCheckItem)(e,u,m)}catch(e){console.error(e)}}}}),t);xi[e]={unsubscribe:l(n),prevAttributes:{},prevSettings:{}},n()}(e,d.interval),d}}else console.error("The validate property must be a valid function.");else console.error("The attributes property must be a valid function.");else console.error("Quality check ".concat(e," must have an icon."));else console.error("Quality check names must contain a namespace prefix, include only lowercase alphanumeric characters or dashes, and start with a letter. Example: my-plugin/my-custom-quality-check");else console.error("Quality check names must be strings.")}function wi(e){!function(e){var t;null===(t=xi[e])||void 0===t||t.unsubscribe(),delete xi[e]}(e),(0,c.dispatch)(lr).removeQualityCheckType(e)}function Ri(e,t){(0,c.select)(lr).getQualityCheckType(e)&&(0,c.dispatch)(lr).updateQualityCheckSettings(e,t)}Ii("nelio-content/yoast-seo",{icon:"book",attributes:function(e){var t;if(!e("yoast-seo/editor"))return{status:"invisible",text:""};try{var n=e("yoast-seo/editor").getFocusKeyphrase;if(!(null==n?void 0:n()))return{status:"unknown",text:(0,le._x)("Yoast SEO score is not available","text","nelio-content")};var r=e("yoast-seo/editor").getResultsForFocusKeyword,o=null==r?void 0:r(),i=null!==(t=null==o?void 0:o.overallScore)&&void 0!==t?t:0;return i<40?{status:"bad",text:(0,le._x)("Address your Yoast SEO score","user","nelio-content")}:i<70?{status:"improvable",text:(0,le._x)("Improve Yoast SEO score","user","nelio-content")}:{status:"good",text:(0,le._x)("Yoast SEO looks good","user","nelio-content")}}catch(e){return{status:"unknown",text:(0,le._x)("Unable to retrieve Yoast SEO score","text","nelio-content")}}},validate:function(e){return e}}),Ii("nelio-content/yoast-content",{icon:"chart-bar",attributes:function(e){var t;if(!e("yoast-seo/editor"))return{status:"invisible",text:""};try{var n=e("yoast-seo/editor").getReadabilityResults,r=null==n?void 0:n(),o=null!==(t=null==r?void 0:r.overallScore)&&void 0!==t?t:0;return o<40?{status:"bad",text:(0,le._x)("According to Yoast, content needs improvement","text","nelio-content")}:o<70?{status:"improvable",text:(0,le._x)("According to Yoast, content is OK","text","nelio-content")}:{status:"good",text:(0,le._x)("According to Yoast, content is good","text","nelio-content")}}catch(e){return{status:"unknown",text:(0,le._x)("Unable to retrieve Yoast Content Analysis","text","nelio-content")}}},validate:function(e){return e}});const Ci=window.NelioContent.networks;function Pi(e){return"tiktok"!==e.network}Ii("nelio-content/social-messages",{icon:"share",settings:{isNoProfilesBad:!0,isAllProfilesEmptyBad:!0,isSomeProfilesEmptyBad:!1},attributes:function(e){var t=e(lr),n=e($t.store),r=t.getAutomationSources(),o=t.isAutoShareEnabled(),i=t.getContent().includes("<ncshare>")||r.useCustomSentences;return{isEnabled:n.getPostTypes("social").map((function(e){return e.name})).includes(t.getPostType()),isPostAutoShareable:o&&i,isPublished:"publish"===t.getStatus(),hasImages:!!t.getImages().length||!!t.getFeaturedImageSrc(),messages:n.getSocialMessagesRelatedToPost(t.getPostId()),profiles:n.getSocialProfiles()}},validate:function(e,t){var n=e.isEnabled,r=e.isPostAutoShareable,o=e.isPublished,i=e.hasImages,a=e.messages,s=e.profiles,c=t.isNoProfilesBad,l=t.isAllProfilesEmptyBad,u=t.isSomeProfilesEmptyBad;return n?o?{status:"good",text:(0,le._x)("Social messages look good","text","nelio-content")}:(0,m.isEmpty)(s)?{status:c?"bad":"improvable",text:(0,le._x)("Connect some profiles to share this on social media","user","nelio-content")}:(s=s.filter(Pi),(0,m.isEmpty)(s)?{status:"improvable",text:(0,le._x)("Connect non-TikTok profiles to promote this on social media","user","nelio-content")}:(0,m.isEmpty)(a)?r&&s.every((function(e){return!!e.publicationFrequency}))?!i&&s.every((function(e){return(0,Ci.doesNetworkRequire)("image",e.network)}))?{status:l?"bad":"improvable",text:(0,le._x)("Social messages cant be auto-generated because all profiles require an image","text","nelio-content")}:!i&&s.some((function(e){return(0,Ci.doesNetworkRequire)("image",e.network)}))?{status:u?"bad":"improvable",text:(0,le._x)("Some profiles require an image and their social messages cant be auto-generated","text","nelio-content")}:{status:"good",text:(0,le._x)("Automatic social messages look good","text","nelio-content")}:{status:l?"bad":"improvable",text:(0,le._x)("Schedule social messages on all profiles","user","nelio-content")}:s.every((function(e){return a.some((function(t){return t.profileId===e.id}))}))?{status:"good",text:(0,le._x)("Social messages look good","text","nelio-content")}:{status:u?"bad":"improvable",text:(0,le._x)("Schedule social messages on all profiles","user","nelio-content")}):{status:"invisible",text:""}}}),Ii("nelio-content/editorial-tasks",{icon:"flag",settings:{useBadStatus:!0},attributes:function(e){var t=e(lr),n=t.getPostId,r=t.getPostType,o=e($t.store),i=o.getPostTypes,a=o.getTasksRelatedToPost;return{isEnabled:i("tasks").map((function(e){return e.name})).includes(r()),tasks:a(n())}},validate:function(e,t){var n=e.isEnabled,r=e.tasks,o=t.useBadStatus;if(!n)return{status:"invisible",text:""};var i=r.filter((function(e){return!e.completed}));return(0,m.isEmpty)(i)?{status:"good",text:(0,le._x)("There are no pending tasks","text","nelio-content")}:{status:o?"bad":"improvable",text:(0,le._x)("Complete all tasks","user","nelio-content")}}});const Ni=window.wp.coreData;Ii("nelio-content/featured-image",{icon:"format-image",settings:{useBadStatus:!0,canImageBeAutoSet:!1},attributes:function(e){var t=e(lr),n=t.getFeaturedImageSrc,r=(0,t.getPostType)(),o=r?e(Ni.store).getEntityRecord("root","postType",r):void 0;return{isEnabled:!!(null==o?void 0:o.supports.excerpt),imageSrc:n()}},validate:function(e,t){var n=e.isEnabled,r=e.imageSrc,o=t.canImageBeAutoSet,i=t.useBadStatus;if(!n)return{status:"invisible",text:""};var a=!(0,m.isEmpty)(r);return o||a?{status:"good",text:a?(0,le._x)("Theres a featured image","text","nelio-content"):(0,le._x)("Automatic featured image","text","nelio-content")}:{status:i?"bad":"improvable",text:(0,le._x)("Set a featured image","user","nelio-content")}}}),Ii("nelio-content/content-length",{icon:"edit",interval:2e3,settings:{improvableThreshold:700,goodThreshold:1e3},attributes:function(e){return{content:(0,e(lr).getContent)()}},validate:function(e,t){var n=e.content,r=t.improvableThreshold,o=t.goodThreshold,i=function(e){return void 0===e&&(e=""),(e=(e=e.replace(/<[^>]*>/g,"")).replace(/\s+/g," ")).split(" ").length}(n);return i<r?{status:"bad",text:(0,le._x)("Write a longer copy","user","nelio-content")}:i<o?{status:"improvable",text:(0,le._x)("Write a longer copy","user","nelio-content")}:{status:"good",text:(0,le._x)("Copy length looks good","text","nelio-content")}}}),Ii("nelio-content/internal-links",{icon:"admin-links",settings:{improvableThreshold:1,goodThreshold:2},attributes:function(e){return{content:(0,e(lr).getContent)()}},validate:function(e,t){var n=e.content,r=(0,m.getLinks)(n).filter(m.isInternalUrl),o=t.improvableThreshold,i=t.goodThreshold,a=i-r.length;return(0,m.isEmpty)(r)?{status:r.length<o?"bad":"improvable",text:(0,le.sprintf)(/* translators: number of links */ /* translators: number of links */
(0,le._nx)("Add %d link to your own site","Add %d links to your own site",a,"user","nelio-content"),a)}:r.length<i?{status:r.length<o?"bad":"improvable",text:(0,le.sprintf)(/* translators: number of links */ /* translators: number of links */
(0,le._nx)("Add %d more link to your own site","Add %d more links to your own site",a,"user","nelio-content"),a)}:{status:"good",text:(0,le._x)("Links to your own site look good","text","nelio-content")}}}),Ii("nelio-content/external-links",{icon:"external",settings:{improvableThreshold:1,goodThreshold:2},attributes:function(e){return{content:(0,e(lr).getContent)()}},validate:function(e,t){var n=e.content,r=(0,m.getLinks)(n).filter(m.isExternalUrl),o=t.improvableThreshold,i=t.goodThreshold,a=i-r.length;return(0,m.isEmpty)(r)?{status:r.length<o?"bad":"improvable",text:(0,le.sprintf)(/* translators: number of links */ /* translators: number of links */
(0,le._nx)("Add %d link to an external source","Add %d links to external sources",a,"user","nelio-content"),a)}:r.length<i?{status:r.length<o?"bad":"improvable",text:(0,le.sprintf)(/* translators: number of links */ /* translators: number of links */
(0,le._nx)("Add %d more link to an external source","Add %d more links to external sources",a,"user","nelio-content"),a)}:{status:"good",text:(0,le._x)("Links to external sources look good","text","nelio-content")}}}),Ii("nelio-content/content-images",{icon:"images-alt",settings:{improvableThreshold:1,goodThreshold:2},attributes:function(e){return{images:(0,e(lr).getImages)()}},validate:function(e,t){var n=e.images,r=t.improvableThreshold,o=t.goodThreshold,i=o-n.length;return(0,m.isEmpty)(n)?{status:n.length<r?"bad":"improvable",text:(0,le.sprintf)(/* translators: number of images */ /* translators: number of images */
(0,le._nx)("Add %d image in your copy","Add %d images in your copy",i,"user","nelio-content"),i)}:n.length<o?{status:n.length<r?"bad":"improvable",text:(0,le.sprintf)(/* translators: number of images */ /* translators: number of images */
(0,le._nx)("Add %d more image in your copy","Add %d more images in your copy",i,"user","nelio-content"),i)}:{status:"good",text:(0,le._x)("Image count looks good","text","nelio-content")}}}),Ii("nelio-content/author",{icon:"admin-users",settings:{useBadStatus:!1},attributes:function(e){var t=e(lr),n=t.getAuthorId,r=t.getPostType,o=(0,e($t.store).getAuthor)(n()),i=r(),a=i?e(Ni.store).getEntityRecord("root","postType",i):void 0;return{isEnabled:!!(null==a?void 0:a.supports.author),isAdmin:!!(null==o?void 0:o.isAdmin)}},validate:function(e,t){var n=e.isEnabled,r=e.isAdmin,o=t.useBadStatus;return n?r?{status:o?"bad":"improvable",text:(0,le._x)("Select a non-admin author","user","nelio-content")}:{status:"good",text:(0,le._x)("Valid author","text","nelio-content")}:{status:"invisible",text:""}}}),Ii("nelio-content/excerpt",{icon:"text",settings:{useBadStatus:!1},attributes:function(e){var t=e(lr),n=t.getExcerpt,r=(0,t.getPostType)(),o=r?e(Ni.store).getEntityRecord("root","postType",r):void 0;return{isEnabled:!!(null==o?void 0:o.supports.excerpt),excerpt:n()}},validate:function(e,t){var n=e.isEnabled,r=e.excerpt,o=t.useBadStatus;return n?(0,m.isEmpty)((0,f.trim)(r))?{status:o?"bad":"improvable",text:(0,le._x)("Write an excerpt","user","nelio-content")}:{status:"good",text:(0,le._x)("Excerpt looks good","text","nelio-content")}:{status:"invisible",text:""}}}),Ii("nelio-content/tags",{icon:"tag",settings:{useBadStatus:!0},attributes:function(e){var t,n=e(lr),r=n.getPostType,o=n.getTerms,i=e(Ni.store).getEntityRecords,a=r(),s=i("root","taxonomy",{per_page:-1})||[],c=(0,f.filter)(s,(function(e){return e.visibility.public&&e.types.includes(null!=a?a:"")})).map((function(e){return e.slug}));return{tags:null!==(t=o(m.TAG))&&void 0!==t?t:o(m.PROD_TAG),isActive:c.includes(m.TAG)||c.includes(m.PROD_TAG)}},validate:function(e,t){var n=e.tags,r=t.useBadStatus;return(0,m.isEmpty)(n)?{status:r?"bad":"improvable",text:(0,le._x)("Add one or more tags","user","nelio-content")}:{status:"good",text:(0,le._x)("Content is properly tagged","text","nelio-content")}}});var Di=function(e){var t=u((function(t){return t(lr).isPanelOpen(e)})),n=(0,c.useDispatch)(lr).togglePanel;return[t,function(){return n(e,!t)}]},Oi=function(){return u((function(e){var t=e(lr).getPost,n=e($t.store),r=n.isSubscribed,o=n.getProfilesWithMessagesRelatedToPost,i=t();return r()||!(null==i?void 0:i.id)?[]:o(i.id)}))};function Li(e,t){(0,cn.addFilter)("nelio-content_edit-post_onDeletePremiumItem","deletePremium".concat((0,m.pascalCase)(e)),(function(n,r,o){return r===e?t(o):n}))}},4396:(e,t)=>{"use strict";function n(e){return e}t.L8=void 0,t.L8=function(){return n}},6942:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.m=t,e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],i=e[u][2];for(var s=!0,c=0;c<n.length;c++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[c])))?n.splice(c--,1):(s=!1,i<a&&(a=i));if(s){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={3178:0,805:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,a=n[0],s=n[1],c=n[2],l=0;if(a.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(c)var u=c(r)}for(t&&t(n);l<a.length;l++)i=a[l],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(u)},n=self.webpackChunkNelioContent=self.webpackChunkNelioContent||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[805],(()=>r(3219)));o=r.O(o);var i=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var a in o)i[a]=o[a];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();